(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4673f7d0"],{"1dde3":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{flat:"",color:t.color+" white--text lighten-2",elevation:"1"}},[t.loading?a("v-card-title",{staticClass:"pb-0"},[a("v-skeleton-loader",{attrs:{type:"heading"}})],1):a("v-card-title",{staticClass:"pb-0"},[t._v(t._s(t.title))]),a("v-card-text",[t.loading?a("v-row",[t.deposit?a("v-col",{staticClass:" white--text"},[a("v-skeleton-loader",{attrs:{type:"heading"}})],1):t._e(),a("v-col",{staticClass:" white--text"},[a("v-skeleton-loader",{attrs:{type:"heading"}})],1)],1):a("v-row",[t.deposit?a("v-col",{staticClass:" white--text"},[a("small",[t._v("Deposits")]),a("h1",[t._v(t._s(t.count))])]):t._e(),a("v-col",{staticClass:" white--text"},[a("small",[t._v("Total")]),a("h1",[t._v(t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:t.currency}).format(t.amount)))])])],1)],1)],1)},r=[],o=(a("a9e3"),{name:"Panel",props:{title:{type:String,default:"Total"},count:{type:Number,default:0},amount:{type:Number,default:0},color:{type:String,default:"green"},deposit:{type:Boolean,default:!0},loading:{type:Boolean,default:!1},currency:{type:String,default:"USD"}}}),s=o,i=a("2877"),l=a("6544"),u=a.n(l),c=a("b0af"),d=a("99d9"),m=a("62ad"),p=a("0fd9"),f=a("3129"),v=Object(i["a"])(s,n,r,!1,null,null,null);e["a"]=v.exports;u()(v,{VCard:c["a"],VCardText:d["d"],VCardTitle:d["e"],VCol:m["a"],VRow:p["a"],VSkeletonLoader:f["a"]})},"272e":function(t,e,a){},"29f9":function(t,e,a){"use strict";var n=a("9745"),r=a.n(n);r.a},"2e17":function(t,e,a){"use strict";a("99af");e["a"]={pad:function(t,e){var a=""+t;while(a.length<e)a="0"+a;return a},get today(){var t=new Date;return t.setHours(0,0,0,0),t},get first_day_of_the_month(){var t=new Date;return new Date(t.getFullYear(),t.getMonth(),1)},get todayString(){var t=this.today,e=this.pad;return["".concat(t.getFullYear(),"-").concat(e(t.getMonth()+1,2),"-").concat(e(t.getDate(),2)),"".concat(t.getFullYear(),"-").concat(e(t.getMonth()+1,2),"-").concat(e(t.getDate(),2))]},get currentDateRange(){var t=this.today,e=this.pad;return["".concat(t.getFullYear(),"-").concat(e(t.getMonth()+1,2),"-01"),"".concat(t.getFullYear(),"-").concat(e(t.getMonth()+1,2),"-").concat(e(t.getDate(),2))]}}},4641:function(t,e,a){"use strict";var n=a("272e"),r=a.n(n);r.a},7277:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("dashboard-date-picker",{model:{value:t.dates,callback:function(e){t.dates=e},expression:"dates"}}),t.isWakel?t._e():a("app-total",{attrs:{dates:t.dates}}),t.isAdmin?a("v-row",t._l(t.businesses,(function(e){return a("total-sheet",{key:e._id,attrs:{title:e.name,id:e._id,dates:t.dates}})})),1):t._e(),t.isTeamLeader?a("team-leader-report",{attrs:{dates:t.dates}}):t._e(),t.isAgent?a("agent-upsales",{attrs:{dates:t.dates}}):t._e(),t.isAgent?a("v-divider",{staticClass:"my-4"}):t._e(),t.isAgent?a("agent-report",{attrs:{dates:t.dates}}):t._e(),t.isAffiliate?a("affiliate-deposits",{attrs:{dates:t.dates}}):t._e(),t.isAffiliate?a("v-divider",{staticClass:"my-6"}):t._e(),t.isAffiliate?a("affiliate-upsales",{attrs:{dates:t.dates}}):t._e(),t.isWakel?a("wakel-total",{attrs:{dates:t.dates}}):t._e(),t.isAdmin?a("wakels-transactions",{attrs:{dates:t.dates}}):t._e()],1)},r=[],o=(a("96cf"),a("1da1")),s=a("5530"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{elevation:"1"}},[a("v-card-title",{staticClass:"pa-0"},[a("v-tabs",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab",{on:{click:t.today}},[t._v("Today")]),a("v-tab",{on:{click:t.month}},[t._v("This month")]),a("v-tab",{on:{click:function(e){t.dialog=!0}}},[t._v("Date picker")]),a("v-spacer"),a("v-tab",{staticClass:"black--text",attrs:{disabled:""}},[t._v(t._s(t.dateString))])],1)],1),a("v-dialog",{attrs:{"max-width":"650"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-date-picker",{attrs:{range:"","full-width":""},on:{input:t.range},model:{value:t.dates,callback:function(e){t.dates=e},expression:"dates"}})],1)],1)],1)},l=[],u=(a("a15b"),a("2e17")),c={name:"DatePicker",props:{value:{type:Array,default:function(){return u["a"].currentDateRange}}},data:function(){return{dates:u["a"].currentDateRange,dialog:!1,tab:1}},computed:{dateString:function(){return this.value[0]==this.value[1]?this.value[0]:this.value.join(" ~ ")}},methods:{range:function(){this.dates.length>1&&(this.dialog=!1,this.$emit("input",this.dates))},today:function(){this.$emit("input",u["a"].todayString)},month:function(){this.$emit("input",u["a"].currentDateRange)}}},d=c,m=a("2877"),p=a("6544"),f=a.n(p),v=a("b0af"),h=a("99d9"),y=a("2e4b"),g=a("169a"),_=a("2fa4"),b=a("71a3"),w=a("fe57"),x=Object(m["a"])(d,i,l,!1,null,null,null),D=x.exports;f()(x,{VCard:v["a"],VCardTitle:h["e"],VDatePicker:y["a"],VDialog:g["a"],VSpacer:_["a"],VTab:b["a"],VTabs:w["a"]});var S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-content",{staticClass:"ma-0 pa-0"},[a("v-row",[t.hasDepartment?t._e():a("v-col",{attrs:{sm:"4"}},[a("app-panel",{attrs:{loading:t.loading,title:"FTD",count:t.ftd.count,amount:t.ftd.amount}})],1),t.hasDepartment?t._e():a("v-col",{attrs:{sm:"4"}},[a("app-panel",{attrs:{loading:t.loading,title:"Retention",count:t.rtn.count,amount:t.rtn.amount}})],1),a("v-col",{attrs:{sm:t.hasDepartment?12:4}},[a("app-panel",{attrs:{loading:t.loading,count:t.total.count,amount:t.total.amount}})],1)],1)],1)},k=[],T=a("3835"),A=a("2f62"),j=a("1dde3"),C={name:"WakelTotal",components:{AppPanel:j["a"]},props:{dates:Array},data:function(){return{loading:!1,total:{count:0,amount:0},ftd:{count:0,amount:0},rtn:{count:0,amount:0}}},watch:{dates:{handler:"fetchTotals",immediate:!0}},computed:{hasDepartment:function(){return Boolean(this.$store.state.auth.user.department)},user:function(){return this.$store.state.auth.user}},methods:Object(s["a"])(Object(s["a"])({},Object(A["b"])({get:"api/get"})),{},{fetchTotals:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,n,r,o,s,i,l,u,c,d,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.get({collection:"department",query:{type:"ftd"}});case 3:return a=e.sent,a=a.data.docs[0]._id,e.next=7,t.get({collection:"department",query:{type:"rtn"}});case 7:return n=e.sent,n=n.data.docs[0]._id,e.next=11,t.get({collection:"dashboard/total",query:{created_on:t.dates.join("|")}});case 11:return r=e.sent,200==r.status&&(o=Object(T["a"])(r.data,1),s=o[0],t.total.amount=s&&s.amount?s.amount:0,t.total.count=s&&s.count?s.count:0),e.next=15,t.get({collection:"dashboard/total",query:{created_on:t.dates.join("|"),department:a}});case 15:return i=e.sent,200==i.status&&(l=Object(T["a"])(i.data,1),u=l[0],t.ftd.amount=u&&u.amount?u.amount:0,t.ftd.count=u&&u.count?u.count:0),e.next=19,t.get({collection:"dashboard/total",query:{created_on:t.dates.join("|"),department:n}});case 19:c=e.sent,200==c.status&&(d=Object(T["a"])(c.data,1),m=d[0],t.rtn.amount=m&&m.amount?m.amount:0,t.rtn.count=m&&m.count?m.count:0),t.loading=!1;case 22:case"end":return e.stop()}}),e)})))()}})},O=C,R=a("62ad"),U=a("a75b"),V=a("0fd9"),N=Object(m["a"])(O,S,k,!1,null,null,null),M=N.exports;f()(N,{VCol:R["a"],VContent:U["a"],VRow:V["a"]});var F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-sheet",{staticClass:" mb-3 mx-3 ",attrs:{color:t.color,width:"100%",elevation:"1"}},[a("v-toolbar",{staticClass:"mb-3",attrs:{dense:"",flat:"",color:t.color}},[a("v-toolbar-title",{staticClass:"title "},[t._v(t._s(t.title))])],1),a("v-row",{staticClass:"mx-1"},[t._l(t.departments,(function(e,n){return a("v-col",{key:n,staticClass:"mx-2 pa-0 px-2",attrs:{cols:"xs"==t.$vuetify.breakpoint.name?12:null}},[a("fieldset",{staticClass:"px-2 mb-2 fielset"},[a("legend",[t._v(" "+t._s(e._id.name)+" ")]),a("v-row",[a("v-col",[a("small",[t._v("Deposits")]),a("h2",[t._v(t._s(e.count||0))])]),a("v-col",[a("small",[t._v("Total")]),a("h2",[t._v(t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e.amount||0)))])])],1),a("v-btn",{attrs:{icon:""},on:{click:function(a){return t.goToDeposits(e._id._id)}}},[a("v-icon",[t._v("mdi-table")])],1)],1)])})),a("v-col",{staticClass:"mx-2 pa-0 px-2",attrs:{cols:"xs"==t.$vuetify.breakpoint.name?12:null,sm:""}},[a("fieldset",{staticClass:"px-2 mb-2 fielset"},[a("legend",[t._v("Total ")]),a("v-row",[a("v-col",[a("small",[t._v("Deposits")]),a("h2",[t._v(t._s(t.total.count||0))])]),a("v-col",[a("small",[t._v("Total")]),a("h2",[t._v(t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t.total.amount||0)))])])],1),a("v-btn",{attrs:{icon:""},on:{click:function(e){return t.goToDeposits(null)}}},[a("v-icon",[t._v("mdi-table")])],1)],1)])],2)],1)},H=[],$={name:"TotalSheet",props:{title:String,id:String,dates:Array,color:{type:String,default:"white"}},data:function(){return{departments:[],departmentsNames:[],total:{count:0,amount:0}}},watch:{dates:{handler:"fetchTotal",immediate:!0}},methods:Object(s["a"])(Object(s["a"])({},Object(A["b"])({get:"api/get"})),{},{goToDeposits:function(t){var e={business:this.id,created_on:this.dates.join("|")};t&&(e.department=t),this.$router.push({path:"/deposit",query:e})},fetchTotal:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.get({collection:"department",query:{sortBy:["name"],sortDesc:[!0]}});case 2:return a=e.sent,a&&200==a.status&&(t.departmentsNames=a.data.docs),e.next=6,t.get({collection:"dashboard/business",query:{created_on:t.dates.join("|"),business:t.id}});case 6:return n=e.sent,n&&200==n.status&&(t.departments=n.data.departmentsTotal),e.next=10,t.get({collection:"dashboard/total",query:{created_on:t.dates.join("|"),business:t.id}});case 10:r=e.sent,r&&200==r.status&&(t.total.count=r.data&&r.data[0]?r.data[0].count:0,t.total.amount=r.data&&r.data[0]?r.data[0].amount:0);case 12:case"end":return e.stop()}}),e)})))()}})},I=$,q=(a("ada4"),a("8336")),P=a("132d"),L=a("8dd9"),E=a("71d9"),W=a("2a7f"),B=Object(m["a"])(I,F,H,!1,null,"059c5784",null),Y=B.exports;f()(B,{VBtn:q["a"],VCol:R["a"],VIcon:P["a"],VRow:V["a"],VSheet:L["a"],VToolbar:E["a"],VToolbarTitle:W["c"]});var J=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-data-table",{attrs:{loading:t.loading,"single-expand":!0,expanded:t.expanded,"show-expand":"","item-key":"_id._id",headers:t.headers,items:t.items},on:{"update:expanded":function(e){t.expanded=e}},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-icon",{staticClass:"mx-2",attrs:{size:"33"}},[t._v("mdi-bank-transfer-in")]),a("v-toolbar-title",[t._v("Deposits")]),a("v-spacer")],1)]},proxy:!0},{key:"loading",fn:function(){return[a("v-skeleton-loader",{staticClass:"mt-6",attrs:{height:"94",type:"list-item-three-line"}})]},proxy:!0},{key:"item.amount",fn:function(e){var a=e.item;return[t._v(" "+t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a.amount))+" ")]}},{key:"expanded-item",fn:function(e){var n=e.headers;return[a("td",{staticClass:"pa-4",attrs:{colspan:n.length}},[a("v-data-table",{attrs:{headers:t.dataHeaders,items:t.dataItems,loading:t.exLoading},scopedSlots:t._u([{key:"loading",fn:function(){return[a("v-skeleton-loader",{staticClass:"mt-6",attrs:{height:"94",type:"list-item-three-line"}})]},proxy:!0},{key:"item.amount",fn:function(e){var a=e.item;return[t._v(" "+t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a.amount))+" ")]}},{key:"item.created_on",fn:function(e){var a=e.item;return[t._v(" "+t._s(t.dateformat(new Date(a.created_on),"yyyy-mm-dd"))+" ")]}}],null,!0)})],1)]}}])})},Z=[],z=a("b9b9"),G=a.n(z),K=[{text:"TPC",align:"start",value:"_id.tpc"},{text:"Account",value:"_id.name"},{text:"Deposits",value:"count",width:"30%"},{text:"Total",value:"amount"}],Q=[{text:"Date",value:"created_on"},{text:"Amount",value:"amount"}],X={name:"AffiliateDeposits",props:{dates:{type:Array}},data:function(){return{dateformat:G.a,expanded:[],dialog:!1,dialogTitle:"",loading:!1,headers:K,items:[],exLoading:!1,dataHeaders:Q,dataItems:[]}},watch:{dates:function(){this.getDeposits()},expanded:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!t.length){a.next=8;break}return e.exLoading=!0,n=t[0]._id._id,a.next=5,e.get({collection:"deposit",query:{created_on:e.dates.join("|"),customer:n,limit:1e3,sortBy:["created_on"],sortDesc:[!0]}});case 5:r=a.sent,e.dataItems=r.data.docs,e.exLoading=!1;case 8:case"end":return a.stop()}}),a)})))()}},methods:Object(s["a"])(Object(s["a"])({},Object(A["b"])({get:"api/get"})),{},{getDeposits:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,a={created_on:t.dates.join("|"),"affiliate._id":t.$store.state.auth.user.affiliate},e.next=4,t.get({collection:"report_old/affiliate",query:Object(s["a"])(Object(s["a"])({groupBy:"customer._id"},a),{},{meta:{collection:"customer"},sortBy:["customer.tpc","created_on"],sortDesc:[1,1]})});case 4:n=e.sent,t.items=n.data,t.loading=!1;case 7:case"end":return e.stop()}}),e)})))()}}),computed:{today:function(){var t=new Date;return t.setHours(0,0,0,0),t},first_day_of_the_month:function(){return new Date(this.today.getFullYear(),this.today.getMonth(),1)}},created:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getDeposits();case 1:case"end":return e.stop()}}),e)})))()}},tt=X,et=(a("29f9"),a("8fea")),at=a("3129"),nt=Object(m["a"])(tt,J,Z,!1,null,"57c8f4ec",null),rt=nt.exports;f()(nt,{VDataTable:et["a"],VIcon:P["a"],VSkeletonLoader:at["a"],VSpacer:_["a"],VToolbar:E["a"],VToolbarTitle:W["c"]});var ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-data-table",{attrs:{loading:t.loading,"single-expand":!0,expanded:t.expanded,"show-expand":"","item-key":"_id",headers:t.headers,items:t.items},on:{"update:expanded":function(e){t.expanded=e}},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-icon",{staticClass:"mx-2",attrs:{size:"25"}},[t._v("mdi-chart-line")]),a("v-toolbar-title",[t._v("Upsales")]),a("v-spacer")],1)]},proxy:!0},{key:"loading",fn:function(){return[a("v-skeleton-loader",{staticClass:"mt-6",attrs:{height:"94",type:"list-item-three-line"}})]},proxy:!0},{key:"item.amount",fn:function(e){var a=e.item;return[t._v(" "+t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a.amount))+" ")]}},{key:"item.total.amount",fn:function(e){var a=e.item;return[t._v(" "+t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a.total.amount))+" ")]}},{key:"item.created_on",fn:function(e){var a=e.item;return[t._v(" "+t._s(t.dateformat(new Date(a.created_on),"yyyy-mm-dd"))+" ")]}},{key:"item.count",fn:function(e){var a=e.item;return[t._v(" "+t._s(a.child.length)+" ")]}},{key:"expanded-item",fn:function(e){var n=e.headers,r=e.item;return[a("td",{staticClass:"pa-4",attrs:{colspan:n.length}},[a("v-data-table",{attrs:{headers:t.dataHeaders,items:r.child},scopedSlots:t._u([{key:"item.amount",fn:function(e){var a=e.item;return[t._v(" "+t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a.amount))+" ")]}},{key:"item.total.amount",fn:function(e){var a=e.item;return[t._v(" "+t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a.total.amount))+" ")]}},{key:"item.created_on",fn:function(e){var a=e.item;return[t._v(" "+t._s(t.dateformat(new Date(a.created_on),"yyyy-mm-dd"))+" ")]}},{key:"item.count",fn:function(e){var a=e.item;return[t._v(" "+t._s(a.child.length)+" ")]}}],null,!0)})],1)]}}])})},st=[],it={name:"AffiliateuUpsales",props:{dates:{type:Array}},data:function(){return{dateformat:G.a,loading:!1,expanded:[],headers:[{text:"TP Account",align:"start",value:"customer.tpc",width:"10%"},{text:"Account name",align:"start",value:"customer.name"},{text:"FTD",value:"amount"},{text:"Deposits",value:"count"},{text:"Total",value:"total.amount"},{text:"Date",value:"created_on"}],items:[],dataHeaders:[{text:"Date",value:"created_on"},{text:"Amount",value:"amount"}]}},watch:{dates:function(){this.getUpsales()}},methods:Object(s["a"])(Object(s["a"])({},Object(A["b"])({get:"api/get"})),{},{getUpsales:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.get({collection:"report/affiliate",query:{created_on:t.dates.join("|"),id:t.$store.state.auth.user.affiliate}});case 3:a=e.sent,t.items=a.data[0].child,t.loading=!1;case 6:case"end":return e.stop()}}),e)})))()}}),created:function(){this.getUpsales()}},lt=it,ut=Object(m["a"])(lt,ot,st,!1,null,null,null),ct=ut.exports;f()(ut,{VDataTable:et["a"],VIcon:P["a"],VSkeletonLoader:at["a"],VSpacer:_["a"],VToolbar:E["a"],VToolbarTitle:W["c"]});var dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",[a("v-data-table",{staticStyle:{width:"100%"},attrs:{headers:t.headers,expanded:t.expanded,"show-expand":"","single-expand":"","item-key":"_id",items:t.items,loading:t.loading},scopedSlots:t._u([{key:"loading",fn:function(){return[a("v-skeleton-loader",{staticClass:"mt-6",attrs:{height:"94",type:"list-item-three-line"}})]},proxy:!0},{key:"item.amount",fn:function(e){var a=e.item;return[t._v(" "+t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a.amount))+" ")]}},{key:"expanded-item",fn:function(e){var n=e.headers,r=e.item;return[a("td",{staticClass:"pa-4",attrs:{colspan:n.length}},[a("v-data-table",{attrs:{headers:t.dataHeaders,items:r.child},scopedSlots:t._u([{key:"item.amount",fn:function(e){var a=e.item;return[t._v(" "+t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a.amount))+" ")]}},{key:"item.created_on",fn:function(e){var a=e.item;return[t._v(" "+t._s(t.dateformat(new Date(a.created_on),"yyyy-mm-dd"))+" ")]}}],null,!0)})],1)]}},{key:"body.append",fn:function(e){var n=e.headers;return[a("tr",[a("td",{staticClass:"font-weight-bold",attrs:{colspan:n.length-2}},[t._v("Total")]),a("td",{staticClass:"font-weight-bold"},[t._v(t._s(t.count))]),a("td",{staticClass:"font-weight-bold"},[t._v(t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t.total)))])])]}}])})],1)},mt=[],pt={name:"AgentReport",props:{dates:{type:Array}},data:function(){return{dateformat:G.a,headers:[{text:"TP Account",align:"start",value:"customer.tpc"},{text:"Account name",align:"start",value:"customer.name"},{text:"Deposits",value:"count"},{text:"Total",value:"amount"}],dataHeaders:[{text:"Department",value:"department.name"},{text:"Date",value:"created_on"},{text:"Amount",value:"amount"},{text:"Owner",value:"user.displayName"}],items:[],loading:!1,total:0,count:0,expanded:[]}},computed:{user:function(){return this.$store.state.auth.user}},methods:Object(s["a"])(Object(s["a"])({},Object(A["b"])({get:"api/get"})),{},{update:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.get({collection:"report_new",query:{department:t.user.department||null,by:"user",created_on:t.dates.join("|"),id:t.user._id}});case 3:a=e.sent,a.data[0]&&(t.total=a.data[0].amount,t.count=a.data[0].count,t.items=a.data[0].child),t.loading=!1;case 6:case"end":return e.stop()}}),e)})))()}}),watch:{dates:{handler:"update",immediate:!0}}},ft=pt,vt=Object(m["a"])(ft,dt,mt,!1,null,null,null),ht=vt.exports;f()(vt,{VDataTable:et["a"],VRow:V["a"],VSkeletonLoader:at["a"]});var yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",[a("v-data-table",{staticStyle:{width:"100%"},attrs:{headers:t.headers,expanded:t.expanded,"show-expand":"","single-expand":"","item-key":"_id",items:t.items,loading:t.loading},scopedSlots:t._u([{key:"loading",fn:function(){return[a("v-skeleton-loader",{staticClass:"mt-6",attrs:{height:"94",type:"list-item-three-line"}})]},proxy:!0},{key:"item.amount",fn:function(e){var a=e.item;return[t._v(" "+t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a.amount))+" ")]}},{key:"item.total",fn:function(e){var a=e.item;return[t._v(" "+t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a.total?a.total.amount:0))+" ")]}},{key:"item.created_on",fn:function(e){var a=e.item;return[t._v(" "+t._s(t.dateformat(new Date(a.created_on),"yyyy-mm-dd"))+" ")]}},{key:"item.ftd.created_on",fn:function(e){var a=e.item;return[t._v(" "+t._s(t.dateformat(new Date(a.ftd.created_on),"yyyy-mm-dd"))+" ")]}},{key:"item.action",fn:function(e){var n=e.item;return[a("v-btn",{attrs:{color:"green white--text"},on:{click:function(e){return t.$router.push("/deposit/new?clone="+n.ftd._id+"&fields=customer&fields=payment_method")}}},[a("v-icon",[t._v(" mdi-bank-transfer-in ")])],1)]}},{key:"expanded-item",fn:function(e){var n=e.headers,r=e.item;return[a("td",{staticClass:"pa-4",attrs:{colspan:n.length}},[a("v-data-table",{attrs:{headers:t.dataHeaders,items:r.child},scopedSlots:t._u([{key:"item.amount",fn:function(e){var a=e.item;return[t._v(" "+t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a.amount))+" ")]}},{key:"item.created_on",fn:function(e){var a=e.item;return[t._v(" "+t._s(t.dateformat(new Date(a.created_on),"yyyy-mm-dd"))+" ")]}}],null,!0)})],1)]}}])})],1)},gt=[],_t={name:"AgentUpsales",props:{dates:{type:Array}},data:function(){return{dateformat:G.a,headers:[{text:"TP Account",align:"start",value:"tpc"},{text:"Account name",align:"start",value:"name"},{text:"Owner conversion",value:"ftd.user.displayName"},{text:"FTD",value:"ftd.amount"},{text:"FTD Date",value:"ftd.created_on"},{text:"Deposits",value:"child.length"},{text:"Owner Total",value:"total"},{text:"Action",value:"action"}],dataHeaders:[{text:"Date",value:"created_on"},{text:"Amount",value:"amount"},{text:"Owner",value:"user.displayName"}],items:[],loading:!1,total:0,count:0,expanded:[]}},computed:{user:function(){return this.$store.state.auth.user}},methods:Object(s["a"])(Object(s["a"])({},Object(A["b"])({get:"api/get"})),{},{update:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.get({collection:"report/agent",query:{created_on:t.dates.join("|"),id:t.user._id||null}});case 3:a=e.sent,a.data[0]&&(t.total=a.data[0].amount,t.count=a.data[0].count,t.items=a.data[0].child),t.loading=!1;case 6:case"end":return e.stop()}}),e)})))()}}),watch:{dates:{handler:"update",immediate:!0}}},bt=_t,wt=Object(m["a"])(bt,yt,gt,!1,null,null,null),xt=wt.exports;f()(wt,{VBtn:q["a"],VDataTable:et["a"],VIcon:P["a"],VRow:V["a"],VSkeletonLoader:at["a"]});var Dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",[a("v-data-table",{staticStyle:{width:"100%"},attrs:{headers:t.headers,expanded:t.expanded,"show-expand":"","single-expand":"","item-key":"_id",items:t.items,loading:t.loading},scopedSlots:t._u([{key:"loading",fn:function(){return[a("v-skeleton-loader",{staticClass:"mt-6",attrs:{height:"94",type:"list-item-three-line"}})]},proxy:!0},{key:"item.amount",fn:function(e){var a=e.item;return[t._v(" "+t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a.amount))+" ")]}},{key:"expanded-item",fn:function(e){var n=e.headers,r=e.item;return[a("td",{staticClass:"pa-4",attrs:{colspan:n.length}},[a("v-data-table",{attrs:{headers:t.dataHeaders,items:r.child},on:{"click:row":t.goTo},scopedSlots:t._u([{key:"item.amount",fn:function(e){var a=e.item;return[t._v(" "+t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a.amount))+" ")]}},{key:"item.created_on",fn:function(e){var a=e.item;return[t._v(" "+t._s(t.dateformat(new Date(a.created_on),"yyyy-mm-dd"))+" ")]}}],null,!0)})],1)]}}])})],1)},St=[],kt={name:"AgentReport",props:{dates:{type:Array}},data:function(){return{dateformat:G.a,headers:[{text:"Owner",align:"start",value:"user.displayName"},{text:"Deposits",value:"count"},{text:"Total",value:"amount"}],dataHeaders:[{text:"Owner",align:"start",value:"customer.tpc"},{text:"Account name",align:"start",value:"customer.name"},{text:"Deposits",value:"count"},{text:"Total",value:"amount"}],items:[],loading:!1,expanded:[]}},computed:{user:function(){return this.$store.state.auth.user}},methods:Object(s["a"])(Object(s["a"])({},Object(A["b"])({get:"api/get"})),{},{update:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.get({collection:"report_new",query:{department:t.user.department||null,by:"user",created_on:t.dates.join("|")}});case 3:a=e.sent,a.data&&(t.items=a.data),t.loading=!1;case 6:case"end":return e.stop()}}),e)})))()},goTo:function(t){console.log(t)}}),watch:{dates:{handler:"update",immediate:!0}}},Tt=kt,At=Object(m["a"])(Tt,Dt,St,!1,null,null,null),jt=At.exports;f()(At,{VDataTable:et["a"],VRow:V["a"],VSkeletonLoader:at["a"]});var Ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-content",{staticClass:"ma-0 pa-0"},[a("v-row",[a("v-col",{attrs:{sm:"6"}},[a("app-panel",{attrs:{loading:t.loading,title:"Subtotal",currency:"SAR",count:t.subtotal.count,amount:t.subtotal.amount}})],1),a("v-col",{attrs:{sm:"6"}},[a("app-panel",{attrs:{loading:t.loading,title:"Withdraw",currency:"SAR",count:t.withdraw.count,amount:t.withdraw.amount,color:"red"}})],1),a("v-col",{attrs:{sm:"6"}},[a("app-panel",{attrs:{loading:t.loading,title:"Total SAR",currency:"SAR",count:t.totalSAR.count,amount:t.totalSAR.amount}})],1),a("v-col",{attrs:{sm:"6"}},[a("app-panel",{attrs:{loading:t.loading,title:"Total USD",count:t.totalUSD.count,amount:t.totalUSD.amount}})],1)],1)],1)},Ot=[],Rt={name:"WakelTotal",components:{AppPanel:j["a"]},props:{dates:Array},data:function(){return{loading:!1,subtotal:{count:0,amount:0},withdraw:{count:0,amount:0},totalSAR:{count:0,amount:0},totalUSD:{count:0,amount:0}}},watch:{dates:{handler:"fetchTotals",immediate:!0}},methods:Object(s["a"])(Object(s["a"])({},Object(A["b"])({get:"api/get"})),{},{fetchTotals:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.get({collection:"transaction/total",query:{created_on:t.dates.join("|")}});case 3:a=e.sent,200==a.status&&(n=Object(T["a"])(a.data,1),r=n[0],t.subtotal.amount=r&&r.subtotal?r.subtotal.amount:0,t.subtotal.count=r&&r.subtotal?r.subtotal.count:0,t.withdraw.amount=r&&r.withdraw?r.withdraw.amount:0,t.withdraw.count=r&&r.withdraw?r.withdraw.count:0,t.totalSAR.amount=r&&r.amount?r.amount:0,t.totalSAR.count=r&&r.count?r.count:0,t.totalUSD.amount=r&&r.amount?r.amount/3.9:0,t.totalUSD.count=r&&r.count?r.count:0),t.loading=!1;case 6:case"end":return e.stop()}}),e)})))()}})},Ut=Rt,Vt=Object(m["a"])(Ut,Ct,Ot,!1,null,null,null),Nt=Vt.exports;f()(Vt,{VCol:R["a"],VContent:U["a"],VRow:V["a"]});var Mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-content",{staticClass:"ma-0 pa-0"},[a("v-row",[a("v-col",{attrs:{sm:"6"}},[a("app-panel",{attrs:{loading:t.loading,title:"Subtotal",currency:"SAR",count:t.subtotal.count,amount:t.subtotal.amount}})],1),a("v-col",{attrs:{sm:"6"}},[a("app-panel",{attrs:{loading:t.loading,title:"Withdraw",currency:"SAR",count:t.withdraw.count,amount:t.withdraw.amount,color:"red"}})],1),a("v-col",{attrs:{sm:"6"}},[a("app-panel",{attrs:{loading:t.loading,title:"Total SAR",currency:"SAR",count:t.totalSAR.count,amount:t.totalSAR.amount}})],1),a("v-col",{attrs:{sm:"6"}},[a("app-panel",{attrs:{loading:t.loading,title:"Total USD",count:t.totalUSD.count,amount:t.totalUSD.amount}})],1)],1),t._l(t.wakels,(function(e){return a("v-sheet",{key:e._id,staticClass:"my-2",attrs:{width:"100%",elevation:"1"}},[a("v-toolbar",{staticClass:"mb-3",attrs:{dense:"",flat:""}},[a("v-toolbar-title",{staticClass:"title "},[t._v(t._s(e.displayName))])],1),a("v-row",{staticClass:"mx-1"},[a("v-col",{staticClass:"mx-2 pa-0 px-2",attrs:{cols:"xs"==t.$vuetify.breakpoint.name?12:null,sm:""}},[a("fieldset",{staticClass:"px-2 mb-2 fielset"},[a("legend",[t._v("Subtotal SAR")]),a("v-row",[a("v-col",[a("small",[t._v("Deposits")]),a("h4",[t._v(t._s(e.total&&e.total.subtotal?e.total.subtotal.count:0))])]),a("v-col",[a("small",[t._v("Total")]),a("h4",[t._v(t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"SAR"}).format(e.total&&e.total.subtotal?e.total.subtotal.amount:0)))])])],1)],1)]),a("v-col",{staticClass:"mx-2 pa-0 px-2",attrs:{cols:"xs"==t.$vuetify.breakpoint.name?12:null,sm:""}},[a("fieldset",{staticClass:"px-2 mb-2 fielset"},[a("legend",{staticClass:"red--text"},[t._v("Withdraw SAR")]),a("v-row",[a("v-col",[a("small",{staticClass:"red--text"},[t._v("Deposits")]),a("h4",{staticClass:"red--text"},[t._v(t._s(e.total&&e.total.withdraw?e.total.withdraw.count:0))])]),a("v-col",[a("small",{staticClass:"red--text"},[t._v("Total")]),a("h4",{staticClass:"red--text"},[t._v(t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"SAR"}).format(e.total&&e.total.withdraw?e.total.withdraw.amount:0)))])])],1)],1)]),a("v-col",{staticClass:"mx-2 pa-0 px-2",attrs:{cols:"xs"==t.$vuetify.breakpoint.name?12:null,sm:""}},[a("fieldset",{staticClass:"px-2 mb-2 fielset"},[a("legend",[t._v("Total SAR")]),a("v-row",[a("v-col",[a("small",[t._v("Deposits")]),a("h4",[t._v(t._s(e.total?e.total.count:0))])]),a("v-col",[a("small",[t._v("Total")]),a("h4",[t._v(t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"SAR"}).format(e.total?e.total.amount:0)))])])],1)],1)]),a("v-col",{staticClass:"mx-2 pa-0 px-2",attrs:{cols:"xs"==t.$vuetify.breakpoint.name?12:null,sm:""}},[a("fieldset",{staticClass:"px-2 mb-2 fielset"},[a("legend",[t._v("Total USD")]),a("v-row",[a("v-col",[a("small",[t._v("Deposits")]),a("h4",[t._v(t._s(e.total?e.total.count:0))])]),a("v-col",[a("small",[t._v("Total")]),a("h4",[t._v(t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e.total?e.total.amount/3.9:0)))])])],1)],1)])],1)],1)}))],2)},Ft=[],Ht=(a("d81d"),a("d3b7"),a("3ca3"),a("ddb0"),{name:"WakelsTotalDashboard",components:{AppPanel:j["a"]},props:{dates:Array},data:function(){return{loading:!1,subtotal:{count:0,amount:0},withdraw:{count:0,amount:0},totalSAR:{count:0,amount:0},totalUSD:{count:0,amount:0},wakels:[]}},watch:{dates:{handler:"fetchTotal",immediate:!0}},methods:Object(s["a"])(Object(s["a"])({},Object(A["b"])({get:"api/get"})),{},{fetchTotal:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,n,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.get({collection:"transaction/total",query:{created_on:t.dates.join("|")}});case 3:return a=e.sent,200==a.status&&(n=Object(T["a"])(a.data,1),r=n[0],t.subtotal.amount=r&&r.subtotal?r.subtotal.amount:0,t.subtotal.count=r&&r.subtotal?r.subtotal.count:0,t.withdraw.amount=r&&r.withdraw?r.withdraw.amount:0,t.withdraw.count=r&&r.withdraw?r.withdraw.count:0,t.totalSAR.amount=r&&r.amount?r.amount:0,t.totalSAR.count=r&&r.count?r.count:0,t.totalUSD.amount=r&&r.amount?r.amount/3.9:0,t.totalUSD.count=r&&r.count?r.count:0),e.next=7,t.get({collection:"user",query:{role:"wakel"}});case 7:return s=e.sent,e.next=10,Promise.all(s.data.docs.map(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(a){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.get({collection:"transaction/total",query:{created_on:t.dates.join("|"),user:a._id}});case 2:return n=e.sent,a.total=n.data[0],e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 10:t.wakels=e.sent,t.loading=!1;case 12:case"end":return e.stop()}}),e)})))()}})}),$t=Ht,It=(a("4641"),Object(m["a"])($t,Mt,Ft,!1,null,"97968fc0",null)),qt=It.exports;f()(It,{VCol:R["a"],VContent:U["a"],VRow:V["a"],VSheet:L["a"],VToolbar:E["a"],VToolbarTitle:W["c"]});var Pt={name:"Dashboard",components:{DashboardDatePicker:D,AppTotal:M,TotalSheet:Y,AffiliateDeposits:rt,AffiliateUpsales:ct,AgentReport:ht,AgentUpsales:xt,TeamLeaderReport:jt,WakelTotal:Nt,WakelsTransactions:qt},data:function(){return{dates:u["a"].currentDateRange,businesses:[]}},computed:Object(s["a"])(Object(s["a"])({},Object(A["d"])({user:function(t){return t.auth.user}})),{},{isAdmin:function(){return"admin"==this.user.role||"owner"==this.user.role},isAgent:function(){return"agent"==this.user.role},isTeamLeader:function(){return"team_leader"==this.user.role},isAffiliate:function(){return"affiliate"==this.user.role},isWakel:function(){return"wakel"==this.user.role}}),methods:Object(s["a"])({},Object(A["b"])({get:"api/get"})),created:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.isAdmin){e.next=5;break}return e.next=3,t.get({collection:"business",query:{sortBy:["name"],sortDesc:[!0]}});case 3:a=e.sent,a&&200==a.status&&a.data.docs.length&&(t.businesses=a.data.docs);case 5:case"end":return e.stop()}}),e)})))()}},Lt=Pt,Et=a("a523"),Wt=a("ce7e"),Bt=Object(m["a"])(Lt,n,r,!1,null,null,null);e["default"]=Bt.exports;f()(Bt,{VContainer:Et["a"],VDivider:Wt["a"],VRow:V["a"]})},9745:function(t,e,a){},ada4:function(t,e,a){"use strict";var n=a("c424"),r=a.n(n);r.a},b9b9:function(t,e,a){var n;(function(r){"use strict";var o=function(){var t=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|"[^"]*"|'[^']*'/g,e=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,a=/[^-+\dA-Z]/g;return function(n,r,c,d){if(1!==arguments.length||"string"!==u(n)||/\d/.test(n)||(r=n,n=void 0),n=n||new Date,n instanceof Date||(n=new Date(n)),isNaN(n))throw TypeError("Invalid date");r=String(o.masks[r]||r||o.masks["default"]);var m=r.slice(0,4);"UTC:"!==m&&"GMT:"!==m||(r=r.slice(4),c=!0,"GMT:"===m&&(d=!0));var p=c?"getUTC":"get",f=n[p+"Date"](),v=n[p+"Day"](),h=n[p+"Month"](),y=n[p+"FullYear"](),g=n[p+"Hours"](),_=n[p+"Minutes"](),b=n[p+"Seconds"](),w=n[p+"Milliseconds"](),x=c?0:n.getTimezoneOffset(),D=i(n),S=l(n),k={d:f,dd:s(f),ddd:o.i18n.dayNames[v],dddd:o.i18n.dayNames[v+7],m:h+1,mm:s(h+1),mmm:o.i18n.monthNames[h],mmmm:o.i18n.monthNames[h+12],yy:String(y).slice(2),yyyy:y,h:g%12||12,hh:s(g%12||12),H:g,HH:s(g),M:_,MM:s(_),s:b,ss:s(b),l:s(w,3),L:s(Math.round(w/10)),t:g<12?o.i18n.timeNames[0]:o.i18n.timeNames[1],tt:g<12?o.i18n.timeNames[2]:o.i18n.timeNames[3],T:g<12?o.i18n.timeNames[4]:o.i18n.timeNames[5],TT:g<12?o.i18n.timeNames[6]:o.i18n.timeNames[7],Z:d?"GMT":c?"UTC":(String(n).match(e)||[""]).pop().replace(a,""),o:(x>0?"-":"+")+s(100*Math.floor(Math.abs(x)/60)+Math.abs(x)%60,4),S:["th","st","nd","rd"][f%10>3?0:(f%100-f%10!=10)*f%10],W:D,N:S};return r.replace(t,(function(t){return t in k?k[t]:t.slice(1,t.length-1)}))}}();function s(t,e){t=String(t),e=e||2;while(t.length<e)t="0"+t;return t}function i(t){var e=new Date(t.getFullYear(),t.getMonth(),t.getDate());e.setDate(e.getDate()-(e.getDay()+6)%7+3);var a=new Date(e.getFullYear(),0,4);a.setDate(a.getDate()-(a.getDay()+6)%7+3);var n=e.getTimezoneOffset()-a.getTimezoneOffset();e.setHours(e.getHours()-n);var r=(e-a)/6048e5;return 1+Math.floor(r)}function l(t){var e=t.getDay();return 0===e&&(e=7),e}function u(t){return null===t?"null":void 0===t?"undefined":"object"!==typeof t?typeof t:Array.isArray(t)?"array":{}.toString.call(t).slice(8,-1).toLowerCase()}o.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},o.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],timeNames:["a","p","am","pm","A","P","AM","PM"]},n=function(){return o}.call(e,a,e,t),void 0===n||(t.exports=n)})()},c424:function(t,e,a){}}]);
//# sourceMappingURL=chunk-4673f7d0.e2380f85.js.map