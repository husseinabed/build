(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6974dbdf"],{"5b8f":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-card",[n("v-card-title",[n("v-icon",{staticClass:"mx-2",attrs:{size:"36"}},[t._v(t._s(t.collectionOptions.icon))]),t._v(t._s(t.collectionOptions.title)+" "),n("v-spacer"),t.collectionOptions.import?n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,i=e.attrs;return[n("v-btn",t._g(t._b({attrs:{icon:""},on:{click:t.importFile}},"v-btn",i,!1),a),[n("v-icon",[t._v("mdi-database-import ")])],1)]}}],null,!1,3639177902)},[n("span",[t._v("Import")])]):t._e(),t.collectionOptions.export?n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,i=e.attrs;return[n("v-btn",t._g(t._b({attrs:{icon:""},on:{click:function(e){t.dialog=!0}}},"v-btn",i,!1),a),[n("v-icon",[t._v("mdi-database-export ")])],1)]}}],null,!1,4155484130)},[n("span",[t._v("Export")])]):t._e(),n("v-btn",{staticClass:"ml-6",attrs:{color:"success"},on:{click:function(e){return t.$router.push("/"+t.$route.params.collection+"/new")}}},[n("v-icon",[t._v("mdi-plus")]),t._v(" New ")],1)],1),n("v-card-text",[n("v-row",t._l(t.filters,(function(e,a){return n("v-col",{key:a,attrs:{sm:"4"}},[n(t.inputs[e.input],t._g(t._b({tag:"component",staticClass:"mx-1",attrs:{outlined:"",rounded:"",dense:"","hide-details":"",value:t.setFilterValue(t.$route.query[e.name]||null,e.name)},on:{input:function(n){return t.filter(e.name,n)}}},"component",e.bind,!1),e.on))],1)})),1)],1)],1),n("v-data-table",{staticClass:"my-5 elevation-1",attrs:{loading:t.loading,headers:t.headers,items:t.items,"hide-default-footer":"","multi-sort":""},on:{"update:options":t.tableOptions},scopedSlots:t._u([{key:"item.created_on",fn:function(e){var n=e.item;return[t._v(" "+t._s(t.dateformat(new Date(n.created_on),"yyyy-mm-dd"))+" ")]}},{key:"item.payment_method.name",fn:function(e){var n=e.item;return[t._v(" "+t._s(n.payment_method.name)+" ("+t._s(n.payment_method.type)+") ")]}},{key:"item.amount",fn:function(e){var n=e.item;return[t._v(" "+t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(n.amount))+" ")]}},{key:"item.active",fn:function(t){var e=t.item;return[n("v-badge",{attrs:{color:e.active?"green":"grey"}})]}},{key:"item.read",fn:function(t){var e=t.item;return[n("v-badge",{attrs:{color:e.read?"green":"grey"}})]}},{key:"item.country",fn:function(e){var n=e.item;return[t._v(" "+t._s(t.countries.filter((function(t){return t.code==n.country}))[0].name)+" ")]}},{key:"item.actions",fn:function(e){var a=e.item;return[n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,o=e.attrs;return[n("v-icon",t._g(t._b({staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.cloneItem(a)}}},"v-icon",o,!1),i),[t._v(" mdi-content-copy ")])]}}],null,!0)},[n("span",[t._v("Copy")])]),n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,o=e.attrs;return[n("v-icon",t._g(t._b({staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editItem(a)}}},"v-icon",o,!1),i),[t._v(" mdi-pencil ")])]}}],null,!0)},[n("span",[t._v("Edit")])]),n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,o=e.attrs;return[n("v-icon",t._g(t._b({attrs:{small:""},on:{click:function(e){return t.deleteItem(a)}}},"v-icon",o,!1),i),[t._v(" mdi-delete ")])]}}],null,!0)},[n("span",[t._v("Delete")])]),t.hasAssignTo(a)?n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,o=e.attrs;return[n("v-icon",t._g(t._b({staticClass:"mx-2",attrs:{color:a.assign?"green":"blue",small:""},on:{click:function(e){return t.assignTo(a)}}},"v-icon",o,!1),i),[t._v(t._s(a.assign?"mdi-clipboard-check":"mdi-clipboard-account"))])]}}],null,!0)},[n("span",[t._v("Assign to")])]):t._e()]}},{key:"loading",fn:function(){return[n("v-skeleton-loader",{staticClass:"mt-6",attrs:{height:"94",type:"list-item-three-line"}})]},proxy:!0},{key:"footer",fn:function(){return[n("v-pagination",{staticClass:"pa-4",attrs:{value:Number(t.$route.query.page)||1,length:t.totalPages,"total-visible":10,circle:""},on:{input:t.page}})]},proxy:!0}])}),n("v-dialog",{attrs:{"max-width":"650"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[n("v-card",[n("v-card-title",[t._v("Assign to :-")]),n("v-card-text",[t.dialog?n(t.inputs.autocomplete,{tag:"component",staticClass:"mx-1",attrs:{label:"User",prependIcon:"mdi-account",collection:"user",itemText:"displayName",itemValue:"_id",outlined:"",rounded:"",dense:"","hide-details":""},model:{value:t.assign.user,callback:function(e){t.$set(t.assign,"user",e)},expression:"assign.user"}}):t._e()],1),n("v-divider"),n("v-card-actions",[n("v-btn",{attrs:{color:"green white--text"},on:{click:t.saveAssignTo}},[t._v(" Save ")]),n("v-btn",{on:{click:function(e){t.dialog=!1}}},[t._v("Cancel")])],1)],1)],1)],1)},i=[],o=(n("a15b"),n("ac1f"),n("5319"),n("841c"),n("1276"),n("96cf"),n("1da1")),r=n("5530"),s=n("fb57"),c=n("2f62"),l=n("b9b9"),u=n.n(l),d=n("8654"),m=n("b974"),p=n("b73d"),v=n("bb0b"),f=n("e94a"),g=n("9db7"),y=n("445d"),h=n("1157"),b=n.n(h),_={name:"Items",data:function(){return{dialog:!1,assign:{user:null,item:null},countries:y["a"],dateformat:u.a,collectionOptions:{},loading:!1,items:[],inputs:{text:d["a"],select:m["a"],switch:p["a"],date:f["a"],range:g["a"],autocomplete:v["a"]},totalPages:1}},computed:{filters:function(){return this.collectionOptions.filters},headers:function(){return this.collectionOptions.table},collection:function(){return this.$route.params.collection}},watch:{$route:{handler:"updateComponent",immediate:!0}},methods:Object(r["a"])(Object(r["a"])({},Object(c["b"])({get:"api/get",update:"api/update",remove:"api/remove"})),{},{saveAssignTo:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.update({collection:"deposit",data:{assign:t.assign.user||null},id:t.assign.item});case 2:return e.next=4,t.fetchData();case 4:t.dialog=!1,t.assign.user=null,t.assign.item=null;case 7:case"end":return e.stop()}}),e)})))()},hasAssignTo:function(t){if("deposit"==this.collection){var e="ftd"==t.department.type,n=!this.$store.state.auth.user.department;return e&&n}return!1},assignTo:function(t){this.dialog=!0,this.assign.user=t.assign,this.assign.item=t._id},importFile:function(){},fetchData:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.collection,console.log("Fetching data"),t.items=[],t.loading=!0,e.next=6,t.get({collection:n+window.location.search});case 6:a=e.sent,t.loading=!1,a&&200==a.status&&(t.items=a.data.docs,t.totalPages=a.data.totalPages);case 9:case"end":return e.stop()}}),e)})))()},updateComponent:function(){this.collectionOptions=s["default"].get(this.collection),this.collectionOptions?this.fetchData():this.$router.replace("./404")},page:function(t){var e=Object.assign({},this.$route.query);e.page=t;var n="/"+this.collection+"?"+b.a.param(e);console.log(n),this.$router.push(n)},tableOptions:function(t){console.log("table");var e=Object.assign({},this.$route.query);e["sortBy[]"]&&delete e["sortBy[]"],e["sortDesc[]"]&&delete e["sortDesc[]"],e.sortBy=t.sortBy,e.sortDesc=t.sortDesc;var n="/"+this.collection+"?"+b.a.param(e);this.$router.replace(n).catch((function(){}))},setFilterValue:function(t,e){return"created_on"==e&&t&&(t=t.split("|")),console.log(t),t},filter:function(t,e){"created_on"==t&&Array.isArray(e)&&(e=e.join("|"));var n=Object.assign({},this.$route.query);!e&&n[t]?delete n[t]:n[t]=e,n.page=1;var a="/"+this.collection+"?"+b.a.param(n);this.$router.replace(a),console.log(t,e)},editItem:function(t){this.$router.push("/"+this.$route.params.collection+"/"+t._id)},cloneItem:function(t){this.$router.push("/"+this.$route.params.collection+"/new?clone="+t._id)},deleteItem:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var a,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$confirm("Are you sure do you want to delete this item ?",{title:"Warning"});case 2:if(a=n.sent,!a){n.next=9;break}return e.loading=!0,n.next=7,e.remove({collection:e.$route.params.collection,id:t._id});case 7:i=n.sent,200===i.status&&(e.fetchData(),e.loading=!1,e.$store.commit("success","Item deleted successfuly"));case 9:case"end":return n.stop()}}),n)})))()}})},T=_,k=n("2877"),M=n("6544"),D=n.n(M),x=n("4ca6"),w=n("8336"),S=n("b0af"),C=n("99d9"),O=n("62ad"),$=n("a523"),N=n("8fea"),V=n("169a"),A=n("ce7e"),H=n("132d"),F=n("891e"),I=n("0fd9"),j=n("3129"),P=n("2fa4"),R=n("3a2f"),U=Object(k["a"])(T,a,i,!1,null,null,null);e["default"]=U.exports;D()(U,{VBadge:x["a"],VBtn:w["a"],VCard:S["a"],VCardActions:C["b"],VCardText:C["d"],VCardTitle:C["e"],VCol:O["a"],VContainer:$["a"],VDataTable:N["a"],VDialog:V["a"],VDivider:A["a"],VIcon:H["a"],VPagination:F["a"],VRow:I["a"],VSkeletonLoader:j["a"],VSpacer:P["a"],VTooltip:R["a"]})},"9db7":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,i=e.attrs;return[n("v-text-field",t._g(t._b({attrs:{prependInnerIcon:"mdi-calendar",rounded:"",outlined:"",dense:"",value:t.dateRangeText,label:"Date range",readonly:"",clearable:""},on:{"click:clear":t.clear}},"v-text-field",i,!1),a))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[n("v-date-picker",{attrs:{range:""},on:{input:t.input},model:{value:t.dates,callback:function(e){t.dates=e},expression:"dates"}})],1)},i=[],o=(n("a15b"),{name:"date-picker",props:{value:Array},data:function(){return{menu:!1,dates:[]}},methods:{input:function(t){t.length>1&&(this.menu=!1,this.$emit("input",t))},clear:function(){this.dates=[],this.$emit("input",[])}},computed:{dateRangeText:function(){return this.dates.join(" ~ ")}},created:function(){this.value&&(this.dates=this.value)}}),r=o,s=n("2877"),c=n("6544"),l=n.n(c),u=n("2e4b"),d=n("e449"),m=n("8654"),p=Object(s["a"])(r,a,i,!1,null,null,null);e["a"]=p.exports;l()(p,{VDatePicker:u["a"],VMenu:d["a"],VTextField:m["a"]})},b9b9:function(t,e,n){var a;(function(i){"use strict";var o=function(){var t=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|"[^"]*"|'[^']*'/g,e=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,n=/[^-+\dA-Z]/g;return function(a,i,u,d){if(1!==arguments.length||"string"!==l(a)||/\d/.test(a)||(i=a,a=void 0),a=a||new Date,a instanceof Date||(a=new Date(a)),isNaN(a))throw TypeError("Invalid date");i=String(o.masks[i]||i||o.masks["default"]);var m=i.slice(0,4);"UTC:"!==m&&"GMT:"!==m||(i=i.slice(4),u=!0,"GMT:"===m&&(d=!0));var p=u?"getUTC":"get",v=a[p+"Date"](),f=a[p+"Day"](),g=a[p+"Month"](),y=a[p+"FullYear"](),h=a[p+"Hours"](),b=a[p+"Minutes"](),_=a[p+"Seconds"](),T=a[p+"Milliseconds"](),k=u?0:a.getTimezoneOffset(),M=s(a),D=c(a),x={d:v,dd:r(v),ddd:o.i18n.dayNames[f],dddd:o.i18n.dayNames[f+7],m:g+1,mm:r(g+1),mmm:o.i18n.monthNames[g],mmmm:o.i18n.monthNames[g+12],yy:String(y).slice(2),yyyy:y,h:h%12||12,hh:r(h%12||12),H:h,HH:r(h),M:b,MM:r(b),s:_,ss:r(_),l:r(T,3),L:r(Math.round(T/10)),t:h<12?o.i18n.timeNames[0]:o.i18n.timeNames[1],tt:h<12?o.i18n.timeNames[2]:o.i18n.timeNames[3],T:h<12?o.i18n.timeNames[4]:o.i18n.timeNames[5],TT:h<12?o.i18n.timeNames[6]:o.i18n.timeNames[7],Z:d?"GMT":u?"UTC":(String(a).match(e)||[""]).pop().replace(n,""),o:(k>0?"-":"+")+r(100*Math.floor(Math.abs(k)/60)+Math.abs(k)%60,4),S:["th","st","nd","rd"][v%10>3?0:(v%100-v%10!=10)*v%10],W:M,N:D};return i.replace(t,(function(t){return t in x?x[t]:t.slice(1,t.length-1)}))}}();function r(t,e){t=String(t),e=e||2;while(t.length<e)t="0"+t;return t}function s(t){var e=new Date(t.getFullYear(),t.getMonth(),t.getDate());e.setDate(e.getDate()-(e.getDay()+6)%7+3);var n=new Date(e.getFullYear(),0,4);n.setDate(n.getDate()-(n.getDay()+6)%7+3);var a=e.getTimezoneOffset()-n.getTimezoneOffset();e.setHours(e.getHours()-a);var i=(e-n)/6048e5;return 1+Math.floor(i)}function c(t){var e=t.getDay();return 0===e&&(e=7),e}function l(t){return null===t?"null":void 0===t?"undefined":"object"!==typeof t?typeof t:Array.isArray(t)?"array":{}.toString.call(t).slice(8,-1).toLowerCase()}o.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},o.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],timeNames:["a","p","am","pm","A","P","AM","PM"]},a=function(){return o}.call(e,n,e,t),void 0===a||(t.exports=a)})()}}]);
//# sourceMappingURL=chunk-6974dbdf.e74e0518.js.map