(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c693520"],{"90c8":function(e,t,a){},ca47:function(e,t,a){"use strict";var n=a("90c8"),s=a.n(n);s.a},f0df:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-col",[e.found?a("v-card",{attrs:{flat:""}},[a("v-card-title",[e._v(" "+e._s(e.title)+" ")]),a("v-card-text",[e.tabs.length>1?a("v-tabs",{attrs:{"center-active":""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.tabs,(function(t,n){return a("v-tab",{key:n},[e._v(" "+e._s(t)+" ")])})),1):e._e(),a("v-form",{ref:"form",on:{submit:e.validate}},[e.loading?e._e():a("v-tabs-items",{attrs:{"center-active":""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.tabs,(function(t,n){return a("v-tab-item",{key:n,staticClass:"px-5"},e._l(e.filteredFields,(function(t,n){return a("v-row",{key:n},[e.loading?a("v-skeleton-loader",{attrs:{loading:e.loading,width:"100%",height:"50",type:"table-heading"}}):e._e(),a(e.inputs[t.input],e._g(e._b({ref:e.$route.params.collection+"_"+t.name,refInFor:!0,tag:"component",model:{value:e.data[t.name],callback:function(a){e.$set(e.data,t.name,a)},expression:"data[field.name]"}},"component",t.bind,!1),t.on))],1)})),1)})),1)],1)],1)],1):a("v-not-found"),a("br"),a("v-toolbar",{staticClass:"bottom-toolbar",attrs:{width:"100%"}},[!e.isNew&&e.updateAccess?a("v-btn",{staticClass:"mr-4",attrs:{color:"primary"},on:{click:e.validate}},[e._v(" Update ")]):e._e(),e.isNew&&e.writeAccess?a("v-btn",{staticClass:"mr-4",attrs:{color:"primary"},on:{click:e.validate}},[e._v(" Save ")]):e._e(),a("v-spacer"),!e.isNew&&"user"!==e.$route.params.collection&&e.deleteAccess?a("v-btn",{staticClass:"mr-4 white--text",attrs:{color:"red"},on:{click:e.removeItem}},[e._v(" Delete ")]):e._e(),a("v-btn",{staticClass:"mr-4",on:{click:function(t){return e.$router.go(-1)}}},[e._v(" Cancel ")])],1)],1)},s=[],i=(a("4de4"),a("4160"),a("d81d"),a("b0c0"),a("ac1f"),a("1276"),a("159b"),a("96cf"),a("1da1")),o=a("5530"),r=a("8654"),c=a("b974"),l=a("b73d"),u=a("bb0b"),d=a("1b5f"),m=a("e94a"),f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-input",[e._v("ss")])},p=[],v=a("2877"),h=a("6544"),b=a.n(h),w=a("b675"),x={},g=Object(v["a"])(x,f,p,!1,null,null,null),k=g.exports;b()(g,{VInput:w["a"]});var $=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("fieldset",{staticClass:"pa-3",staticStyle:{width:"100%"}},[a("legend",[e._v(e._s(e.$attrs.label))]),a("v-text-field",{attrs:{outlined:"",dense:"","append-icon":"mdi-plus"},on:{"click:append":e.add,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.add(t)}},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}}),e.items.length?a("v-expansion-panels",e._l(e.items,(function(t,n){return a("v-expansion-panel",{key:n},[a("v-expansion-panel-header",[a("v-row",{staticClass:"pa-0 ma-0",staticStyle:{width:"100%"}},[a("v-col",{staticClass:"pa-0 ma-0",attrs:{cols:"11"}},[a("h4",[a("v-icon",{domProps:{innerHTML:e._s(t.icon)}}),e._v(" "+e._s(t.name))],1)]),a("v-col",{staticClass:"pa-0 ma-0"},[n<e.items.length-1?a("v-btn",{attrs:{icon:"",small:""},on:{click:function(t){return t.stopPropagation(),e.moveDown(n)}}},[a("v-icon",{staticClass:"tomato"},[e._v("mdi-arrow-down-thick")])],1):e._e()],1),a("v-col",{staticClass:"pa-0 ma-0"},[n?a("v-btn",{attrs:{icon:"",small:""},on:{click:function(t){return t.stopPropagation(),e.moveUp(n)}}},[a("v-icon",{staticClass:"tomato"},[e._v("mdi-arrow-up-thick")])],1):e._e()],1)],1),a("v-spacer")],1),a("v-expansion-panel-content",[a("v-text-field",{attrs:{outlined:"",dense:"",label:"Name"},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"item.name"}}),a("v-text-field",{attrs:{outlined:"",dense:"",label:"Icon","append-icon":t.icon},model:{value:t.icon,callback:function(a){e.$set(t,"icon",a)},expression:"item.icon"}}),a("v-text-field",{attrs:{outlined:"",dense:"",label:"Path"},model:{value:t.path,callback:function(a){e.$set(t,"path",a)},expression:"item.path"}}),a("v-btn",{attrs:{icon:""},on:{click:function(t){return e.remove(n)}}},[a("v-icon",[e._v("mdi-delete ")])],1)],1)],1)})),1):a("v-sheet",{attrs:{color:"grey lighten-5 pa-6"}},[e._v("Menu list is empty!")])],1)},_=[],y=(a("a434"),{name:"MenuItemInput",props:{value:Array},data:function(){return{text:"",items:[]}},watch:{items:{handler:"input",deep:!0}},methods:{moveUp:function(e){this.move(this.items,e,e-1)},moveDown:function(e){this.move(this.items,e,e+1)},move:function(e,t,a){if(a>=e.length){var n=a-e.length+1;while(n--)e.push(void 0)}return e.splice(a,0,e.splice(t,1)[0]),e},input:function(){this.$emit("input",this.items)},remove:function(e){this.items.length&&(this.items=this.items.filter((function(t,a){return a!==e})))},add:function(){this.text&&this.items.push({name:this.text,icon:"mdi-home",path:"/"}),this.text=""}},created:function(){this.items=this.value}}),V=y,C=a("8336"),I=a("62ad"),E=a("cd55"),F=a("49e2"),O=a("c865"),T=a("0393"),j=a("132d"),A=a("0fd9"),N=a("8dd9"),P=a("2fa4"),R=Object(v["a"])(V,$,_,!1,null,null,null),D=R.exports;b()(R,{VBtn:C["a"],VCol:I["a"],VExpansionPanel:E["a"],VExpansionPanelContent:F["a"],VExpansionPanelHeader:O["a"],VExpansionPanels:T["a"],VIcon:j["a"],VRow:A["a"],VSheet:N["a"],VSpacer:P["a"],VTextField:r["a"]});var S=a("d6a0"),B=a("2f62"),M=a("fb57"),U={name:"Item",data:function(){return{showFields:[],loading:!1,collection:null,tab:0,form:null,found:!0,title:"",data:{},inputs:{text:r["a"],select:c["a"],switch:l["a"],date:m["a"],autocomplete:u["a"],password:d["a"],rights:S["a"],icon:k,menu_item:D}}},computed:{filteredFields:function(){var e=this;return this.fields.filter((function(t,a){return e.showFields[e.tab][a]}))},tabs:function(){return this.form?this.form.map((function(e){return e.label})):[]},fields:function(){return this.form?this.form[this.tab].fields:[]},isNew:function(){return!this.$route.params.id},access:function(){var e=this;return this.$store.state.auth.user.rights?this.$store.state.auth.user.rights.filter((function(t){return t.collection==e.$route.params.collection})):[]},updateAccess:function(){return this.access.length>0&&this.access[0].update.value},writeAccess:function(){return this.access.length>0&&this.access[0].write.value},deleteAccess:function(){return this.access.length>0&&this.access[0].delete.value}},methods:Object(o["a"])(Object(o["a"])({},Object(B["b"])({getItem:"api/getById",save:"api/save",remove:"api/remove",update:"api/update",success:"success"})),{},{removeItem:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$confirm("Are you sure do you want to delete this item ?",{title:"Warning"});case 2:if(a=t.sent,!a){t.next=8;break}return t.next=6,e.remove({collection:e.$route.params.collection,id:e.$route.params.id});case 6:e.$router.go(-1),e.$store.commit("success",e.title+" deleted successfuly");case 8:case"end":return t.stop()}}),t)})))()},generateDataInputs:function(e,t){var a=this,n={};e.forEach((function(e,s){a.showFields[s]=[],e.fields.forEach((function(e,i){if("function"==typeof e.if?a.showFields[s][i]=e.if(a.$store.state):a.showFields[s][i]=!0,"password"==e.name)return n[e.name]="";"date"==e.input&&t[e.name]&&(t[e.name]=t[e.name].split("T")[0]),n[e.name]="",t[e.name]?n[e.name]=t[e.name]:e.default&&("function"==typeof e.default&&console.log(e.default(a.$store.state)),n[e.name]="function"==typeof e.default?e.default(a.$store.state):e.default)}))})),this.data=n},validate:function(e){var t=arguments,a=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var s,i,o,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(s=t.length>1&&void 0!==t[1]&&t[1],e.preventDefault(),i=a.data,o=a.collection,r=a.title,!a.$refs.form.validate()){n.next=17;break}if(!a.isNew){n.next=10;break}return n.next=7,a.save({collection:o,data:i});case 7:n.t0=n.sent,n.next=13;break;case 10:return n.next=12,a.update({collection:o,data:i,id:a.$route.params.id});case 12:n.t0=n.sent;case 13:c=n.t0,c&&(a.$store.commit("success",r+(a.isNew?" saved":" updated")+" successfuly"),s?a.isNew?(console.log("new"),a.generateDataInputs(a.form,{}),a.$refs.form.resetValidation()):a.$router.push("/"+a.$route.params.collection+"/new"):a.$router.go(-1)),n.next=18;break;case 17:a.$store.commit("error","form not valid");case 18:case"end":return n.stop()}}),n)})))()}}),mounted:function(){window.$form=this},destroyed:function(){window.$form=null},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(e.$store.state.auth.user),a=M["default"].get(e.$route.params.collection),e.collection=e.$route.params.collection,!a){t.next=19;break}if(e.title=a.title,e.form=a.form,n={},!e.$route.params.id&&!e.$route.query.clone){t.next=16;break}return s=e.$route.params.id||e.$route.query.clone,e.loading=!0,t.next=12,e.getItem({collection:e.$route.params.collection,id:s});case 12:i=t.sent,n=i.data,console.log(i.data),e.loading=!1;case 16:e.generateDataInputs(e.form,n),t.next=20;break;case 19:e.found=!1;case 20:case"end":return t.stop()}}),t)})))()}},q=U,H=(a("ca47"),a("b0af")),J=a("99d9"),L=a("4bd4"),W=a("3129"),z=a("71a3"),G=a("c671"),K=a("fe57"),Q=a("aac8"),X=a("71d9"),Y=Object(v["a"])(q,n,s,!1,null,null,null);t["default"]=Y.exports;b()(Y,{VBtn:C["a"],VCard:H["a"],VCardText:J["d"],VCardTitle:J["e"],VCol:I["a"],VForm:L["a"],VRow:A["a"],VSkeletonLoader:W["a"],VSpacer:P["a"],VTab:z["a"],VTabItem:G["a"],VTabs:K["a"],VTabsItems:Q["a"],VToolbar:X["a"]})}}]);
//# sourceMappingURL=chunk-1c693520.0c96c8b4.js.map