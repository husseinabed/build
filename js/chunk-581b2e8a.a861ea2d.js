(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-581b2e8a"],{"1b5f":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-text-field",e._b({attrs:{value:e.value,autocomplete:"current-password","append-icon":e.show?"mdi-eye":"mdi-eye-off",type:e.show?"text":"password",counter:""},on:{input:function(t){return e.$emit("input",t)},"click:append":function(t){e.show=!e.show}}},"v-text-field",e.$attrs,!1))},r=[],i={name:"password",props:{value:String},data:function(){return{show:!1}}},s=i,o=a("2877"),c=a("6544"),l=a.n(c),u=a("8654"),d=Object(o["a"])(s,n,r,!1,null,null,null);t["a"]=d.exports;l()(d,{VTextField:u["a"]})},"90c8":function(e,t,a){},9320:function(e,t,a){},9894:function(e,t,a){"use strict";var n=a("9320"),r=a.n(n);r.a},b012:function(e,t){function a(e,t,a){var n,r,i,s,o;function c(){var l=Date.now()-s;l<t&&l>=0?n=setTimeout(c,t-l):(n=null,a||(o=e.apply(i,r),i=r=null))}null==t&&(t=100);var l=function(){i=this,r=arguments,s=Date.now();var l=a&&!n;return n||(n=setTimeout(c,t)),l&&(o=e.apply(i,r),i=r=null),o};return l.clear=function(){n&&(clearTimeout(n),n=null)},l.flush=function(){n&&(o=e.apply(i,r),i=r=null,clearTimeout(n),n=null)},l}a.debounce=a,e.exports=a},bb0b:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"100%"}},[a("v-autocomplete",e._b({attrs:{value:e.value,"search-input":e.search,items:e.dataItems,loading:e.loading,clearable:"","return-object":""},on:{"update:searchInput":function(t){e.search=t},"update:search-input":function(t){e.search=t},input:e.emit},scopedSlots:e._u([!e.hideAddNew&&e.writeAccess?{key:"prepend-item",fn:function(){return[a("v-list-item",{on:{click:e.addNew}},[a("v-list-item-content",[a("v-list-item-title",{staticClass:"green--text"},[a("v-icon",{attrs:{color:"green"}},[e._v("mdi-plus")]),e._v(" Add New")],1)],1)],1)]},proxy:!0}:null],null,!0)},"v-autocomplete",e.$attrs,!1)),a("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("app-item",{attrs:{"collection-name":e.collection},on:{close:function(t){e.dialog=!1},save:e.newSave}})],1)],1)],1)},r=[],i=(a("4de4"),a("96cf"),a("1da1")),s=a("5530"),o=a("b012"),c=a.n(o),l=a("2f62"),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-col",{staticClass:"pa-0"},[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-btn",{attrs:{icon:"",dark:""},on:{click:function(t){return e.$emit("close")}}},[a("v-icon",[e._v("mdi-close")])],1),a("v-toolbar-title",[e._v(e._s(e.title))]),a("v-spacer"),e.writeAccess?a("v-toolbar-items",[a("v-btn",{attrs:{dark:"",text:""},on:{click:e.validate}},[e._v("Save")])],1):e._e()],1),e.found?a("v-card",{attrs:{flat:""}},[a("v-card-title",[e._v(" "+e._s(e.title)+" ")]),a("v-card-text",[e.tabs.length>1?a("v-tabs",{attrs:{"center-active":""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.tabs,(function(t,n){return a("v-tab",{key:n},[e._v(" "+e._s(t)+" ")])})),1):e._e(),a("v-form",{ref:"form"},[e.loading?e._e():a("v-tabs-items",{attrs:{"center-active":""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.tabs,(function(t,n){return a("v-tab-item",{key:n,staticClass:"px-5"},e._l(e.fields,(function(t,n){return a("v-row",{key:n},[a(e.inputs[t.input],e._g(e._b({ref:e.$route.params.collection+"_"+t.name,refInFor:!0,tag:"component",model:{value:e.data[t.name],callback:function(a){e.$set(e.data,t.name,a)},expression:"data[field.name]"}},"component",t.bind,!1),t.on))],1)})),1)})),1)],1)],1)],1):a("v-not-found")],1)},d=[],f=(a("4160"),a("d81d"),a("b0c0"),a("ac1f"),a("1276"),a("159b"),a("8654")),m=a("b974"),v=a("b73d"),p=a("1b5f"),h=a("e94a"),b=a("d6a0"),w=a("fb57"),g={name:"AppItem",props:{collectionName:String},data:function(){return{loading:!1,collection:null,tab:0,form:null,found:!0,title:"",data:{},inputs:{text:f["a"],select:m["a"],switch:v["a"],date:h["a"],autocomplete:G,password:p["a"],rights:b["a"]}}},computed:{tabs:function(){return this.form?this.form.map((function(e){return e.label})):[]},fields:function(){return this.form?this.form[this.tab].fields:[]},access:function(){var e=this;return this.$store.state.auth.user.rights?this.$store.state.auth.user.rights.filter((function(t){return t.value==e.collection})):[]},writeAccess:function(){return this.access.length>0&&this.access[0].write}},methods:Object(s["a"])(Object(s["a"])({},Object(l["b"])({save:"api/save",success:"success"})),{},{generateDataInputs:function(e,t){var a={},n={};e.forEach((function(e){e.fields.forEach((function(e){if("password"==e.name)return a[e.name]="";"date"==e.input&&t[e.name]&&(t[e.name]=t[e.name].split("T")[0]),a[e.name]=t[e.name]?t[e.name]:e.default||"","date"==e.input&&(n[e.name]=!1)}))})),this.data=a,this.menu=n},validate:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.data,n=e.collection,r=e.title,!e.$refs.form.validate()){t.next=12;break}return t.next=4,e.save({collection:n,data:a});case 4:if(i=t.sent,console.log(i),!i){t.next=10;break}return t.next=9,e.$store.commit("success",r+" saved successfuly");case 9:e.$emit("save",i.data);case 10:t.next=13;break;case 12:e.$store.commit("error","form not valid");case 13:case"end":return t.stop()}}),t)})))()}}),mounted:function(){window.$form=this},destroyed:function(){window.$form=null},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=w["default"].get(e.collectionName),e.collection=e.collectionName,a?(e.title=a.title,e.form=a.form,n={},e.generateDataInputs(e.form,n)):e.found=!1;case 3:case"end":return t.stop()}}),t)})))()}},x=g,$=(a("9894"),a("2877")),k=a("6544"),_=a.n(k),V=a("8336"),y=a("b0af"),I=a("99d9"),T=a("62ad"),C=a("4bd4"),R=a("132d"),j=a("0fd9"),O=a("2fa4"),S=a("71a3"),A=a("c671"),N=a("fe57"),D=a("aac8"),E=a("71d9"),F=a("2a7f"),B=Object($["a"])(x,u,d,!1,null,null,null),L=B.exports;_()(B,{VBtn:V["a"],VCard:y["a"],VCardText:I["d"],VCardTitle:I["e"],VCol:T["a"],VForm:C["a"],VIcon:R["a"],VRow:j["a"],VSpacer:O["a"],VTab:S["a"],VTabItem:A["a"],VTabs:N["a"],VTabsItems:D["a"],VToolbar:E["a"],VToolbarItems:F["b"],VToolbarTitle:F["c"]});var U={name:"autocomplete",components:{AppItem:L},props:{value:String,hideAddNew:Boolean,collection:{type:String}},data:function(){return{search:"",dataItems:[],loading:!1,dialog:!1}},computed:{access:function(){var e=this;return this.$store.state.auth.user.rights?this.$store.state.auth.user.rights.filter((function(t){return t.value==e.collection})):[]},writeAccess:function(){return this.access.length>0&&this.access[0].write}},methods:Object(s["a"])(Object(s["a"])({emit:function(e){this.$emit("input",e?e[this.$attrs.itemValue]:"")},addNew:function(){this.dialog=!0},newSave:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.dialog=!1,console.log(t.dataItems),t.dataItems.push(e),t.$emit("input",e[t.$attrs.itemValue]);case 4:case"end":return a.stop()}}),a)})))()}},Object(l["b"])({get:"api/get"})),{},{makeSearch:function(e,t){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a.loading=!0,n.next=3,a.get({collection:t,search:{name:e}});case 3:r=n.sent,a.dataItems=r.data.docs,a.loading=!1;case 6:case"end":return n.stop()}}),n)})))()}}),watch:{search:function(e){this.collection&&c()(this.makeSearch,500)(e,this.collection)}},created:function(){this.collection?this.makeSearch("",this.collection):this.$attrs.items&&(this.dataItems=this.$attrs.items)}},q=U,J=a("c6a6"),W=a("169a"),M=a("da13"),P=a("5d23"),z=Object($["a"])(q,n,r,!1,null,null,null),G=t["a"]=z.exports;_()(z,{VAutocomplete:J["a"],VCard:y["a"],VDialog:W["a"],VIcon:R["a"],VListItem:M["a"],VListItemContent:P["g"],VListItemTitle:P["k"]})},ca47:function(e,t,a){"use strict";var n=a("90c8"),r=a.n(n);r.a},d6a0:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{attrs:{flat:"",width:"100%"}},[a("v-card-text",{staticClass:"text-center"},[a("v-divider"),a("h2",{staticClass:"my-5"},[e._v(e._s(e.label))]),a("v-divider"),a("v-data-table",{attrs:{headers:e.headers,items:e.data,"hide-default-footer":""},scopedSlots:e._u([{key:"item.read",fn:function(t){var n=t.item;return[a("v-switch",{on:{change:function(t){return e.handelReadRight(t,n)}},model:{value:n.read,callback:function(t){e.$set(n,"read",t)},expression:"item.read"}})]}},{key:"item.write",fn:function(t){var n=t.item;return[a("v-switch",{model:{value:n.write,callback:function(t){e.$set(n,"write",t)},expression:"item.write"}})]}},{key:"item.update",fn:function(t){var n=t.item;return[a("v-switch",{model:{value:n.update,callback:function(t){e.$set(n,"update",t)},expression:"item.update"}})]}},{key:"item.delete",fn:function(t){var n=t.item;return[a("v-switch",{model:{value:n.delete,callback:function(t){e.$set(n,"delete",t)},expression:"item.delete"}})]}}])}),e._v("> ")],1)],1)},r=[],i=(a("4de4"),a("4160"),a("159b"),{name:"Rights",props:{label:String,value:{type:Array,default:function(){return[]}}},data:function(){return{headers:[{text:"Section",value:"section",width:"50%"},{text:"Read",value:"read"},{text:"Write",value:"write"},{text:"Update",value:"update"},{text:"Delete",value:"delete"}],data:[{section:"Sales",value:"sale",read:!0,write:!0,update:!0,delete:!0},{section:"Retention",value:"retention",read:!0,write:!0,update:!0,delete:!0},{section:"Payment Methods",value:"payment_method",read:!0,write:!0,update:!0,delete:!0},{section:"Affiliate",value:"affiliate",read:!0,write:!0,update:!0,delete:!0},{section:"Users",value:"user",read:!0,write:!0,update:!0,delete:!0},{section:"Roles",value:"role",read:!0,write:!0,update:!0,delete:!0}]}},methods:{handelReadRight:function(e,t){e||(t.write=!1,t.update=!1,t.delete=!1)}},watch:{data:{deep:!0,handler:function(e){this.$emit("input",e)}}},mounted:function(){var e=this;this.value.length<1&&this.$emit("input",this.data),console.log(this.value),this.value.forEach((function(t){var a=e.data.filter((function(e){return e.value==t.value}));a[0]&&Object.assign(a[0],t)}))}}),s=i,o=a("2877"),c=a("6544"),l=a.n(c),u=a("b0af"),d=a("99d9"),f=a("8fea"),m=a("ce7e"),v=a("b73d"),p=Object(o["a"])(s,n,r,!1,null,null,null);t["a"]=p.exports;l()(p,{VCard:u["a"],VCardText:d["d"],VDataTable:f["a"],VDivider:m["a"],VSwitch:v["a"]})},f0df:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-col",[e.found?a("v-card",{attrs:{flat:""}},[a("v-card-title",[e._v(" "+e._s(e.title)+" ")]),a("v-card-text",[e.tabs.length>1?a("v-tabs",{attrs:{"center-active":""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.tabs,(function(t,n){return a("v-tab",{key:n},[e._v(" "+e._s(t)+" ")])})),1):e._e(),a("v-form",{ref:"form"},[e.loading?e._e():a("v-tabs-items",{attrs:{"center-active":""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.tabs,(function(t,n){return a("v-tab-item",{key:n,staticClass:"px-5"},e._l(e.fields,(function(t,n){return a("v-row",{key:n},[a(e.inputs[t.input],e._g(e._b({ref:e.$route.params.collection+"_"+t.name,refInFor:!0,tag:"component",model:{value:e.data[t.name],callback:function(a){e.$set(e.data,t.name,a)},expression:"data[field.name]"}},"component",t.bind,!1),t.on))],1)})),1)})),1)],1)],1)],1):a("v-not-found"),a("br"),a("v-toolbar",{staticClass:"bottom-toolbar",attrs:{width:"100%"}},[!e.isNew&&e.updateAccess?a("v-btn",{staticClass:"mr-4",attrs:{color:"primary"},on:{click:e.validate}},[e._v(" Update ")]):e._e(),e.isNew&&e.writeAccess?a("v-btn",{staticClass:"mr-4",attrs:{color:"primary"},on:{click:e.validate}},[e._v(" Save ")]):e._e(),e.isNew?a("v-btn",{staticClass:"mr-4",attrs:{color:"success"},on:{click:function(t){return e.validate(t,!0)}}},[e._v(" Save and new ")]):e._e(),a("v-spacer"),!e.isNew&&"user"!==e.$route.params.collection&&e.deleteAccess?a("v-btn",{staticClass:"mr-4 white--text",attrs:{color:"red"},on:{click:e.removeItem}},[e._v(" Delete ")]):e._e(),a("v-btn",{staticClass:"mr-4",on:{click:function(t){return e.$router.push("/"+e.$route.params.collection)}}},[e._v(" Cancel ")])],1)],1)},r=[],i=(a("4de4"),a("4160"),a("d81d"),a("b0c0"),a("ac1f"),a("1276"),a("159b"),a("96cf"),a("1da1")),s=a("5530"),o=a("8654"),c=a("b974"),l=a("b73d"),u=a("bb0b"),d=a("1b5f"),f=a("e94a"),m=a("d6a0"),v=a("2f62"),p=a("fb57"),h={name:"Item",data:function(){return{loading:!1,collection:null,tab:0,form:null,found:!0,title:"",data:{},inputs:{text:o["a"],select:c["a"],switch:l["a"],date:f["a"],autocomplete:u["a"],password:d["a"],rights:m["a"]}}},computed:{tabs:function(){return this.form?this.form.map((function(e){return e.label})):[]},fields:function(){return this.form?this.form[this.tab].fields:[]},isNew:function(){return!this.$route.params.id},access:function(){var e=this;return this.$store.state.auth.user.rights?this.$store.state.auth.user.rights.filter((function(t){return t.value==e.$route.params.collection})):[]},updateAccess:function(){return this.access.length>0&&this.access[0].update},writeAccess:function(){return this.access.length>0&&this.access[0].write},deleteAccess:function(){return this.access.length>0&&this.access[0].delete}},methods:Object(s["a"])(Object(s["a"])({},Object(v["b"])({getItem:"api/getById",save:"api/save",remove:"api/remove",update:"api/update",success:"success"})),{},{removeItem:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$confirm("Are you sure do you want to delete this item ?",{title:"Warning"});case 2:if(a=t.sent,!a){t.next=8;break}return t.next=6,e.remove({collection:e.$route.params.collection,id:e.$route.params.id});case 6:e.$router.push("/"+e.$route.params.collection),e.$store.commit("success",e.title+" deleted successfuly");case 8:case"end":return t.stop()}}),t)})))()},generateDataInputs:function(e,t){var a={},n={};e.forEach((function(e){e.fields.forEach((function(e){if("password"==e.name)return a[e.name]="";"date"==e.input&&t[e.name]&&(t[e.name]=t[e.name].split("T")[0]),a[e.name]=t[e.name]?t[e.name]:e.default||"","date"==e.input&&(n[e.name]=!1)}))})),this.data=a,this.menu=n},validate:function(e){var t=arguments,a=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r,i,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.length>1&&void 0!==t[1]&&t[1],r=a.data,i=a.collection,s=a.title,!a.$refs.form.validate()){e.next=16;break}if(!a.isNew){e.next=9;break}return e.next=6,a.save({collection:i,data:r});case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,a.update({collection:i,data:r,id:a.$route.params.id});case 11:e.t0=e.sent;case 12:o=e.t0,o&&(a.$store.commit("success",s+(a.isNew?" saved":" updated")+" successfuly"),n?a.isNew?(console.log("new"),a.generateDataInputs(a.form,{}),a.$refs.form.resetValidation()):a.$router.push("/"+a.$route.params.collection+"/new"):a.$router.push("/"+a.$route.params.collection)),e.next=17;break;case 16:a.$store.commit("error","form not valid");case 17:case"end":return e.stop()}}),e)})))()}}),mounted:function(){window.$form=this},destroyed:function(){window.$form=null},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=p["default"].get(e.$route.params.collection),e.collection=e.$route.params.collection,!a){t.next=17;break}if(e.title=a.title,e.form=a.form,n={},!e.$route.params.id&&!e.$route.query.clone){t.next=14;break}return r=e.$route.params.id||e.$route.query.clone,e.loading=!0,t.next=11,e.getItem({collection:e.$route.params.collection,id:r});case 11:i=t.sent,n=i.data,e.loading=!1;case 14:e.generateDataInputs(e.form,n),t.next=18;break;case 17:e.found=!1;case 18:case"end":return t.stop()}}),t)})))()}},b=h,w=(a("ca47"),a("2877")),g=a("6544"),x=a.n(g),$=a("8336"),k=a("b0af"),_=a("99d9"),V=a("62ad"),y=a("4bd4"),I=a("0fd9"),T=a("2fa4"),C=a("71a3"),R=a("c671"),j=a("fe57"),O=a("aac8"),S=a("71d9"),A=Object(w["a"])(b,n,r,!1,null,null,null);t["default"]=A.exports;x()(A,{VBtn:$["a"],VCard:k["a"],VCardText:_["d"],VCardTitle:_["e"],VCol:V["a"],VForm:y["a"],VRow:I["a"],VSpacer:T["a"],VTab:C["a"],VTabItem:R["a"],VTabs:j["a"],VTabsItems:O["a"],VToolbar:S["a"]})}}]);
//# sourceMappingURL=chunk-581b2e8a.a861ea2d.js.map