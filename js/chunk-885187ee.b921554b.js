(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-885187ee"],{1991:function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("4de4"),core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("4160"),core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("c975"),core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_array_join__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("a15b"),core_js_modules_es_array_join__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_array_join__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("d81d"),core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("b0c0"),core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_number_constructor__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("a9e3"),core_js_modules_es_number_constructor__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_number_constructor__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_object_keys__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("b64b"),core_js_modules_es_object_keys__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_object_keys__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("ac1f"),core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("5319"),core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_es_string_search__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("841c"),core_js_modules_es_string_search__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_es_string_search__WEBPACK_IMPORTED_MODULE_10__),core_js_modules_es_string_split__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("1276"),core_js_modules_es_string_split__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_es_string_split__WEBPACK_IMPORTED_MODULE_11__),core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("159b"),core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_12__),regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("96cf"),regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_13__),C_projects_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("1da1"),_collections__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("fb57"),_components_DataTable__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("1fdb"),vuetify_lib__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("8654"),vuetify_lib__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("b974"),vuetify_lib__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("b73d"),_components_Autocomplete__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("bb0b"),_components_DatePicker__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("e94a"),_components_DateRange__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("9db7"),jquery__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("1157"),jquery__WEBPACK_IMPORTED_MODULE_23___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_23__),debounce__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("b012"),debounce__WEBPACK_IMPORTED_MODULE_24___default=__webpack_require__.n(debounce__WEBPACK_IMPORTED_MODULE_24__);__webpack_exports__["a"]={name:"Items",data:function(){return{dialog:{value:!1},loading:!1,serverItemsLength:0,items:[],selected:[],totals:[]}},components:{AppTable:_components_DataTable__WEBPACK_IMPORTED_MODULE_16__["a"]},computed:{inputs:function(){return{text:vuetify_lib__WEBPACK_IMPORTED_MODULE_17__["a"],select:vuetify_lib__WEBPACK_IMPORTED_MODULE_18__["a"],switch:vuetify_lib__WEBPACK_IMPORTED_MODULE_19__["a"],date:_components_DatePicker__WEBPACK_IMPORTED_MODULE_21__["a"],range:_components_DateRange__WEBPACK_IMPORTED_MODULE_22__["a"],autocomplete:_components_Autocomplete__WEBPACK_IMPORTED_MODULE_20__["a"]}},vm:function(){return this},collectionName:function(){return this.$route.params.collection},collection:function(){return _collections__WEBPACK_IMPORTED_MODULE_15__["default"].get(this.collectionName)},collectionItems:function(){return this.collection.items||{}},collectionButtons:function(){return this.collectionItems.buttons||!1},permissions:function(){var _=this;if(this.user){var e=this.user.rights,t=e.filter((function(e){return e.collection==_.collectionName}));return t[0]}return{}},filters:function(){var _=this;return!!this.collectionItems.filters&&this.collectionItems.filters.filter((function(e){return"function"!=typeof e.if||e.if(_.$store.state)}))},headers:function(){var _=this,e=this.permissions.fields,t=[];if(e){var o=[];Object.keys(e).forEach((function(_){e[_]&&o.push(atob(_))})),t=this.collectionItems.headers.filter((function(e){return-1!==o.indexOf(e.value)||"actions"==e.value&&(_.permissions.write.value||_.permissions.update.value||_.permissions.delete.value)}))}else t=this.collectionItems.headers;return t.filter((function(_){return!_.hide}))},footerProps:function(){var _=[5,10,20,50],e=Number(this.$route.query.limit);return isNaN(e)||-1!=_.indexOf(e)||_.push(e),{"items-per-page-options":_}},sortBy:function(){var _=this.$route.query;return _["sortBy[]"]?Array.isArray(_["sortBy[]"])?_["sortBy[]"]:[_["sortBy[]"]]:void 0},sortDesc:function sortDesc(){var query=this.$route.query;return query["sortDesc[]"]?Array.isArray(query["sortDesc[]"])?query["sortDesc[]"].map((function(e){return eval(e)})):[eval(query["sortDesc[]"])]:void 0}},watch:{"dialog.value":function(_){_||(this.dialog={value:_})},collectionName:function(){this.dialog={value:!1},this.selected=[],this.items=[],this.totals=[]},$route:{handler:"updateComponent",immediate:!0}},methods:{updateTable:function(_){var e=_.page,t=_.itemsPerPage,o=_.sortBy,r=_.sortDesc,a=Object.assign({},this.$route.query);a["sortBy[]"]&&delete a["sortBy[]"],a["sortDesc[]"]&&delete a["sortDesc[]"];var n=a.page<e;a.page=e,a.limit=t,o.length&&(a.sortBy=o),r.length&&(a.sortDesc=r);var s=this.$route.path+"?"+jquery__WEBPACK_IMPORTED_MODULE_23___default.a.param(a);jquery__WEBPACK_IMPORTED_MODULE_23___default.a.param(a)!=jquery__WEBPACK_IMPORTED_MODULE_23___default.a.param(this.$route.query)&&(n?this.$router.push(s):this.$router.replace(s))},updateComponent:function(){this.fetch()},fetch:function(){var _=this;return Object(C_projects_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_14__["a"])(regeneratorRuntime.mark((function e(){var t,o,r,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return _.loading=!0,e.next=3,_.get({collection:_.collectionName+window.location.search});case 3:if(t=e.sent,o=t.data,r=o.totalDocs,a=o.docs,_.items=a,_.serverItemsLength=r,!_.collection.items.total){e.next=13;break}return e.next=10,_.get({collection:_.collectionName+"/total"+window.location.search});case 10:n=e.sent,_.totals=n.data,console.log(_.totals);case 13:_.loading=!1;case 14:case"end":return e.stop()}}),e)})))()},setFilterValue:function(_,e){return"created_on"==e.name&&_&&(_=_.split("|")),"text"==e.input&&_&&(_=_.replace("~","")),_},filter:debounce__WEBPACK_IMPORTED_MODULE_24___default()((function(_,e){"created_on"==_.name&&Array.isArray(e)&&(e=e.join("|")),"text"==_.input&&(e="~"+e);var t=Object.assign({},this.$route.query);!e&&t[_.name]?delete t[_.name]:t[_.name]=e,t.page=1;var o=this.$route.path+"?"+jquery__WEBPACK_IMPORTED_MODULE_23___default.a.param(t);this.$router.replace(o)}),500)},created:function(){}}},"1fdb":function(_,e,t){"use strict";var o=function(){var _=this,e=_.$createElement,t=_._self._c||e;return t("v-data-table",_._g(_._b({scopedSlots:_._u([{key:"top",fn:function(e){return[_._t("top",null,null,e)]}},{key:"item",fn:function(e){var o=e.headers,r=e.item,a=e.isMobile,n=e.isSelected,s=e.select;return[t("tr",{class:{"v-data-table__mobile-table-row":a},on:{click:function(e){return _.$emit("click:row",r)}}},_._l(o,(function(e){var o;return t("td",{key:e.value,class:[{"v-data-table__mobile-row":a},{"v-data-table__divider":!a},(o={},o["text-"+(e.align||"start")]=!a,o)].concat(e.class),attrs:{width:a?null:e.width}},[a?t("div",{class:{"v-data-table__mobile-row__header":a}},[_._v(_._s(e.text))]):_._e(),"data-table-select"==e.value?t("div",{class:{"v-data-table__mobile-row__cell":a}},[t("VSimpleCheckbox",{staticClass:"v-data-table__checkbox",attrs:{ripple:!1,value:n},on:{input:s}})],1):"actions"==e.value?t("div",{class:{"v-data-table__mobile-row__cell":a}},_._l(e.buttons,(function(e,o){return t("v-tooltip",{key:o,attrs:{bottom:""},scopedSlots:_._u([{key:"activator",fn:function(o){var a=o.on,n=o.attrs;return[t("v-btn",_._g(_._b({attrs:{icon:""}},"v-btn","function"==typeof e.bind?e.bind(_.vm,r):e.bind,!1),"function"==typeof e.on?e.on(_.vm,r):e.on),[t("v-icon",_._g(_._b({attrs:{small:""}},"v-icon",n,!1),a),[_._v(" "+_._s(e.icon)+" ")])],1)]}}],null,!0)},[t("span",[_._v(_._s(e.title))])])})),1):e.component?t("div",{class:{"v-data-table__mobile-row__cell":a}},[t(e.component.is||e.component,_._g(_._b({tag:"component",attrs:{item:r,header:e}},"component","function"==typeof e.component?{}:"function"==typeof e.component.bind?e.component.bind(_.vm,r):e.component.bind||{},!1),"function"==typeof e.component.on?e.component.on(_.vm,r):e.component.on))],1):t("div",{class:{"v-data-table__mobile-row__cell":a},domProps:{innerHTML:_._s(_.$options.filters.dynamic(_.$getNestedValue(r,e.value),e.format,_.getFormatArgs(e.formatArgs,r)||[]))}})])})),0)]}}],null,!0)},"v-data-table",_.$attrs,!1),_.$listeners))},r=[],a={name:"data-table",computed:{vm:function(){return this}}},n=a,s=t("2877"),i=t("6544"),c=t.n(i),l=t("8336"),u=t("8fea"),d=t("132d"),p=t("9e88"),m=t("3a2f"),E=Object(s["a"])(n,o,r,!1,null,null,null);e["a"]=E.exports;c()(E,{VBtn:l["a"],VDataTable:u["a"],VIcon:d["a"],VSimpleCheckbox:p["a"],VTooltip:m["a"]})},"29ce":function(_,e,t){"use strict";t.r(e);var o=function(){var _=this,e=_.$createElement,t=_._self._c||e;return t("v-container",[t("h1",{staticClass:"headline my-4"},[t("v-icon",{attrs:{size:"30"}},[_._v(_._s(_.collection.icon))]),_._v(" "+_._s(_.collection.title)+" ")],1),_.collectionButtons?t("v-toolbar",{class:{"mb-6":!_.filters},attrs:{dense:_.$vuetify.breakpoint.xsOnly,flat:""}},[_._l(_.collectionButtons,(function(e,o){return[e.spacer?t("v-spacer",{key:o}):t("v-btn",_._g(_._b({key:o,staticClass:"mx-1",attrs:{small:_.$vuetify.breakpoint.xsOnly,outlined:""}},"v-btn","function"==typeof e.bind?e.bind(_.vm):e.bind,!1),"function"==typeof e.on?e.on(_.vm):e.on),[e.icon?t("v-icon",[_._v(_._s(e.icon))]):_._e(),_.$vuetify.breakpoint.xsOnly?_._e():t("span",[_._v(" "+_._s(e.title)+" ")])],1)]}))],2):_._e(),_.filters?t("v-row",{staticClass:"white ma-0 mb-6 border-top"},_._l(_.filters,(function(e,o){return t("v-col",{key:o,attrs:{sm:"4"}},[t(_.inputs[e.input],_._g(_._b({ref:e.name,refInFor:!0,tag:"component",staticClass:"mx-1",attrs:{outlined:"",rounded:"",dense:"","hide-details":"",value:_.setFilterValue(_.$route.query[e.name]||null,e)},on:{input:function(t){return _.filter(e,t)}}},"component",e.bind,!1),e.on))],1)})),1):_._e(),_.collection.items.total?t("app-table",{staticClass:"mb-6",attrs:{"hide-default-footer":"","hide-default-header":_.$vuetify.breakpoint.xsOnly,items:_.totals,headers:_.collection.items.total.headers}}):_._e(),t("app-table",{ref:"table",attrs:{"server-items-length":_.serverItemsLength,page:Number(_.$route.query.page)||1,"items-per-page":Number(_.$route.query.limit)||10,"sort-by":_.sortBy,"sort-desc":_.sortDesc,loading:_.loading,headers:_.headers,items:_.items,"footer-props":_.footerProps,"item-key":"_id","multi-sort":"","show-select":""},on:{"update:options":_.updateTable},scopedSlots:_._u([{key:"top",fn:function(e){var o=e.pagination,r=e.options;return[t("v-row",{staticClass:"ma-0   border-top "},[_.selected.length?t("v-col",{staticClass:"pa-0",attrs:{cols:"12",md:"6"}},[t("v-alert",{staticClass:"ma-0"},[t("span",{staticClass:"font-weight-bold"},[_._v("("+_._s(_.selected.length)+") items has been selected")]),t("v-btn",{staticClass:"mx-1",attrs:{text:"",small:"",color:"info",outlined:""},on:{click:function(e){_.selected=[]}}},[_._v(" Unselect All")])],1)],1):_._e(),t("v-col",{staticClass:"pa-0",attrs:{cols:"12",md:_.selected.length?6:12}},[t("v-data-footer",{staticStyle:{"border-top":"0"},attrs:{"items-per-page-options":_.footerProps["items-per-page-options"],pagination:o,options:r},on:{"update:options":_.updateTable}})],1)],1)]}}]),model:{value:_.selected,callback:function(e){_.selected=e},expression:"selected"}}),t("v-dialog",_._g(_._b({model:{value:_.dialog.value,callback:function(e){_.$set(_.dialog,"value",e)},expression:"dialog.value"}},"v-dialog","function"==typeof _.dialog.bind?_.dialog.bind(_.vm):_.dialog.bind,!1),"function"==typeof _.dialog.on?_.dialog.on(_.vm):_.dialog.on),[_.dialog.component?t(_.dialog.component.is||_.dialog.component,_._g(_._b({tag:"component"},"component","function"==typeof _.dialog.component?{}:"function"==typeof _.dialog.component.bind?_.dialog.component.bind(_.vm):_.dialog.component.bind||{},!1),"function"==typeof _.dialog.component.on?_.dialog.component.on(_.vm):_.dialog.component.on)):_._e()],1)],1)},r=[],a=t("1991"),n=a["a"],s=(t("9dcf"),t("2877")),i=t("6544"),c=t.n(i),l=t("0798"),u=t("8336"),d=t("62ad"),p=t("a523"),m=t("f41f"),E=t("169a"),f=t("132d"),b=t("0fd9"),D=t("2fa4"),O=t("71d9"),P=Object(s["a"])(n,o,r,!1,null,"ec1a1628",null);e["default"]=P.exports;c()(P,{VAlert:l["a"],VBtn:u["a"],VCol:d["a"],VContainer:p["a"],VDataFooter:m["a"],VDialog:E["a"],VIcon:f["a"],VRow:b["a"],VSpacer:D["a"],VToolbar:O["a"]})},"3dc1":function(_,e,t){},"9db7":function(_,e,t){"use strict";var o=function(){var _=this,e=_.$createElement,t=_._self._c||e;return t("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","min-width":"290px"},scopedSlots:_._u([{key:"activator",fn:function(e){var o=e.on;return[t("v-text-field",_._g(_._b({attrs:{value:_.dateRangeText,readonly:"","hide-details":"",clearable:""},on:{"click:clear":_.clear}},"v-text-field",_.$attrs,!1),o))]}}]),model:{value:_.menu,callback:function(e){_.menu=e},expression:"menu"}},[t("v-date-picker",{attrs:{range:""},on:{input:_.input},model:{value:_.dates,callback:function(e){_.dates=e},expression:"dates"}})],1)},r=[],a=(t("a15b"),{name:"date-picker",props:{value:Array},data:function(){return{menu:!1,dates:[]}},methods:{input:function(_){_.length>1&&(this.menu=!1,this.$emit("input",_))},clear:function(){this.dates=[],this.$emit("input",[])}},computed:{dateRangeText:function(){return this.dates.join(" ~ ")}},created:function(){this.value&&(this.dates=this.value)}}),n=a,s=t("2877"),i=t("6544"),c=t.n(i),l=t("2e4b"),u=t("e449"),d=t("8654"),p=Object(s["a"])(n,o,r,!1,null,null,null);e["a"]=p.exports;c()(p,{VDatePicker:l["a"],VMenu:u["a"],VTextField:d["a"]})},"9dcf":function(_,e,t){"use strict";var o=t("3dc1"),r=t.n(o);r.a}}]);
//# sourceMappingURL=chunk-885187ee.b921554b.js.map