{"version":3,"sources":["webpack:///./src/views/Items.vue?1f58","webpack:///src/views/Items.vue","webpack:///./src/views/Items.vue?3464","webpack:///./src/views/Items.vue","webpack:///./src/views/Items.vue?6377"],"names":["render","_vm","this","_h","$createElement","_c","_self","readAccess","staticClass","attrs","_v","_s","icon","title","on","$event","$router","push","$route","params","collection","_e","loading","headers","items","pagination","limit","scopedSlots","_u","key","fn","ref","item","Intl","DateTimeFormat","format","Date","created_on","payment_method","name","type","NumberFormat","style","currency","amount","active","read","data","length","map","a","reduce","b","showItem","editItem","deleteItem","totalPages","changePage","model","value","callback","$$v","$set","expression","changeLimit","dialog","staticRenderFns","component","VBadge","VBtn","VCard","VCardText","VCardTitle","VCol","VDataTable","VDialog","VIcon","VPagination","VSelect","VSpacer","VToolbar"],"mappings":"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","file":"js/chunk-aa288dc4.329d10f3.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-col',[(!_vm.readAccess)?_c('v-col',[_c('v-card',{attrs:{\"width\":\"100%\"}},[_c('v-card-text',{staticClass:\"text-center pa-12\"},[_c('v-icon',{attrs:{\"size\":\"70\"}},[_vm._v(\"mdi-lock\")]),_c('h2',[_vm._v(\"Access Denied\")]),_c('p',[_vm._v(\" you dont have the right to view this content \")])],1)],1)],1):_c('v-col',{staticClass:\"pa-0 ma-0\"},[(_vm.found)?_c('v-toolbar',{attrs:{\"elevation\":\"1\"}},[_c('h2',{staticClass:\"mb-3\"},[_c('v-icon',{attrs:{\"size\":\"30\"}},[_vm._v(\" \"+_vm._s(this.icon)+\" \")]),_vm._v(\" \"+_vm._s(_vm.title))],1),_c('v-spacer'),(_vm.writeAccess)?_c('v-btn',{attrs:{\"color\":\"success\"},on:{\"click\":function($event){return _vm.$router.push('/'+_vm.$route.params.collection+'/new')}}},[_c('v-icon',[_vm._v(\"mdi-plus\")]),_vm._v(\" New \")],1):_vm._e()],1):_vm._e(),(_vm.found)?_c('v-data-table',{staticClass:\"my-5 elevation-1\",attrs:{\"loading\":_vm.loading,\"headers\":_vm.headers,\"items\":_vm.items,\"items-per-page\":_vm.pagination.limit,\"hide-default-footer\":\"\"},scopedSlots:_vm._u([{key:\"item.created_on\",fn:function(ref){\nvar item = ref.item;\nreturn [_vm._v(\" \"+_vm._s(new Intl.DateTimeFormat().format(new Date(item.created_on)))+\" \")]}},(_vm.hasAmount)?{key:\"item.payment_method\",fn:function(ref){\nvar item = ref.item;\nreturn [_vm._v(\" \"+_vm._s(item.payment_method.name)+\" (\"+_vm._s(item.payment_method.type)+\") \")]}}:null,(_vm.hasAmount)?{key:\"item.amount\",fn:function(ref){\nvar item = ref.item;\nreturn [_vm._v(\" \"+_vm._s(new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', }).format(item.amount))+\" \")]}}:null,{key:\"item.active\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-badge',{attrs:{\"color\":item.active ? 'green' : 'grey'}})]}},{key:\"item.read\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-badge',{attrs:{\"color\":item.read ? 'green' : 'grey'}})]}},(_vm.hasAmount)?{key:\"body.append\",fn:function(data){return [_c('tr',[_c('td',{staticClass:\"font-weight-bold\"},[_vm._v(\"Total Amount\")]),_c('td'),_c('td',{staticClass:\"font-weight-bold\"},[_vm._v(\" \"+_vm._s(new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', }) .format(data.items.length ? data.items.map(function (a) { return a.amount; } ) .reduce(function (a,b) { return a + b; }) : 0))+\" \")]),_c('td',{attrs:{\"colspan\":\"5\"}})])]}}:null,{key:\"item.actions\",fn:function(ref){\nvar item = ref.item;\nreturn [(_vm.readAccess)?_c('v-icon',{staticClass:\"mr-2\",attrs:{\"small\":\"\"},on:{\"click\":function($event){return _vm.showItem(item)}}},[_vm._v(\" mdi-eye \")]):_vm._e(),(_vm.updateAccess)?_c('v-icon',{staticClass:\"mr-2\",attrs:{\"small\":\"\"},on:{\"click\":function($event){return _vm.editItem(item)}}},[_vm._v(\" mdi-pencil \")]):_vm._e(),(_vm.deleteAccess)?_c('v-icon',{attrs:{\"small\":\"\"},on:{\"click\":function($event){return _vm.deleteItem(item)}}},[_vm._v(\" mdi-delete \")]):_vm._e()]}}],null,true)}):_c('v-not-found'),(_vm.found)?_c('v-toolbar',{attrs:{\"short\":\"\",\"elevation\":\"1\"}},[_c('v-pagination',{staticClass:\"my-4\",attrs:{\"length\":_vm.pagination.totalPages},on:{\"input\":_vm.changePage},model:{value:(_vm.pagination.page),callback:function ($$v) {_vm.$set(_vm.pagination, \"page\", $$v)},expression:\"pagination.page\"}}),_c('v-spacer'),_c('v-select',{attrs:{\"label\":\"Limit\",\"dense\":\"\",\"outlined\":\"\",\"hide-details\":\"\",\"items\":[5, 10, 15]},on:{\"input\":_vm.changeLimit},model:{value:(_vm.pagination.limit),callback:function ($$v) {_vm.$set(_vm.pagination, \"limit\", $$v)},expression:\"pagination.limit\"}})],1):_vm._e()],1),_c('v-dialog',{attrs:{\"persistent\":\"\",\"max-width\":\"600px\"},model:{value:(_vm.dialog),callback:function ($$v) {_vm.dialog=$$v},expression:\"dialog\"}},[_c('v-card',[_c('v-card-title',[_c('v-spacer'),_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){_vm.dialog = false}}},[_c('v-icon',[_vm._v(\"mdi-close\")])],1)],1),_c('v-card-text',[_vm._v(\" asdsaddd \")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\r\n\r\n<template>\r\n  <v-col>\r\n    <v-col v-if=\"!readAccess\">\r\n      <v-card width=\"100%\">\r\n         \r\n        <v-card-text class=\"text-center pa-12\">\r\n            <v-icon size=\"70\">mdi-lock</v-icon>  \r\n          <h2  >Access Denied</h2>\r\n          <p>\r\n            you dont have the right to view this content\r\n          </p>\r\n\r\n        </v-card-text>\r\n      \r\n      </v-card>\r\n    </v-col>\r\n    <v-col class=\"pa-0 ma-0\" v-else>\r\n \r\n      <v-toolbar   elevation=\"1\" v-if=\"found\">\r\n    \r\n      <h2 class=\"mb-3\" > <v-icon size=\"30\"  > {{ this.icon }} </v-icon> {{ title }}</h2>\r\n        <v-spacer></v-spacer>\r\n     \r\n        <v-btn v-if=\"writeAccess\" color=\"success\" @click=\"$router.push('/'+$route.params.collection+'/new')\">\r\n          <v-icon>mdi-plus</v-icon>\r\n          New\r\n        </v-btn>\r\n        <!-- <v-btn icon class=\"ml-3\" @click=\"filterOn = !filterOn\" :class=\"{\r\n          'grey ': filterOn,\r\n          'white--text':filterOn\r\n          }\">\r\n          <v-icon>mdi-filter</v-icon>\r\n        </v-btn> -->\r\n      </v-toolbar>\r\n      <!-- <v-toolbar   elevation=\"1\" v-if=\"filterOn\" height=\"200px\">\r\n        <template v-for=\"(field, ind) in filterFields\"   >\r\n          <component \r\n          :key=\"ind\" \r\n            :is=\"inputs[field.input]\" \r\n            v-bind=\"field.bind\"\r\n            v-on=\"field.on\"\r\n             \r\n             />\r\n        </template>\r\n      </v-toolbar> -->\r\n      \r\n    \r\n      <v-data-table v-if=\"found\"\r\n        :loading=\"loading\"\r\n        class=\"my-5 elevation-1\"\r\n        :headers=\"headers\"\r\n        :items=\"items\"\r\n        :items-per-page=\"pagination.limit\"\r\n        hide-default-footer\r\n     \r\n      >\r\n      \r\n      <template v-slot:item.created_on=\"{ item }\" v-if=\"hasAmount\">\r\n        {{ item.created_on.split('T')[0] }} \r\n      </template>\r\n      <template v-slot:item.payment_method=\"{ item }\" v-if=\"hasAmount\">\r\n          \r\n        {{ item.payment_method.name  }}  ({{ item.payment_method.type }})\r\n      </template>\r\n      <template v-slot:item.amount=\"{ item }\" v-if=\"hasAmount\">\r\n        {{  new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD',  }).format(item.amount) }}\r\n      </template>\r\n      <template v-slot:item.active=\"{ item }\" class=\"center-text text-center\"  >\r\n      <v-badge :color=\"item.active ? 'green' : 'grey'\"></v-badge>  \r\n      </template>\r\n      <template v-slot:item.read=\"{ item }\" class=\"center-text text-center\"  >\r\n      <v-badge :color=\"item.read ? 'green' : 'grey'\"></v-badge>  \r\n      </template>\r\n      <template v-slot:item.created_on=\"{ item }\"  >\r\n        {{ new Intl.DateTimeFormat().format(new Date(item.created_on)) }}\r\n      </template>\r\n      <template v-slot:body.append=\"data\" v-if=\"hasAmount\">\r\n          <tr>\r\n            <td class=\"font-weight-bold\">Total Amount</td>\r\n            <td></td>\r\n            <td class=\"font-weight-bold\" >\r\n              {{ \r\n                new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD',  })\r\n                .format(data.items.length ? data.items.map((a) => a.amount )\r\n                .reduce((a,b) => a + b) : 0)\r\n              }}\r\n            </td>\r\n            <td colspan=\"5\"></td>\r\n          </tr>\r\n      </template>\r\n      <template v-slot:item.actions=\"{ item }\">\r\n        <v-icon\r\n          small\r\n          v-if=\"readAccess\"\r\n          class=\"mr-2\"\r\n          @click=\"showItem(item)\"\r\n        >\r\n          mdi-eye\r\n        </v-icon>\r\n        <v-icon\r\n          small\r\n          v-if=\"updateAccess\"\r\n          class=\"mr-2\"\r\n          @click=\"editItem(item)\"\r\n        >\r\n          mdi-pencil\r\n        </v-icon>\r\n        <v-icon\r\n          small\r\n          v-if=\"deleteAccess\"\r\n          @click=\"deleteItem(item)\"\r\n        >\r\n          mdi-delete\r\n        </v-icon>\r\n      </template>\r\n      </v-data-table>\r\n      <v-not-found v-else />\r\n      <v-toolbar  short  elevation=\"1\" v-if=\"found\">\r\n        <v-pagination\r\n          class=\"my-4\"\r\n          v-model=\"pagination.page\"\r\n          @input=\"changePage\"\r\n          :length=\"pagination.totalPages\"\r\n          \r\n        ></v-pagination>\r\n        <v-spacer></v-spacer>\r\n        <v-select\r\n          label=\"Limit\"\r\n          dense\r\n          outlined\r\n          hide-details\r\n          @input=\"changeLimit\"\r\n          v-model=\"pagination.limit\"\r\n          :items=\"[5, 10, 15]\"\r\n        >\r\n        </v-select>\r\n      </v-toolbar>\r\n    </v-col>\r\n    <v-dialog v-model=\"dialog\" persistent max-width=\"600px\">\r\n        <v-card>\r\n          <v-card-title>\r\n            \r\n            <v-spacer></v-spacer>\r\n            <v-btn icon @click=\"dialog = false\"><v-icon>mdi-close</v-icon></v-btn>\r\n          </v-card-title>\r\n          <v-card-text>\r\n                asdsaddd\r\n\r\n          </v-card-text>\r\n        </v-card>\r\n    </v-dialog>\r\n  </v-col>\r\n</template>\r\n\r\n<script>\r\n\r\nimport {mapActions } from 'vuex'\r\n import   {\r\n  VTextField,\r\n  VSelect,\r\n  VSwitch,\r\n  \r\n} from 'vuetify/lib'\r\nimport AppAutoComplete from './../components/Autocomplete'\r\nimport AppDatePicker from './../components/DatePicker'\r\nimport collections from '../collections'\r\nexport default {\r\n    data () {\r\n\r\n      return {\r\n        collection: collections.get(this.$route.params.collection),\r\n        filterOn: false,\r\n        dialog: false,\r\n        loading: false,\r\n        title: '',\r\n        icon: '',\r\n        found: true,\r\n        headers: [],\r\n        items: [],\r\n        pagination: {\r\n          page: 1,\r\n          limit: 5,\r\n          totalPages: 1\r\n        },\r\n        inputs: {\r\n          text: VTextField,\r\n          select: VSelect,\r\n          switch: VSwitch,\r\n          date: AppDatePicker,\r\n          autocomplete: AppAutoComplete,\r\n        }\r\n      }\r\n    },\r\n    computed:{\r\n      access () {\r\n        if (this.$store.state.auth.user.rights) {\r\n          return this.$store.state.auth.user.rights.filter(e => {\r\n              return e.value == this.$route.params.collection  \r\n          })\r\n        } \r\n        return []\r\n      },\r\n      writeAccess () {\r\n      \r\n        if (this.access.length > 0)\r\n          return this.access[0].write\r\n\r\n        return false \r\n      },\r\n      readAccess () {\r\n         if (this.access.length > 0)\r\n          return this.access[0].read\r\n\r\n        return false \r\n      },\r\n      updateAccess () {\r\n      \r\n        if (this.access.length > 0)\r\n          return this.access[0].update\r\n\r\n        return false \r\n      },\r\n      deleteAccess () {\r\n         if (this.access.length > 0)\r\n          return this.access[0].delete\r\n\r\n        return false \r\n      },\r\n      hasAmount () {\r\n        const arr = ['sales', 'retention']\r\n        return arr.indexOf(this.$route.params.collection) !== -1\r\n      },\r\n      filterFields () {\r\n        const { collection } = this\r\n        const filterFields = []\r\n        collection.table.forEach(e => {\r\n          collection.form.forEach(section => {\r\n            section.fields.forEach(field => {\r\n              if(e.value == field.name) filterFields.push(field);\r\n            })\r\n          })\r\n        })\r\n        return filterFields\r\n      }\r\n    },\r\n    watch: {\r\n      $route ( ) {\r\n       this.updateComponent()\r\n      }\r\n    },\r\n    methods: {\r\n      ...mapActions({\r\n        get: 'api/get',\r\n        remove: 'api/remove'\r\n      }),\r\n    \r\n      async fetch (query = {}) {\r\n        const defaults = {\r\n            page: this.pagination.page,\r\n            limit: this.pagination.limit\r\n        }\r\n        query = Object.assign(defaults, query)\r\n       \r\n        this.loading = true\r\n        const res = await this.get({ collection: this.$route.params.collection, query}) \r\n        console.log(res)\r\n        if (res && res.status === 200) {\r\n          this.items = res.data.docs\r\n          this.pagination.totalPages = res.data.totalPages\r\n        }\r\n        \r\n        this.loading = false\r\n      },\r\n      changePage (page) {\r\n          this.fetch({\r\n            page\r\n          })\r\n     \r\n      },\r\n      changeLimit (limit) {\r\n          this.fetch({\r\n            page: 1,\r\n            limit\r\n          })\r\n     \r\n      },\r\n      editItem (e) {\r\n        this.$router.push('/'+this.$route.params.collection+'/'+e._id)\r\n      },\r\n      showItem () {\r\n        this.dialog = true\r\n        // this.$router.push('/'+this.$route.params.collection+'/'+e._id)\r\n      },\r\n      async deleteItem (e) {\r\n        const res = await this.$confirm('Are you sure do you want to delete this item ?', { title: 'Warning' })\r\n        if (res) {\r\n            this.loading = true\r\n            const rm = await this.remove( { collection: this.$route.params.collection, id: e._id  } ) \r\n            if (rm.status === 200) {\r\n\r\n              this.fetch()\r\n              this.loading = false\r\n              this.$store.commit('success', 'Item deleted successfuly')\r\n            }\r\n\r\n\r\n        }\r\n      },\r\n      async updateComponent () {\r\n        const { collection } = this\r\n        \r\n        if (collection) {\r\n          this.title = collection.title\r\n          this.icon = collection.icon\r\n          this.headers = collection.table\r\n          await this.fetch()\r\n        } else {\r\n          this.found = false\r\n        }\r\n      }\r\n    },\r\n    async created () {\r\n      this.updateComponent()\r\n    }\r\n\r\n  }\r\n</script>\r\n<style scoped>\r\n.v-pagination {\r\n  justify-content: left;\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Items.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Items.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Items.vue?vue&type=template&id=3c621986&scoped=true&\"\nimport script from \"./Items.vue?vue&type=script&lang=js&\"\nexport * from \"./Items.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Items.vue?vue&type=style&index=0&id=3c621986&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3c621986\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBadge } from 'vuetify/lib/components/VBadge';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VDataTable } from 'vuetify/lib/components/VDataTable';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VPagination } from 'vuetify/lib/components/VPagination';\nimport { VSelect } from 'vuetify/lib/components/VSelect';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VToolbar } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VBadge,VBtn,VCard,VCardText,VCardTitle,VCol,VDataTable,VDialog,VIcon,VPagination,VSelect,VSpacer,VToolbar})\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Items.vue?vue&type=style&index=0&id=3c621986&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Items.vue?vue&type=style&index=0&id=3c621986&scoped=true&lang=css&\""],"sourceRoot":""}