(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-69751eb4"],{"762c":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-card",[a("v-card-text",{staticClass:"px-6"},[a("v-form",{ref:"form"},[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"5"}},[a("v-select",{attrs:{required:"",rules:[function(e){return!!e||"this field is required"}],rounded:"",outlined:"",dense:"",label:"Report",items:e.types,"item-text":"text","item-value":"value"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}})],1),a("v-col",{attrs:{cols:"12",sm:"7"}},[a("app-datepicker",{model:{value:e.dates,callback:function(t){e.dates=t},expression:"dates"}})],1),a("v-col",{attrs:{cols:"12",sm:"9"}},[a("app-autocomplete",e._b({attrs:{rounded:"",outlined:"",dense:""},model:{value:e.autocomplete.value,callback:function(t){e.$set(e.autocomplete,"value",t)},expression:"autocomplete.value"}},"app-autocomplete",e.autocomplete.bind,!1))],1),a("v-col",{attrs:{cols:"12",sm:"3"}},[a("v-btn",{attrs:{large:"",rounded:"",color:"green white--text",width:"100%"},on:{click:e.submit}},[e._v("Submit")])],1)],1)],1)],1)],1),a("v-data-table",{staticClass:"my-5 elevation-1",attrs:{headers:e.headers,"single-expand":e.singleExpand,expanded:e.expanded,"show-expand":"","item-key":"_id",items:e.items},on:{"update:expanded":function(t){e.expanded=t}},scopedSlots:e._u([{key:"item.amount",fn:function(t){var a=t.item;return[e._v(" "+e._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a.amount))+" ")]}},{key:"item.total.amount",fn:function(t){var a=t.item;return[e._v(" "+e._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a.total.amount))+" ")]}},{key:"item.count",fn:function(t){var a=t.item;return[e._v(" "+e._s(a.child.length)+" ")]}},{key:"item.deposits",fn:function(t){var a=t.item;return[e._v(" "+e._s(e.getDeposits(a.child))+" ")]}},{key:"item.created_on",fn:function(t){var a=t.item;return[e._v(" "+e._s(e.dateformat(new Date(a.created_on),"yyyy-mm-dd"))+" ")]}},{key:"expanded-item",fn:function(t){var n=t.headers,r=t.item;return[a("td",{staticClass:"pa-4",attrs:{colspan:n.length}},[a("v-data-table",{attrs:{headers:e.dataHeaders,items:r.child},on:{"click:row":function(t){return e.innerListClick(t,r)}},scopedSlots:e._u([{key:"item.amount",fn:function(t){var a=t.item;return[e._v(" "+e._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a.amount))+" ")]}},{key:"item.total.amount",fn:function(t){var a=t.item;return[e._v(" "+e._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a.total.amount))+" ")]}},{key:"item.created_on",fn:function(t){var a=t.item;return[e._v(" "+e._s(e.dateformat(new Date(a.created_on),"yyyy-mm-dd"))+" ")]}},{key:"item.count",fn:function(t){var a=t.item;return[e._v(" "+e._s(a.child.length)+" ")]}}],null,!0)})],1)]}}])}),a("v-dialog",{attrs:{scrollable:"","max-width":"960px"},model:{value:e.dialog.value,callback:function(t){e.$set(e.dialog,"value",t)},expression:"dialog.value"}},[a("v-card",[a("v-card-title",{domProps:{innerHTML:e._s(e.dialog.title)}}),a("v-divider"),a("v-card-text",{staticStyle:{height:"300px"}},[a("v-data-table",{attrs:{headers:e.dialog.headers,items:e.dialog.items},scopedSlots:e._u([{key:"item.amount",fn:function(t){var a=t.item;return[e._v(" "+e._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a.amount))+" ")]}},{key:"item.created_on",fn:function(t){var a=t.item;return[e._v(" "+e._s(e.dateformat(new Date(a.created_on),"yyyy-mm-dd"))+" ")]}}])})],1),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.dialog.value=!1}}},[e._v("Close")])],1)],1)],1)],1)},r=[],i=(a("99af"),a("a15b"),a("d81d"),a("13d5"),a("b0c0"),a("96cf"),a("1da1")),o=a("5530"),l=a("bb0b"),s=a("9db7"),u=a("2f62"),c=a("b9b9"),d=a.n(c),m=[{text:"TP Account",align:"start",value:"customer.tpc",width:"10%"},{text:"Account name",align:"start",value:"customer.name"},{text:"Affiliate",value:"affiliate.name"},{text:"FTD",value:"amount"},{text:"Deposits",value:"count"},{text:"Total",value:"total.amount"},{text:"Date",value:"created_on"}],v=[{text:"Affiliate",align:"start",value:"name"},{text:"FTDs",value:"count"},{text:"Deposits",value:"deposits"},{text:"Total",value:"total.amount"}],f=[{text:"Agent",align:"start",value:"user.displayName"},{text:"Deposits",value:"counts"},{text:"Total",value:"amount"}],p=[{text:"Date",value:"created_on"},{text:"Amount",value:"amount"},{text:"Payment Method",value:"payment_method.name"}],y=[{text:"TP Account",align:"start",value:"customer.tpc",width:"10%"},{text:"Account name",align:"start",value:"customer.name"},{text:"FTD",value:"amount"},{text:"Deposits",value:"count"},{text:"Total",value:"total.amount"},{text:"Date",value:"created_on"}],h=[{text:"TP Account",align:"start",value:"customer.tpc"},{text:"Account name",align:"start",value:"customer.name"},{text:"Affilaite",align:"start",value:"affiliate.name"},{text:"Amount",value:"amount"}];function g(e,t){var a=""+e;while(a.length<t)a="0"+a;return a}var b={name:"Report",components:{"app-autocomplete":l["a"],"app-datepicker":s["a"]},data:function(){var e=new Date;e.setHours(0,0,0,0);var t=["".concat(e.getFullYear(),"-").concat(g(e.getMonth()+1,2),"-01"),"".concat(e.getFullYear(),"-").concat(g(e.getMonth()+1,2),"-").concat(g(e.getDate(),2))];return{dateformat:d.a,dialog:{value:!1,headers:p,items:[],title:""},dataItems:[],dataHeaders:p,expanded:[],singleExpand:!0,items:[],headers:m,types:[{text:"By Lead",value:"lead"},{text:"By Affiliate",value:"affiliate"},{text:"By Agent",value:"agent"}],type:"lead",autocomplete:{value:"",bind:{collection:"customer",itemValue:"_id",itemText:"name",hideAddNew:!0,label:"Select a lead",searchFields:["name","tpc"]}},dates:t}},watch:{type:function(e){switch(this.items=[],this.autocomplete.value="",e){case"lead":this.autocomplete.bind.collection="customer",this.autocomplete.bind.itemText="name",this.autocomplete.bind.label="Select a lead",this.headers=m,this.dataHeaders=p;break;case"affiliate":this.autocomplete.bind.collection="affiliate",this.autocomplete.bind.itemText="name",this.autocomplete.bind.label="Select an affiliate",this.headers=v,this.dataHeaders=y;break;case"agent":this.autocomplete.bind.collection="user",this.autocomplete.bind.itemText="displayName",this.autocomplete.bind.label="Select an agent",this.headers=f,this.dataHeaders=h;break}}},methods:Object(o["a"])(Object(o["a"])({},Object(u["b"])({get:"api/get"})),{},{getDeposits:function(e){var t=e.map((function(e){return e.child.length}));return t.length?t.reduce((function(e,t){return e+t})):0},innerListClick:function(e,t){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("affiliate"==a.type&&(a.dialog.value=!0,a.dialog.items=e.child,a.dialog.title="( <small>".concat(e.customer.tpc,"</small> ) ").concat(e.customer.name)),"agent"!=a.type){n.next=9;break}return r=e._id._id,n.next=5,a.get({collection:"deposit",query:{created_on:a.dates.join("|"),customer:r,user:t._id._id,limit:1e3,sortBy:["created_on"],sortDesc:[!0]}});case 5:i=n.sent,a.dialog.value=!0,a.dialog.items=i.data.docs,a.dialog.title="( <small>".concat(e._id.tpc,"</small> ) ").concat(e._id.name);case 9:case"end":return n.stop()}}),n)})))()},submit:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$refs.form.validate()){t.next=17;break}t.t0=e.type,t.next="lead"===t.t0?4:"affiliate"===t.t0?6:"agent"===t.t0?8:10;break;case 4:return a="report",t.abrupt("break",10);case 6:return a="report/affiliate",t.abrupt("break",10);case 8:return a="report/agent",t.abrupt("break",10);case 10:return t.next=12,e.get({collection:a,query:{created_on:e.dates.join("|"),id:e.autocomplete.value||null}});case 12:n=t.sent,n&&(e.items=n.data),console.log(n),t.next=18;break;case 17:e.$store.commit("error","form not valid");case 18:case"end":return t.stop()}}),t)})))()}})},x=b,T=a("2877"),_=a("6544"),D=a.n(_),k=a("8336"),M=a("b0af"),w=a("99d9"),S=a("62ad"),N=a("a523"),A=a("8fea"),H=a("169a"),F=a("ce7e"),C=a("4bd4"),V=a("0fd9"),U=a("b974"),O=Object(T["a"])(x,n,r,!1,null,null,null);t["default"]=O.exports;D()(O,{VBtn:k["a"],VCard:M["a"],VCardActions:w["b"],VCardText:w["d"],VCardTitle:w["e"],VCol:S["a"],VContainer:N["a"],VDataTable:A["a"],VDialog:H["a"],VDivider:F["a"],VForm:C["a"],VRow:V["a"],VSelect:U["a"]})},"9db7":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-text-field",e._g(e._b({attrs:{rounded:"",outlined:"",dense:"",value:e.dateRangeText,label:"Date range",readonly:"",clearable:""},on:{"click:clear":e.clear}},"v-text-field",r,!1),n))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[a("v-date-picker",{attrs:{range:""},on:{input:e.input},model:{value:e.dates,callback:function(t){e.dates=t},expression:"dates"}})],1)},r=[],i=(a("a15b"),{name:"date-picker",props:{value:Array},data:function(){return{menu:!1,dates:[]}},methods:{input:function(e){e.length>1&&(this.menu=!1,this.$emit("input",e))},clear:function(){this.dates=[],this.$emit("input",[])}},computed:{dateRangeText:function(){return this.dates.join(" ~ ")}},created:function(){this.value&&(this.dates=this.value)}}),o=i,l=a("2877"),s=a("6544"),u=a.n(s),c=a("2e4b"),d=a("e449"),m=a("8654"),v=Object(l["a"])(o,n,r,!1,null,null,null);t["a"]=v.exports;u()(v,{VDatePicker:c["a"],VMenu:d["a"],VTextField:m["a"]})},b9b9:function(e,t,a){var n;(function(r){"use strict";var i=function(){var e=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|"[^"]*"|'[^']*'/g,t=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,a=/[^-+\dA-Z]/g;return function(n,r,c,d){if(1!==arguments.length||"string"!==u(n)||/\d/.test(n)||(r=n,n=void 0),n=n||new Date,n instanceof Date||(n=new Date(n)),isNaN(n))throw TypeError("Invalid date");r=String(i.masks[r]||r||i.masks["default"]);var m=r.slice(0,4);"UTC:"!==m&&"GMT:"!==m||(r=r.slice(4),c=!0,"GMT:"===m&&(d=!0));var v=c?"getUTC":"get",f=n[v+"Date"](),p=n[v+"Day"](),y=n[v+"Month"](),h=n[v+"FullYear"](),g=n[v+"Hours"](),b=n[v+"Minutes"](),x=n[v+"Seconds"](),T=n[v+"Milliseconds"](),_=c?0:n.getTimezoneOffset(),D=l(n),k=s(n),M={d:f,dd:o(f),ddd:i.i18n.dayNames[p],dddd:i.i18n.dayNames[p+7],m:y+1,mm:o(y+1),mmm:i.i18n.monthNames[y],mmmm:i.i18n.monthNames[y+12],yy:String(h).slice(2),yyyy:h,h:g%12||12,hh:o(g%12||12),H:g,HH:o(g),M:b,MM:o(b),s:x,ss:o(x),l:o(T,3),L:o(Math.round(T/10)),t:g<12?i.i18n.timeNames[0]:i.i18n.timeNames[1],tt:g<12?i.i18n.timeNames[2]:i.i18n.timeNames[3],T:g<12?i.i18n.timeNames[4]:i.i18n.timeNames[5],TT:g<12?i.i18n.timeNames[6]:i.i18n.timeNames[7],Z:d?"GMT":c?"UTC":(String(n).match(t)||[""]).pop().replace(a,""),o:(_>0?"-":"+")+o(100*Math.floor(Math.abs(_)/60)+Math.abs(_)%60,4),S:["th","st","nd","rd"][f%10>3?0:(f%100-f%10!=10)*f%10],W:D,N:k};return r.replace(e,(function(e){return e in M?M[e]:e.slice(1,e.length-1)}))}}();function o(e,t){e=String(e),t=t||2;while(e.length<t)e="0"+e;return e}function l(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);var a=new Date(t.getFullYear(),0,4);a.setDate(a.getDate()-(a.getDay()+6)%7+3);var n=t.getTimezoneOffset()-a.getTimezoneOffset();t.setHours(t.getHours()-n);var r=(t-a)/6048e5;return 1+Math.floor(r)}function s(e){var t=e.getDay();return 0===t&&(t=7),t}function u(e){return null===e?"null":void 0===e?"undefined":"object"!==typeof e?typeof e:Array.isArray(e)?"array":{}.toString.call(e).slice(8,-1).toLowerCase()}i.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},i.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],timeNames:["a","p","am","pm","A","P","AM","PM"]},n=function(){return i}.call(t,a,t,e),void 0===n||(e.exports=n)})()}}]);
//# sourceMappingURL=chunk-69751eb4.d8b94249.js.map