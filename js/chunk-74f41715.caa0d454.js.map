{"version":3,"sources":["webpack:///./src/views/ReportOld.vue?711e","webpack:///src/views/ReportOld.vue","webpack:///./src/views/ReportOld.vue?938b","webpack:///./src/views/ReportOld.vue","webpack:///./src/components/DateRange.vue?2663","webpack:///src/components/DateRange.vue","webpack:///./src/components/DateRange.vue?e9fd","webpack:///./src/components/DateRange.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","ref","attrs","v","types","model","value","callback","$$v","type","expression","dates","_b","autocomplete","$set","bind","on","submit","loading","headers","singleExpand","expanded","items","$event","scopedSlots","_u","key","fn","proxy","item","_s","Intl","NumberFormat","style","currency","format","amount","length","exLoading","dataHeaders","dataItems","innerListClick","DateTimeFormat","Date","created_on","dialog","domProps","title","staticStyle","staticRenderFns","pad","number","name","components","data","today","setHours","dataHeadersLeads","collection","itemValue","itemText","hideAddNew","label","searchFields","watch","leadHeaders","affiliateHeaders","dataHeadersAffiliate","agentsHeaders","dataHeadersAgent","methods","component","VBtn","VCard","VCardActions","VCardText","VCardTitle","VCol","VContainer","VDataTable","VDialog","VDivider","VForm","VIcon","VRow","VSelect","VSkeletonLoader","_g","dateRangeText","clear","menu","input","props","Array","e","$emit","computed","join","created","VDatePicker","VMenu","VTextField"],"mappings":"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","file":"js/chunk-74f41715.caa0d454.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',[_c('v-card',[_c('v-card-title',[_c('v-icon',{staticClass:\"mx-2\"},[_vm._v(\"mdi-file-chart\")]),_vm._v(\" Report\")],1),_c('v-card-text',{staticClass:\"px-6\"},[_c('v-form',{ref:\"form\"},[_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"5\"}},[_c('v-select',{attrs:{\"required\":\"\",\"rules\":[function (v) { return !!v || 'this field is required'; }],\"rounded\":\"\",\"outlined\":\"\",\"dense\":\"\",\"label\":\"Report\",\"items\":_vm.types,\"item-text\":\"text\",\"item-value\":\"value\"},model:{value:(_vm.type),callback:function ($$v) {_vm.type=$$v},expression:\"type\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"7\"}},[_c('app-datepicker',{model:{value:(_vm.dates),callback:function ($$v) {_vm.dates=$$v},expression:\"dates\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"9\"}},[_c('app-autocomplete',_vm._b({attrs:{\"rounded\":\"\",\"outlined\":\"\",\"dense\":\"\"},model:{value:(_vm.autocomplete.value),callback:function ($$v) {_vm.$set(_vm.autocomplete, \"value\", $$v)},expression:\"autocomplete.value\"}},'app-autocomplete',_vm.autocomplete.bind,false))],1),_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"3\"}},[_c('v-btn',{attrs:{\"large\":\"\",\"rounded\":\"\",\"color\":\"green white--text\",\"width\":\"100%\"},on:{\"click\":_vm.submit}},[_vm._v(\"Submit\")])],1)],1)],1)],1)],1),_c('v-data-table',{staticClass:\"my-5 elevation-1\",attrs:{\"loading\":_vm.loading,\"headers\":_vm.headers,\"single-expand\":_vm.singleExpand,\"expanded\":_vm.expanded,\"show-expand\":\"\",\"item-key\":\"_id._id\",\"items\":_vm.items},on:{\"update:expanded\":function($event){_vm.expanded=$event}},scopedSlots:_vm._u([{key:\"loading\",fn:function(){return [_c('v-skeleton-loader',{staticClass:\"mt-6\",attrs:{\"height\":\"94\",\"type\":\"list-item-three-line\"}})]},proxy:true},{key:\"item.amount\",fn:function(ref){\nvar item = ref.item;\nreturn [_vm._v(\" \"+_vm._s(new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', }).format(item.amount))+\" \")]}},{key:\"expanded-item\",fn:function(ref){\nvar headers = ref.headers;\nvar item = ref.item;\nreturn [_c('td',{staticClass:\"pa-4\",attrs:{\"colspan\":headers.length}},[_c('v-data-table',{attrs:{\"loading\":_vm.exLoading,\"headers\":_vm.dataHeaders,\"items\":_vm.dataItems},on:{\"click:row\":function($event){return _vm.innerListClick($event, item)}},scopedSlots:_vm._u([{key:\"item.amount\",fn:function(ref){\nvar item = ref.item;\nreturn [_vm._v(\" \"+_vm._s(new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', }).format(item.amount))+\" \")]}},{key:\"item.created_on\",fn:function(ref){\nvar item = ref.item;\nreturn [_vm._v(\" \"+_vm._s(new Intl.DateTimeFormat().format(new Date(item.created_on)))+\" \")]}},{key:\"loading\",fn:function(){return [_c('v-skeleton-loader',{staticClass:\"mt-6\",attrs:{\"height\":\"94\",\"type\":\"list-item-three-line\"}})]},proxy:true}],null,true)})],1)]}}])}),_c('v-dialog',{attrs:{\"scrollable\":\"\",\"max-width\":\"960px\"},model:{value:(_vm.dialog.value),callback:function ($$v) {_vm.$set(_vm.dialog, \"value\", $$v)},expression:\"dialog.value\"}},[_c('v-card',[_c('v-card-title',{domProps:{\"innerHTML\":_vm._s(_vm.dialog.title)}}),_c('v-divider'),_c('v-card-text',{staticStyle:{\"height\":\"300px\"}},[_c('v-data-table',{attrs:{\"headers\":_vm.dialog.headers,\"items\":_vm.dialog.items,\"loading\":_vm.dialog.loading},scopedSlots:_vm._u([{key:\"loading\",fn:function(){return [_c('v-skeleton-loader',{staticClass:\"mt-6\",attrs:{\"height\":\"94\",\"type\":\"list-item-three-line\"}})]},proxy:true},{key:\"item.amount\",fn:function(ref){\nvar item = ref.item;\nreturn [_vm._v(\" \"+_vm._s(new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', }).format(item.amount))+\" \")]}},{key:\"item.created_on\",fn:function(ref){\nvar item = ref.item;\nreturn [_vm._v(\" \"+_vm._s(new Intl.DateTimeFormat().format(new Date(item.created_on)))+\" \")]}}])})],1),_c('v-divider'),_c('v-card-actions',[_c('v-btn',{attrs:{\"color\":\"blue darken-1\",\"text\":\"\"},on:{\"click\":function($event){_vm.dialog.value = false}}},[_vm._v(\"Close\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n<v-container>\r\n \r\n  <v-card>\r\n    <v-card-title><v-icon class=\"mx-2\">mdi-file-chart</v-icon> Report</v-card-title>\r\n\r\n    <v-card-text class=\"px-6\">\r\n      <v-form ref=\"form\"> \r\n        <v-row>\r\n          <v-col cols=\"12\" sm=\"5\"  >\r\n              <v-select  required :rules=\"[v => !!v || 'this field is required']\" rounded outlined dense  label=\"Report\" v-model=\"type\" :items=\"types\" item-text=\"text\" item-value=\"value\"></v-select>\r\n          </v-col>\r\n          <v-col cols=\"12\" sm=\"7\"  >\r\n              <app-datepicker v-model=\"dates\"></app-datepicker>\r\n          </v-col>\r\n          <v-col cols=\"12\" sm=\"9\" >\r\n              <app-autocomplete  rounded outlined dense v-bind=\"autocomplete.bind\" v-model=\"autocomplete.value\"></app-autocomplete>\r\n          </v-col>\r\n          <v-col cols=\"12\" sm=\"3\" >\r\n              <v-btn large rounded color=\"green white--text\" width=\"100%\" @click=\"submit\">Submit</v-btn>\r\n          </v-col>\r\n        </v-row>\r\n      </v-form>\r\n    </v-card-text>\r\n  </v-card>\r\n   <v-data-table \r\n        class=\"my-5 elevation-1\"\r\n        :loading=\"loading\"\r\n        :headers=\"headers\"\r\n        :single-expand=\"singleExpand\"\r\n        :expanded.sync=\"expanded\"\r\n        show-expand\r\n        item-key=\"_id._id\"\r\n        :items=\"items\">\r\n             <template v-slot:loading   >\r\n            <v-skeleton-loader\r\n            class=\"mt-6\"\r\n            height=\"94\"\r\n            type=\"list-item-three-line\"\r\n          >\r\n          </v-skeleton-loader>\r\n        </template>\r\n    <template v-slot:item.amount=\"{ item }\" >\r\n        {{  new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD',  }).format(item.amount) }}  \r\n    </template>   \r\n    <template v-slot:expanded-item=\"{ headers, item }\">\r\n      <td :colspan=\"headers.length\" class=\"pa-4\">\r\n        <v-data-table :loading=\"exLoading\" :headers=\"dataHeaders\" :items=\"dataItems\" @click:row=\"innerListClick($event, item)\">\r\n          <template v-slot:item.amount=\"{ item }\" >\r\n              {{  new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD',  }).format(item.amount) }}  \r\n          </template>   \r\n          <template v-slot:item.created_on=\"{ item }\"  >\r\n            {{ new Intl.DateTimeFormat().format(new Date(item.created_on)) }}\r\n          </template>\r\n          <template v-slot:loading   >\r\n            <v-skeleton-loader\r\n            class=\"mt-6\"\r\n            height=\"94\"\r\n            type=\"list-item-three-line\"\r\n          >\r\n          </v-skeleton-loader>\r\n        </template>\r\n        </v-data-table>\r\n      </td>\r\n    </template> \r\n      \r\n  </v-data-table>\r\n  <v-dialog v-model=\"dialog.value\" scrollable max-width=\"960px\">\r\n      <v-card>\r\n        <v-card-title v-html=\"dialog.title\"></v-card-title>\r\n        <v-divider></v-divider>\r\n        <v-card-text style=\"height: 300px;\">\r\n          <v-data-table :headers=\"dialog.headers\" :items=\"dialog.items\" :loading=\"dialog.loading\"> \r\n            <template v-slot:loading   >\r\n                <v-skeleton-loader\r\n                class=\"mt-6\"\r\n                height=\"94\"\r\n                type=\"list-item-three-line\"\r\n              >\r\n              </v-skeleton-loader>\r\n            </template>\r\n          <template v-slot:item.amount=\"{ item }\" >\r\n              {{  new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD',  }).format(item.amount) }}  \r\n          </template>   \r\n          <template v-slot:item.created_on=\"{ item }\"  >\r\n            {{ new Intl.DateTimeFormat().format(new Date(item.created_on)) }}\r\n          </template>\r\n          \r\n        </v-data-table>\r\n        </v-card-text>\r\n        <v-divider></v-divider>\r\n        <v-card-actions>\r\n          <v-btn color=\"blue darken-1\" text @click=\"dialog.value = false\">Close</v-btn>\r\n       \r\n        </v-card-actions>\r\n      </v-card>\r\n    </v-dialog>\r\n\r\n</v-container>\r\n\r\n \r\n</template>\r\n<script>\r\nimport AppAutoComplete from '../components/Autocomplete'\r\nimport AppDatePicker from '../components/DateRange'\r\nimport { mapActions } from 'vuex'\r\n \r\n\r\nconst leadHeaders = [\r\n          {\r\n            text: 'TP Account',\r\n            align: 'start',\r\n            value: '_id.tpc',\r\n        },\r\n        {\r\n          text: 'Account name',\r\n          align: 'start',\r\n          value: '_id.name',\r\n        },\r\n        { text: 'Affiliate', value: '_id.affiliate.name' },\r\n\r\n        { text: 'Deposits', value: 'count', width: '10%' },\r\n        { text: 'Total', value: 'amount' }]\r\n\r\nconst affiliateHeaders = [\r\n    \r\n        {\r\n          text: 'Affiliate',\r\n          align: 'start',\r\n          value: '_id.name',\r\n        },\r\n        { text: 'Deposits', value: 'count', width: '10%' },\r\n        { text: 'Total', value: 'amount' }]\r\nconst agentsHeaders = [\r\n    \r\n        {\r\n          text: 'Agent',\r\n          align: 'start',\r\n          value: '_id.displayName',\r\n        },\r\n        { text: 'Deposits', value: 'count', width: '10%' },\r\n        { text: 'Total', value: 'amount' }]\r\n\r\n\r\n\r\n\r\n// inner table\r\nconst dataHeadersLeads = [\r\n        { text: 'Department', value: 'department.name' },\r\n        { text: 'Date', value: 'created_on' },\r\n        { text: 'Amount', value: 'amount' },\r\n        { text: 'Payment Method', value: 'payment_method.name' }\r\n      ]\r\n\r\nconst dataHeadersAffiliate = [\r\n         {\r\n            text: 'TP Account',\r\n            align: 'start',\r\n            value: '_id.tpc',\r\n        },\r\n        {\r\n            text: 'Account name',\r\n            align: 'start',\r\n            value: '_id.name',\r\n        },\r\n        { text: 'Deposits', value: 'count', width: '10%' },\r\n        { text: 'Amount', value: 'amount' },\r\n      ]\r\nconst dataHeadersAgent = [\r\n         {\r\n            text: 'TP Account',\r\n            align: 'start',\r\n            value: '_id.tpc',\r\n        },\r\n        {\r\n            text: 'Account name',\r\n            align: 'start',\r\n            value: '_id.name',\r\n        },\r\n         {\r\n            text: 'Affilaite',\r\n            align: 'start',\r\n            value: '_id.affiliate.name',\r\n        },\r\n        { text: 'Deposits', value: 'count', width: '10%' },\r\n        { text: 'Amount', value: 'amount' },\r\n      ]\r\nfunction pad(number, length) {\r\n   \r\n    var str = '' + number;\r\n    while (str.length < length) {\r\n        str = '0' + str;\r\n    }\r\n\r\n    return str;\r\n\r\n}\r\nexport default {\r\n  name: 'Report',\r\n  components: {\r\n    'app-autocomplete': AppAutoComplete,\r\n    'app-datepicker': AppDatePicker\r\n  },\r\n  data() {\r\n    let today = new Date();\r\n    today.setHours(0, 0, 0, 0);\r\n    const dates = [`${today.getFullYear()}-${pad(today.getMonth()+1, 2)}-01`, `${today.getFullYear()}-${pad(today.getMonth()+1, 2)}-${pad(today.getDate(),2)}`]\r\n  \r\n    return {\r\n      loading: false,\r\n      exLoading: false,\r\n      dialog: {\r\n        value: false,\r\n        headers: dataHeadersLeads,\r\n        items: [],\r\n        title: '',\r\n        loading: false\r\n      },\r\n      dataItems: [],\r\n      dataHeaders: dataHeadersLeads,\r\n      expanded: [],\r\n      singleExpand: true,\r\n      items: [],\r\n      headers:leadHeaders,\r\n      types: [\r\n        { text: \"By Lead\", value: 'lead' },\r\n        { text: \"By Affiliate\", value: 'affiliate' },\r\n        { text: \"By Agent\", value: 'agent' }\r\n      ],\r\n      type: 'lead',\r\n      autocomplete: {\r\n        value: '',\r\n        bind: {\r\n          collection: 'customer',\r\n          itemValue: '_id',\r\n          itemText: 'name',\r\n          hideAddNew: true,\r\n          label: 'Select a lead',\r\n          searchFields: ['name', 'tpc']\r\n        }\r\n      },\r\n      dates \r\n    }\r\n  },\r\n  watch: {\r\n    async expanded (item) {\r\n      if(item.length) {\r\n        this.exLoading = true\r\n      switch (this.type) {\r\n        case 'lead': {\r\n          const retention = await this.get({ collection: 'department', query: { type: 'rtn' } })\r\n           \r\n          const res = await this.get({ collection: 'deposit', query: {\r\n            created_on: this.dates.join('|'),\r\n            department: retention.data.docs[0]._id,\r\n            customer: item[0]._id._id,\r\n            sortBy:['created_on'],\r\n            sortDesc: [true],\r\n            limit:999\r\n          }})\r\n          this.dataItems = res.data.docs\r\n          break;\r\n        }\r\n        case 'affiliate':{\r\n          const query = { \r\n            created_on: this.dates.join('|'),\r\n           'affiliate._id' :  item[0]._id._id\r\n          }\r\n          const result = await this.get({ collection: 'report_old/affiliate', query: { groupBy: 'customer._id', ...query, meta: {collection: 'customer'}, sortBy: ['customer.tpc', 'created_on'], sortDesc:[1, 1] } })\r\n          \r\n         \r\n          this.dataItems = result.data\r\n          break;\r\n        }\r\n        case 'agent':{\r\n           const query = { \r\n            created_on: this.dates.join('|'),\r\n           'user' : item[0]._id._id\r\n          }\r\n          const result = await this.get({ collection: 'report_old/agent', query: { groupBy: 'customer._id', ...query, meta: {collection: 'customer'}, sortBy: ['customer.affiliate.name', 'created_on'], sortDesc:[1, 1] } })\r\n          \r\n          console.log(result);\r\n          this.dataItems = result.data\r\n           \r\n          break;}\r\n      \r\n      \r\n      }\r\n        this.exLoading = false\r\n\r\n      }\r\n    },\r\n    type (type) {\r\n      this.items = []\r\n       this.autocomplete.value = ''\r\n      switch (type) {\r\n        case 'lead':\r\n          this.autocomplete.bind.collection = 'customer'\r\n          this.autocomplete.bind.itemText = 'name'\r\n          this.autocomplete.bind.label = 'Select a lead'\r\n          this.autocomplete.bind.searchFields = ['name', 'tpc']\r\n          this.headers = leadHeaders\r\n          this.dataHeaders = dataHeadersLeads\r\n          break;\r\n        case 'affiliate':\r\n          this.autocomplete.bind.collection = 'affiliate'\r\n          this.autocomplete.bind.itemText = 'name'\r\n          this.autocomplete.bind.label = 'Select an affiliate'\r\n          delete this.autocomplete.bind.searchFields \r\n          this.headers = affiliateHeaders\r\n          this.dataHeaders = dataHeadersAffiliate\r\n          break;\r\n        case 'agent':\r\n          this.autocomplete.bind.collection = 'user'\r\n          this.autocomplete.bind.itemText = 'displayName'\r\n          this.autocomplete.bind.label = 'Select an agent'\r\n          delete this.autocomplete.bind.searchFields \r\n          this.headers = agentsHeaders\r\n          this.dataHeaders = dataHeadersAgent\r\n\r\n          break;\r\n      \r\n      \r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions({\r\n      get: 'api/get'\r\n    }),\r\n    async innerListClick (item, parentItem) {\r\n      this.dialog.loading = true\r\n      const retention = await this.get({ collection: 'department', query: { type: 'rtn' } })\r\n\r\n      if (this.type == 'affiliate') {\r\n        const customerId = item._id._id\r\n        const res = await this.get({ collection: 'deposit', query: {\r\n            created_on: this.dates.join('|'),\r\n            customer: customerId,\r\n            limit: 1000,\r\n            department: retention.data.docs[0]._id,\r\n            sortBy:['created_on'],\r\n            sortDesc: [true]\r\n        }})\r\n        this.dialog.value = true\r\n        this.dialog.items = res.data.docs\r\n        this.dialog.title = `( <small>${ item._id.tpc }</small> ) ${item._id.name}`\r\n\r\n      }\r\n      if (this.type == 'agent') {\r\n        const customerId = item._id._id\r\n        const res = await this.get({ collection: 'deposit', query: {\r\n              \r\n            created_on: this.dates.join('|'),\r\n            customer: customerId,\r\n            user: parentItem._id._id,\r\n            department: retention.data.docs[0]._id,\r\n            limit: 1000,\r\n            sortBy:['created_on'],\r\n            sortDesc: [true]\r\n        }})\r\n        this.dialog.value = true\r\n        this.dialog.items = res.data.docs\r\n        this.dialog.title = `( <small>${ item._id.tpc }</small> ) ${item._id.name}`\r\n\r\n      }\r\n      this.dialog.loading = false\r\n\r\n    },\r\n    async submit () {\r\n      if (this.$refs.form.validate()) {\r\n        const { collection } = this.autocomplete.bind\r\n        const query = { \r\n          created_on: this.dates.join('|'),\r\n        }\r\n          let key;\r\n         switch (collection) {\r\n           case 'affiliate':\r\n             key = 'affiliate._id' \r\n             break;\r\n           case 'customer':\r\n             key = 'customer._id'\r\n   \r\n             break;\r\n           default:\r\n             key = collection\r\n   \r\n             break;\r\n        }\r\n         \r\n       if (this.autocomplete.value) {\r\n\r\n         query[key] = this.autocomplete.value\r\n\r\n       }\r\n       this.loading = true\r\n       const result = await this.get({ collection: 'report_old', query: { groupBy: '$'+key, meta: {collection}, ...query, sortBy: ['_id.tpc'], sortDesc:[1] } })\r\n      \r\n       this.items = result.data\r\n      \r\n       this.loading = false\r\n      \r\n\r\n      } else \r\n        this.$store.commit('error', 'form not valid')\r\n\r\n    }\r\n  }\r\n}\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ReportOld.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ReportOld.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ReportOld.vue?vue&type=template&id=8dcce3a6&\"\nimport script from \"./ReportOld.vue?vue&type=script&lang=js&\"\nexport * from \"./ReportOld.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDataTable } from 'vuetify/lib/components/VDataTable';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSelect } from 'vuetify/lib/components/VSelect';\nimport { VSkeletonLoader } from 'vuetify/lib/components/VSkeletonLoader';\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardText,VCardTitle,VCol,VContainer,VDataTable,VDialog,VDivider,VForm,VIcon,VRow,VSelect,VSkeletonLoader})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-menu',{ref:\"menu\",attrs:{\"close-on-content-click\":false,\"transition\":\"scale-transition\",\"min-width\":\"290px\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-text-field',_vm._g(_vm._b({attrs:{\"prependInnerIcon\":\"mdi-calendar\",\"rounded\":\"\",\"outlined\":\"\",\"dense\":\"\",\"value\":_vm.dateRangeText,\"label\":\"Date\",\"readonly\":\"\",\"hide-details\":\"\",\"clearable\":\"\"},on:{\"click:clear\":_vm.clear}},'v-text-field',attrs,false),on))]}}]),model:{value:(_vm.menu),callback:function ($$v) {_vm.menu=$$v},expression:\"menu\"}},[_c('v-date-picker',{attrs:{\"range\":\"\"},on:{\"input\":_vm.input},model:{value:(_vm.dates),callback:function ($$v) {_vm.dates=$$v},expression:\"dates\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n   <v-menu\r\n        ref=\"menu\"\r\n        v-model=\"menu\"\r\n        :close-on-content-click=\"false\"\r\n        \r\n        transition=\"scale-transition\"\r\n        min-width=\"290px\"\r\n      >\r\n    <template v-slot:activator=\"{ on, attrs }\"> \r\n      <v-text-field prependInnerIcon=\"mdi-calendar\" rounded outlined dense  :value=\"dateRangeText\" label=\"Date\" readonly hide-details v-bind=\"attrs\" v-on=\"on\" clearable @click:clear=\"clear\"></v-text-field>\r\n    </template>\r\n   \r\n   <v-date-picker v-model=\"dates\" range @input=\"input\"></v-date-picker>\r\n   </v-menu>\r\n</template>\r\n<script>\r\n \r\n// function pad(number, length) {\r\n   \r\n//     var str = '' + number;\r\n//     while (str.length < length) {\r\n//         str = '0' + str;\r\n//     }\r\n\r\n//     return str;\r\n\r\n// }\r\nexport default {\r\n  name: 'date-picker',\r\n  props: {\r\n    value: Array,\r\n  },\r\n  data() {\r\n    //  let today = new Date();\r\n    // today.setHours(0, 0, 0, 0);\r\n    // const dates = [`${today.getFullYear()}-${pad(today.getMonth()+1, 2)}-01`, `${today.getFullYear()}-${pad(today.getMonth()+1, 2)}-${pad(today.getDate(),2)}`]\r\n   \r\n    return {\r\n      menu: false,\r\n      dates:[]\r\n    }\r\n  },\r\n  methods: {\r\n    input(e ) {\r\n      if (e.length > 1) {\r\n         this.menu = false\r\n         this.$emit('input', e)\r\n      }\r\n    },\r\n    clear () {\r\n      this.dates = []\r\n      this.$emit('input', [])\r\n    }\r\n\r\n  },\r\n  computed: {\r\n    dateRangeText () {\r\n      return this.dates.join(' ~ ')\r\n    },\r\n     \r\n  },\r\n  created () {\r\n    if (this.value)\r\n      this.dates = this.value\r\n    // else\r\n    //    this.$emit('input', this.dates)\r\n  }\r\n \r\n}\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DateRange.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DateRange.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DateRange.vue?vue&type=template&id=3027d270&\"\nimport script from \"./DateRange.vue?vue&type=script&lang=js&\"\nexport * from \"./DateRange.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VDatePicker } from 'vuetify/lib/components/VDatePicker';\nimport { VMenu } from 'vuetify/lib/components/VMenu';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VDatePicker,VMenu,VTextField})\n"],"sourceRoot":""}