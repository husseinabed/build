(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-69889ddf"],{"9db7":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-text-field",e._g(e._b({attrs:{prependInnerIcon:"mdi-calendar",rounded:"",outlined:"",dense:"",value:e.dateRangeText,label:"Date",readonly:"","hide-details":"",clearable:""},on:{"click:clear":e.clear}},"v-text-field",r,!1),n))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[a("v-date-picker",{attrs:{range:""},on:{input:e.input},model:{value:e.dates,callback:function(t){e.dates=t},expression:"dates"}})],1)},r=[],o=(a("a15b"),{name:"date-picker",props:{value:Array},data:function(){return{menu:!1,dates:[]}},methods:{input:function(e){e.length>1&&(this.menu=!1,this.$emit("input",e))},clear:function(){this.dates=[],this.$emit("input",[])}},computed:{dateRangeText:function(){return this.dates.join(" ~ ")}},created:function(){this.value&&(this.dates=this.value)}}),i=o,s=a("2877"),l=a("6544"),c=a.n(l),u=a("2e4b"),d=a("e449"),m=a("8654"),v=Object(s["a"])(i,n,r,!1,null,null,null);t["a"]=v.exports;c()(v,{VDatePicker:u["a"],VMenu:d["a"],VTextField:m["a"]})},b1e1:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-card",{staticClass:"mt-2",attrs:{elevation:"1"}},[a("v-card-title",[a("v-icon",{staticClass:"mx-2"},[e._v(" mdi-file-chart ")]),a("v-toolbar-title",[e._v("Report")])],1),a("v-card-text",[e.gLoading?a("v-row",[a("v-col",{attrs:{cols:"12",sm:"7"}},[a("v-skeleton-loader",{attrs:{type:"card-heading"}})],1),a("v-col",{attrs:{cols:"12",sm:"5"}},[a("v-skeleton-loader",{attrs:{type:"card-heading"}})],1),a("v-col",{attrs:{cols:"12",sm:"5"}},[a("v-skeleton-loader",{attrs:{type:"card-heading"}})],1),a("v-col",{attrs:{cols:"12",sm:"7"}},[a("v-skeleton-loader",{attrs:{type:"card-heading"}})],1)],1):a("v-row",[a("v-col",{attrs:{cols:"12",sm:"7"}},[a("app-date-picker",{model:{value:e.dates,callback:function(t){e.dates=t},expression:"dates"}})],1),a("v-col",{attrs:{cols:"12",sm:"5"}},[a("app-auto-complete",{attrs:{hideAddNew:"",outlined:"","hide-details":"",rounded:"",dense:"",label:"Department",collection:"department",itemText:"name",itemValue:"_id"},model:{value:e.department,callback:function(t){e.department=t},expression:"department"}})],1),a("v-col",{attrs:{cols:"12",sm:"5"}},[a("v-select",{attrs:{label:"Report by",outlined:"","hide-details":"",rounded:"",dense:"",items:e.byItems},model:{value:e.by,callback:function(t){e.by=t},expression:"by"}})],1),a("v-col",{attrs:{cols:"12",sm:"7"}},[a("app-auto-complete",e._b({attrs:{hideAddNew:"",outlined:"","hide-details":"",rounded:"",dense:""},model:{value:e.autocomplete.value,callback:function(t){e.$set(e.autocomplete,"value",t)},expression:"autocomplete.value"}},"app-auto-complete",e.autocomplete.bind,!1))],1),a("v-col",{attrs:{cols:"12",sm:"3"}},[a("v-btn",{attrs:{large:"",rounded:"",color:"green white--text",width:"100%"},on:{click:e.submit}},[e._v("Submit")])],1)],1)],1)],1),a("v-card",{staticClass:"my-4",attrs:{elevation:"1"}},[a("v-data-table",{staticClass:"my-5 elevation-1",attrs:{loading:e.loading,headers:e.headers,"single-expand":!0,expanded:e.expanded,"show-expand":"","item-key":"_id",items:e.items},on:{"update:expanded":function(t){e.expanded=t}},scopedSlots:e._u([{key:"loading",fn:function(){return[a("v-skeleton-loader",{staticClass:"mt-6",attrs:{height:"94",type:"list-item-three-line"}})]},proxy:!0},{key:"item.amount",fn:function(t){var a=t.item;return[e._v(" "+e._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a.amount))+" ")]}},{key:"expanded-item",fn:function(t){var n=t.headers,r=t.item;return[a("td",{staticClass:"pa-4",attrs:{colspan:n.length}},[a("v-data-table",{attrs:{headers:e.dataHeaders,items:r.child},on:{"click:row":function(t){return e.innerListClick(t,r)}},scopedSlots:e._u([{key:"item.amount",fn:function(t){var a=t.item;return[e._v(" "+e._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a.amount))+" ")]}},{key:"item.created_on",fn:function(t){var a=t.item;return[e._v(" "+e._s(e.dateformat(new Date(a.created_on),"yyyy-mm-dd"))+" ")]}}],null,!0)})],1)]}}])})],1),a("v-dialog",{attrs:{"max-width":"960"},model:{value:e.dialog.value,callback:function(t){e.$set(e.dialog,"value",t)},expression:"dialog.value"}},[a("v-card",[a("v-card-title",[e._v(" "+e._s(e.dialog.title)+" "),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(t){e.dialog.value=!1}}},[a("v-icon",[e._v("mdi-close")])],1),a("v-card-text",[a("v-data-table",{attrs:{headers:e.dialog.headers,items:e.dialog.items},scopedSlots:e._u([{key:"item.amount",fn:function(t){var a=t.item;return[e._v(" "+e._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a.amount))+" ")]}},{key:"item.created_on",fn:function(t){var a=t.item;return[e._v(" "+e._s(e.dateformat(new Date(a.created_on),"yyyy-mm-dd"))+" ")]}}])})],1)],1)],1)],1)],1)},r=[],o=(a("99af"),a("a15b"),a("b0c0"),a("96cf"),a("1da1")),i=a("5530"),s=a("2909"),l={pad:function(e,t){var a=""+e;while(a.length<t)a="0"+a;return a},get today(){var e=new Date;return e.setHours(0,0,0,0),e},get first_day_of_the_month(){var e=new Date;return new Date(e.getFullYear(),e.getMonth(),1)},get currentDateRange(){var e=this.today,t=this.pad;return["".concat(e.getFullYear(),"-").concat(t(e.getMonth()+1,2),"-01"),"".concat(e.getFullYear(),"-").concat(t(e.getMonth()+1,2),"-").concat(t(e.getDate(),2))]}},c=a("bb0b"),u=a("9db7"),d=a("2f62"),m=a("b9b9"),v=a.n(m),p={customer:[{text:"TP Account",align:"start",value:"customer.tpc"},{text:"Account name",align:"start",value:"customer.name"},{text:"Deposits",value:"count"},{text:"Total",value:"amount"}],affiliate:[{text:"Affiliate",align:"start",value:"affiliate.name"},{text:"Deposits",value:"count"},{text:"Total",value:"amount"}],user:[{text:"Agent",align:"start",value:"user.displayName"},{text:"Deposits",value:"count"},{text:"Total",value:"amount"}]},y={customer:[{text:"Department",value:"department.name"},{text:"Date",value:"created_on"},{text:"Amount",value:"amount"},{text:"Owner",value:"user.displayName"}],affiliate:[{text:"TP Account",align:"start",value:"customer.tpc"},{text:"Account name",align:"start",value:"customer.name"},{text:"Deposits",value:"count"},{text:"Total",value:"amount"}],user:[{text:"TP Account",align:"start",value:"customer.tpc"},{text:"Account name",align:"start",value:"customer.name"},{text:"Deposits",value:"count"},{text:"Total",value:"amount"}]},f=[{text:"Customer",value:"customer"},{text:"Affiliate",value:"affiliate"},{text:"Agent",value:"user"}],g={customer:{label:"Customer",collection:"customer",itemText:"name",itemValue:"_id"},affiliate:{label:"Affiliate",collection:"affiliate",itemText:"name",itemValue:"_id"},user:{label:"Agent",collection:"user",itemText:"displayName",itemValue:"_id"}},h={name:"Report",components:{AppDatePicker:u["a"],AppAutoComplete:c["a"]},data:function(){return{dateformat:v.a,dates:Object(s["a"])(l.currentDateRange),department:"",byItems:f,by:"customer",autocomplete:{value:"",bind:g.customer},loading:!1,gLoading:!1,headers:p.customer,dataHeaders:y.customer,items:[],expanded:[],dialog:{value:!1,title:"",items:[],headers:y.customer}}},watch:{by:function(){this.autocomplete.value="",this.autocomplete.bind=g[this.by],this.headers=p[this.by],this.dataHeaders=y[this.by],this.items=[]}},methods:Object(i["a"])(Object(i["a"])({},Object(d["b"])({get:"api/get"})),{},{submit:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,e.items=[],e.expanded=[],t.next=5,e.get({collection:"report_new",query:{department:e.department||null,by:e.by,created_on:e.dates.join("|"),id:e.autocomplete.value||null}});case 5:a=t.sent,e.items=a.data,e.loading=!1,console.log(a);case 9:case"end":return t.stop()}}),t)})))()},innerListClick:function(e){"customer"!=this.by&&(this.dialog.value=!0,this.dialog.items=e.child,this.dialog.title="(".concat(e.customer.tpc,") ").concat(e.customer.name))}}),created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.gLoading=!0,t.next=3,e.get({collection:"department",query:{type:"rtn"}});case 3:a=t.sent,a&&200==a.status&&(e.department=a.data.docs[0]._id),e.gLoading=!1;case 6:case"end":return t.stop()}}),t)})))()}},b=h,x=a("2877"),T=a("6544"),D=a.n(T),M=a("8336"),_=a("b0af"),k=a("99d9"),w=a("62ad"),A=a("a523"),S=a("8fea"),N=a("169a"),C=a("132d"),H=a("0fd9"),V=a("b974"),F=a("3129"),O=a("2fa4"),R=a("2a7f"),U=Object(x["a"])(b,n,r,!1,null,null,null);t["default"]=U.exports;D()(U,{VBtn:M["a"],VCard:_["a"],VCardText:k["d"],VCardTitle:k["e"],VCol:w["a"],VContainer:A["a"],VDataTable:S["a"],VDialog:N["a"],VIcon:C["a"],VRow:H["a"],VSelect:V["a"],VSkeletonLoader:F["a"],VSpacer:O["a"],VToolbarTitle:R["c"]})},b9b9:function(e,t,a){var n;(function(r){"use strict";var o=function(){var e=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|"[^"]*"|'[^']*'/g,t=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,a=/[^-+\dA-Z]/g;return function(n,r,u,d){if(1!==arguments.length||"string"!==c(n)||/\d/.test(n)||(r=n,n=void 0),n=n||new Date,n instanceof Date||(n=new Date(n)),isNaN(n))throw TypeError("Invalid date");r=String(o.masks[r]||r||o.masks["default"]);var m=r.slice(0,4);"UTC:"!==m&&"GMT:"!==m||(r=r.slice(4),u=!0,"GMT:"===m&&(d=!0));var v=u?"getUTC":"get",p=n[v+"Date"](),y=n[v+"Day"](),f=n[v+"Month"](),g=n[v+"FullYear"](),h=n[v+"Hours"](),b=n[v+"Minutes"](),x=n[v+"Seconds"](),T=n[v+"Milliseconds"](),D=u?0:n.getTimezoneOffset(),M=s(n),_=l(n),k={d:p,dd:i(p),ddd:o.i18n.dayNames[y],dddd:o.i18n.dayNames[y+7],m:f+1,mm:i(f+1),mmm:o.i18n.monthNames[f],mmmm:o.i18n.monthNames[f+12],yy:String(g).slice(2),yyyy:g,h:h%12||12,hh:i(h%12||12),H:h,HH:i(h),M:b,MM:i(b),s:x,ss:i(x),l:i(T,3),L:i(Math.round(T/10)),t:h<12?o.i18n.timeNames[0]:o.i18n.timeNames[1],tt:h<12?o.i18n.timeNames[2]:o.i18n.timeNames[3],T:h<12?o.i18n.timeNames[4]:o.i18n.timeNames[5],TT:h<12?o.i18n.timeNames[6]:o.i18n.timeNames[7],Z:d?"GMT":u?"UTC":(String(n).match(t)||[""]).pop().replace(a,""),o:(D>0?"-":"+")+i(100*Math.floor(Math.abs(D)/60)+Math.abs(D)%60,4),S:["th","st","nd","rd"][p%10>3?0:(p%100-p%10!=10)*p%10],W:M,N:_};return r.replace(e,(function(e){return e in k?k[e]:e.slice(1,e.length-1)}))}}();function i(e,t){e=String(e),t=t||2;while(e.length<t)e="0"+e;return e}function s(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);var a=new Date(t.getFullYear(),0,4);a.setDate(a.getDate()-(a.getDay()+6)%7+3);var n=t.getTimezoneOffset()-a.getTimezoneOffset();t.setHours(t.getHours()-n);var r=(t-a)/6048e5;return 1+Math.floor(r)}function l(e){var t=e.getDay();return 0===t&&(t=7),t}function c(e){return null===e?"null":void 0===e?"undefined":"object"!==typeof e?typeof e:Array.isArray(e)?"array":{}.toString.call(e).slice(8,-1).toLowerCase()}o.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},o.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],timeNames:["a","p","am","pm","A","P","AM","PM"]},n=function(){return o}.call(t,a,t,e),void 0===n||(e.exports=n)})()}}]);
//# sourceMappingURL=chunk-69889ddf.a00d7455.js.map