(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1dc52829"],{"1f50":function(t,e,a){"use strict";var n=a("840e"),r=a.n(n);r.a},"45dd":function(t,e,a){"use strict";var n=a("a14c"),r=a.n(n);r.a},7277:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[t.isWakel?t._e():a("v-row",{staticClass:"mb-6"},[a("v-col",{attrs:{cols:"xs"==t.$vuetify.breakpoint.name?12:6}},[a("total-panel",{attrs:{title:"Today",count:t.totals.today.count,amount:t.totals.today.amount}})],1),a("v-col",{attrs:{cols:"xs"==t.$vuetify.breakpoint.name?12:6}},[a("total-panel",{attrs:{title:"This month",count:t.totals.month.count,amount:t.totals.month.amount}})],1)],1),t.isAdmin?a("v-row",t._l(t.businesses,(function(t){return a("total-sheet",{key:t._id,attrs:{title:t.name,id:t._id}})})),1):t._e(),t.isAgent?a("v-row",[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[t._v(" FTDs ")]),a("v-spacer")],1),a("v-data-table",{attrs:{headers:t.headers,items:t.ftds},on:{"click:row":function(e){return t.$router.push("/deposit/new?clone="+e._id+"&fields=customer&fields=payment_method")}},scopedSlots:t._u([{key:"item.created_on",fn:function(e){var a=e.item;return[t._v(" "+t._s(a.created_on.split("T")[0])+" ")]}},{key:"item.amount",fn:function(e){var a=e.item;return[t._v(" "+t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a.amount))+" ")]}}],null,!1,1898337705)})],1):t._e(),t.isAgent?a("v-divider",{staticClass:"my-6"}):t._e(),t.isAgent?a("v-row",[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[t._v(" Today deposits ")]),a("v-spacer"),a("v-btn",{attrs:{color:"green white--text mx-2"},on:{click:function(e){return t.$router.push("/deposit/new")}}},[a("v-icon",[t._v("mdi-plus")]),t._v(" New deposit")],1)],1),a("v-data-table",{attrs:{headers:t.headers,items:t.deposits},on:{"click:row":function(e){return t.$router.push("/deposit/"+e._id)}},scopedSlots:t._u([{key:"item.created_on",fn:function(e){var a=e.item;return[t._v(" "+t._s(a.created_on.split("T")[0])+" ")]}},{key:"item.amount",fn:function(e){var a=e.item;return[t._v(" "+t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a.amount))+" ")]}}],null,!1,1898337705)})],1):t._e(),t.isAgent?a("v-divider",{staticClass:"my-6"}):t._e(),t.isAgent?a("v-row",[a("v-data-table",{staticStyle:{width:"100%"},attrs:{headers:t.mheaders,items:t.mdeposits},on:{"click:row":t.goTo},scopedSlots:t._u([{key:"item._id.date",fn:function(e){var a=e.item;return[t._v(" "+t._s(a._id.date.split("T")[0])+" ")]}},{key:"item.amount",fn:function(e){var a=e.item;return[t._v(" "+t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a.amount))+" ")]}}],null,!1,1672155689)})],1):t._e(),t.isAffiliate?a("affiliate-deposits"):t._e(),t.isAffiliate?a("v-divider",{staticClass:"my-6"}):t._e(),t.isAffiliate?a("affiliate-upsales"):t._e(),t._l(t.wakels,(function(t){return a("v-row",{key:t._id},[a("wakel-transactions",{attrs:{wakel:t}})],1)}))],2)},r=[],o=(a("4de4"),a("96cf"),a("1da1")),s=a("5530"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{flat:"",color:"green white--text lighten-2",elevation:"1"}},[a("v-card-title",{staticClass:"pb-0"},[t._v(t._s(t.title))]),a("v-card-text",[a("v-row",[a("v-col",{staticClass:" white--text"},[a("small",[t._v("Deposits")]),a("h1",[t._v(t._s(t.count))])]),a("v-col",{staticClass:" white--text"},[a("small",[t._v("Total")]),a("h1",[t._v(t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t.amount)))])])],1)],1)],1)},c=[],l=(a("a9e3"),{name:"Panel",props:{title:String,count:Number,amount:Number}}),u=l,d=a("2877"),m=a("6544"),f=a.n(m),v=a("b0af"),h=a("99d9"),y=a("62ad"),p=a("0fd9"),_=Object(d["a"])(u,i,c,!1,null,null,null),g=_.exports;f()(_,{VCard:v["a"],VCardText:h["d"],VCardTitle:h["e"],VCol:y["a"],VRow:p["a"]});var b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-sheet",{staticClass:" mb-3 mx-3 ",attrs:{color:t.color,width:"100%",elevation:"2"}},[a("v-toolbar",{staticClass:"mb-3",attrs:{dense:"",flat:"",color:t.color}},[a("v-toolbar-title",{staticClass:"title "},[t._v(t._s(t.title))]),a("v-spacer")],1),a("v-row",{staticClass:"mx-1"},[t._l(t.departments,(function(e,n){return a("v-col",{key:n,staticClass:"mx-2 pa-0 px-2",attrs:{cols:"xs"==t.$vuetify.breakpoint.name?12:null}},[a("fieldset",{staticClass:"px-2 mb-2 fielset"},[a("legend",[t._v(t._s(e._id.name))]),a("v-row",[a("v-col",[a("small",[t._v("Deposits")]),a("h2",[t._v(t._s(e.count||0))])]),a("v-col",[a("small",[t._v("Total")]),a("h2",[t._v(t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e.amount||0)))])])],1)],1)])})),a("v-col",{staticClass:"mx-2 pa-0 px-2",attrs:{cols:"xs"==t.$vuetify.breakpoint.name?12:null}},[a("fieldset",{staticClass:"px-2 mb-2 fielset"},[a("legend",[t._v("Total today")]),a("v-row",[a("v-col",[a("small",[t._v("Deposits")]),a("h2",[t._v(t._s(t.todayTotal.count||0))])]),a("v-col",[a("small",[t._v("Total")]),a("h2",[t._v(t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t.todayTotal.amount||0)))])])],1)],1)]),a("v-col",{staticClass:"mx-2 pa-0 px-2",attrs:{cols:"xs"==t.$vuetify.breakpoint.name?12:null}},[a("fieldset",{staticClass:"px-2 mb-2 fielset"},[a("legend",[t._v("Total this month")]),a("v-row",[a("v-col",[a("small",[t._v("Deposits")]),a("h2",[t._v(t._s(t.monthTotal.count||0))])]),a("v-col",[a("small",[t._v("Total")]),a("h2",[t._v(t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t.monthTotal.amount||0)))])])],1)],1)])],2),a("v-row",[a("v-col",t._l(t.departmentsNames,(function(e,n){return a("v-btn",{key:n,staticClass:"mx-2",attrs:{outlined:""},on:{click:function(a){return t.table(e._id)}}},[t._v(t._s(e.name))])})),1)],1),a("v-dialog",{attrs:{"max-width":"950px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[t._v(" "+t._s(t.dialogTitle)+" "),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(e){t.dialog=!1}}},[a("v-icon",[t._v("mdi-close")])],1)],1),a("v-card-text",[t.dialog?a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.items,"multi-sort":""},on:{"click:row":t.goTo},scopedSlots:t._u([{key:"item.amount",fn:function(e){var a=e.item;return[t._v(" "+t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a.amount))+" ")]}}],null,!1,2157523568)}):t._e()],1)],1)],1)],1)},w=[],x=a("1157"),T=a.n(x),k=a("b9b9"),D=a.n(k),S=a("2f62"),M={name:"TotalSheet",props:{title:String,id:String,color:{type:String,default:"blue lighten-4"}},data:function(){return{dialog:!1,dialogTitle:"",items:[],headers:[{text:"Created By",align:"start",value:"_id.displayName"},{text:"Deals",value:"count"},{text:"Amount",value:"amount"}],selected:"month",departments:[],departmentsNames:[],todayTotal:{count:0,amount:0},monthTotal:{count:0,amount:0}}},methods:Object(s["a"])(Object(s["a"])({},Object(S["b"])({get:"api/get"})),{},{table:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log(e.id,t),a.next=3,e.get({collection:"dashboard/tables",query:{created_on:">="+D()(e.first_day_of_the_month,"yyyy-mm-dd"),business:e.id,department:t}});case 3:n=a.sent,e.items=n.data,console.log(n),e.dialog=!0;case 7:case"end":return a.stop()}}),a)})))()},goTo:function(t){var e={user:t._id._id,business:this.id,created_on:">="+D()(this.first_day_of_the_month,"yyyy-mm-dd"),sortBy:["created_on"],sortDesc:[!1]};this.$router.push("/deposit?"+T.a.param(e))}}),computed:{today:function(){var t=new Date;return t.setHours(0,0,0,0),t},first_day_of_the_month:function(){return new Date(this.today.getFullYear(),this.today.getMonth(),1)}},created:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.get({collection:"department"});case 2:return a=e.sent,a&&200==a.status&&(t.departmentsNames=a.data.docs),e.next=6,t.get({collection:"dashboard/business",query:{created_on:">="+D()(t.today,"yyyy-mm-dd"),business:t.id}});case 6:return n=e.sent,console.log(n),n&&200==n.status&&(t.departments=n.data.departmentsTotal,n.data.total[0]&&(t.todayTotal.count=n.data.total[0].count,t.todayTotal.amount=n.data.total[0].amount)),e.next=11,t.get({collection:"dashboard/total",query:{created_on:">="+D()(t.first_day_of_the_month,"yyyy-mm-dd"),business:t.id}});case 11:r=e.sent,r&&200==r.status&&r.data[0]&&(t.monthTotal.count=r.data[0].count,t.monthTotal.amount=r.data[0].amount);case 13:case"end":return e.stop()}}),e)})))()}},C=M,j=(a("1f50"),a("8336")),O=a("8fea"),N=a("169a"),U=a("132d"),V=a("8dd9"),A=a("2fa4"),R=a("71d9"),F=a("2a7f"),H=Object(d["a"])(C,b,w,!1,null,"bb3f286c",null),I=H.exports;f()(H,{VBtn:j["a"],VCard:v["a"],VCardText:h["d"],VCardTitle:h["e"],VCol:y["a"],VDataTable:O["a"],VDialog:N["a"],VIcon:U["a"],VRow:p["a"],VSheet:V["a"],VSpacer:A["a"],VToolbar:R["a"],VToolbarTitle:F["c"]});var $=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-data-table",{attrs:{loading:t.loading,"single-expand":!0,expanded:t.expanded,"show-expand":"","item-key":"_id._id",headers:t.headers,items:t.items},on:{"update:expanded":function(e){t.expanded=e}},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-icon",{staticClass:"mx-2",attrs:{size:"33"}},[t._v("mdi-bank-transfer-in")]),a("v-toolbar-title",[t._v("Deposits")]),a("v-spacer"),a("app-date-range",{attrs:{label:"Date","hide-details":""},model:{value:t.dates,callback:function(e){t.dates=e},expression:"dates"}})],1)]},proxy:!0},{key:"loading",fn:function(){return[a("v-skeleton-loader",{staticClass:"mt-6",attrs:{height:"94",type:"list-item-three-line"}})]},proxy:!0},{key:"item.amount",fn:function(e){var a=e.item;return[t._v(" "+t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a.amount))+" ")]}},{key:"expanded-item",fn:function(e){var n=e.headers;return[a("td",{staticClass:"pa-4",attrs:{colspan:n.length}},[a("v-data-table",{attrs:{headers:t.dataHeaders,items:t.dataItems,loading:t.exLoading},scopedSlots:t._u([{key:"loading",fn:function(){return[a("v-skeleton-loader",{staticClass:"mt-6",attrs:{height:"94",type:"list-item-three-line"}})]},proxy:!0},{key:"item.amount",fn:function(e){var a=e.item;return[t._v(" "+t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a.amount))+" ")]}},{key:"item.created_on",fn:function(e){var a=e.item;return[t._v(" "+t._s(t.dateformat(new Date(a.created_on),"yyyy-mm-dd"))+" ")]}}],null,!0)})],1)]}}])})},q=[],W=(a("99af"),a("a15b"),a("9db7"));function Y(t,e){var a=""+t;while(a.length<e)a="0"+a;return a}var P=[{text:"TPC",align:"start",value:"_id.tpc"},{text:"Account",value:"_id.name"},{text:"Deposits",value:"count",width:"30%"},{text:"Total",value:"amount"}],B=[{text:"Date",value:"created_on"},{text:"Amount",value:"amount"}],E={name:"AffiliateDeposits",components:{appDateRange:W["a"]},data:function(){var t=new Date;t.setHours(0,0,0,0);var e=["".concat(t.getFullYear(),"-").concat(Y(t.getMonth()+1,2),"-01"),"".concat(t.getFullYear(),"-").concat(Y(t.getMonth()+1,2),"-").concat(Y(t.getDate(),2))];return{dateformat:D.a,dates:e,expanded:[],dialog:!1,dialogTitle:"",loading:!1,headers:P,items:[],exLoading:!1,dataHeaders:B,dataItems:[]}},watch:{dates:function(){this.getDeposits()},expanded:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(console.log(t[0]),!t.length){a.next=10;break}return e.exLoading=!0,n=t[0]._id._id,a.next=6,e.get({collection:"deposit",query:{created_on:e.dates.join("|"),customer:n,limit:1e3,sortBy:["created_on"],sortDesc:[!0]}});case 6:r=a.sent,console.log(r),e.dataItems=r.data.docs,e.exLoading=!1;case 10:case"end":return a.stop()}}),a)})))()}},methods:Object(s["a"])(Object(s["a"])({},Object(S["b"])({get:"api/get"})),{},{getDeposits:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,a={created_on:t.dates.join("|"),"affiliate._id":t.$store.state.auth.user.affiliate},e.next=4,t.get({collection:"report_old/affiliate",query:Object(s["a"])(Object(s["a"])({groupBy:"customer._id"},a),{},{meta:{collection:"customer"},sortBy:["customer.tpc","created_on"],sortDesc:[1,1]})});case 4:n=e.sent,t.items=n.data,t.loading=!1;case 7:case"end":return e.stop()}}),e)})))()}}),computed:{today:function(){var t=new Date;return t.setHours(0,0,0,0),t},first_day_of_the_month:function(){return new Date(this.today.getFullYear(),this.today.getMonth(),1)}},created:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getDeposits();case 1:case"end":return e.stop()}}),e)})))()}},L=E,J=(a("c8be"),a("3129")),Z=Object(d["a"])(L,$,q,!1,null,"3cd0aebc",null),z=Z.exports;f()(Z,{VDataTable:O["a"],VIcon:U["a"],VSkeletonLoader:J["a"],VSpacer:A["a"],VToolbar:R["a"],VToolbarTitle:F["c"]});var G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-data-table",{attrs:{loading:t.loading,"single-expand":!0,expanded:t.expanded,"show-expand":"","item-key":"_id",headers:t.headers,items:t.items},on:{"update:expanded":function(e){t.expanded=e}},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-icon",{staticClass:"mx-2",attrs:{size:"25"}},[t._v("mdi-chart-line")]),a("v-toolbar-title",[t._v("Upsales")]),a("v-spacer"),a("app-date-range",{attrs:{label:"Date","hide-details":""},model:{value:t.dates,callback:function(e){t.dates=e},expression:"dates"}})],1)]},proxy:!0},{key:"loading",fn:function(){return[a("v-skeleton-loader",{staticClass:"mt-6",attrs:{height:"94",type:"list-item-three-line"}})]},proxy:!0},{key:"item.amount",fn:function(e){var a=e.item;return[t._v(" "+t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a.amount))+" ")]}},{key:"item.total.amount",fn:function(e){var a=e.item;return[t._v(" "+t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a.total.amount))+" ")]}},{key:"item.created_on",fn:function(e){var a=e.item;return[t._v(" "+t._s(t.dateformat(new Date(a.created_on),"yyyy-mm-dd"))+" ")]}},{key:"item.count",fn:function(e){var a=e.item;return[t._v(" "+t._s(a.child.length)+" ")]}},{key:"expanded-item",fn:function(e){var n=e.headers,r=e.item;return[a("td",{staticClass:"pa-4",attrs:{colspan:n.length}},[a("v-data-table",{attrs:{headers:t.dataHeaders,items:r.child},on:{"click:row":function(e){return t.innerListClick(e,r)}},scopedSlots:t._u([{key:"item.amount",fn:function(e){var a=e.item;return[t._v(" "+t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a.amount))+" ")]}},{key:"item.total.amount",fn:function(e){var a=e.item;return[t._v(" "+t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a.total.amount))+" ")]}},{key:"item.created_on",fn:function(e){var a=e.item;return[t._v(" "+t._s(t.dateformat(new Date(a.created_on),"yyyy-mm-dd"))+" ")]}},{key:"item.count",fn:function(e){var a=e.item;return[t._v(" "+t._s(a.child.length)+" ")]}}],null,!0)})],1)]}}])})},K=[];function Q(t,e){var a=""+t;while(a.length<e)a="0"+a;return a}var X={name:"AffiliateuUpsales",components:{appDateRange:W["a"]},data:function(){var t=new Date;t.setHours(0,0,0,0);var e=["".concat(t.getFullYear(),"-").concat(Q(t.getMonth()+1,2),"-01"),"".concat(t.getFullYear(),"-").concat(Q(t.getMonth()+1,2),"-").concat(Q(t.getDate(),2))];return{dateformat:D.a,dates:e,loading:!1,expanded:[],headers:[{text:"TP Account",align:"start",value:"customer.tpc",width:"10%"},{text:"Account name",align:"start",value:"customer.name"},{text:"FTD",value:"amount"},{text:"Deposits",value:"count"},{text:"Total",value:"total.amount"},{text:"Date",value:"created_on"}],items:[],dataHeaders:[{text:"Date",value:"created_on"},{text:"Amount",value:"amount"}]}},watch:{dates:function(){this.getUpsales()}},methods:Object(s["a"])(Object(s["a"])({},Object(S["b"])({get:"api/get"})),{},{getUpsales:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.get({collection:"report/affiliate",query:{created_on:t.dates.join("|"),id:t.$store.state.auth.user.affiliate}});case 3:a=e.sent,t.items=a.data[0].child,t.loading=!1;case 6:case"end":return e.stop()}}),e)})))()}}),created:function(){this.getUpsales()}},tt=X,et=Object(d["a"])(tt,G,K,!1,null,null,null),at=et.exports;f()(et,{VDataTable:O["a"],VIcon:U["a"],VSkeletonLoader:J["a"],VSpacer:A["a"],VToolbar:R["a"],VToolbarTitle:F["c"]});var nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-content",{staticClass:"ma-0 pa-0"},[a("v-sheet",{staticClass:"pa-3 my-5",attrs:{elevation:"1"}},[t._v(" "+t._s(t.wakel.displayName)+" "),a("v-simple-table",[a("thead",[a("tr",[a("th",[t._v("Subtotal SAR")]),a("th",[t._v("Withdraw SAR")]),a("th",[t._v("Total SAR")]),a("th",[t._v("Total USD")])])]),a("tbody",[a("tr",[a("td",[t._v(" "+t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"SAR"}).format(t.total&&t.total.subtotal&&t.total.subtotal[0]?t.total.subtotal[0].amount:0)))]),a("td",[t._v(" "+t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"SAR"}).format(t.total&&t.total.withdraw&&t.total.withdraw[0]?t.total.withdraw[0].amount:0)))]),a("td",[t._v(" "+t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"SAR"}).format(t.total?t.total.amount:0)))]),a("td",[t._v(" "+t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t.total?t.total.amount/3.9:0)))])])])])],1)],1)},rt=[],ot=a("fb57");function st(t,e){var a=""+t;while(a.length<e)a="0"+a;return a}var it={name:"WakelTransactions",props:{wakel:Object},data:function(){var t=new Date;t.setHours(0,0,0,0);var e=["".concat(t.getFullYear(),"-").concat(st(t.getMonth()+1,2),"-01"),"".concat(t.getFullYear(),"-").concat(st(t.getMonth()+1,2),"-").concat(st(t.getDate(),2))],a=ot["default"].get("transaction");return{dateformat:D.a,dates:e,wakels:[],loading:!1,headers:a.table.filter((function(t){return"actions"!==t.value})),items:[],total:{}}},watch:{dates:function(){this.getTrans()}},methods:Object(s["a"])(Object(s["a"])({},Object(S["b"])({get:"api/get"})),{},{getTotals:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,a={created_on:t.dates.join("|"),user:t.wakel._id},e.next=4,t.get({collection:"transaction/total",query:a});case 4:n=e.sent,n&&200==n.status&&(t.total=n.data[0],console.log(t.total)),t.loading=!1;case 7:case"end":return e.stop()}}),e)})))()}}),computed:{today:function(){var t=new Date;return t.setHours(0,0,0,0),t},first_day_of_the_month:function(){return new Date(this.today.getFullYear(),this.today.getMonth(),1)}},created:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getTotals();case 1:case"end":return e.stop()}}),e)})))()}},ct=it,lt=(a("45dd"),a("a75b")),ut=a("1f4f"),dt=Object(d["a"])(ct,nt,rt,!1,null,"344f8696",null),mt=dt.exports;f()(dt,{VContent:lt["a"],VSheet:V["a"],VSimpleTable:ut["a"]});var ft=ot["default"].get("deposit").table.filter((function(t){return"actions"!==t.value})),vt={name:"Dashboard",components:{TotalPanel:g,TotalSheet:I,AffiliateDeposits:z,AffiliateUpsales:at,WakelTransactions:mt},data:function(){return{totals:{today:{count:0,amount:0},month:{count:0,amount:0}},businesses:[],deposits:[],mdeposits:[],ftds:[],headers:ft,mheaders:[{text:"Date",align:"start",value:"_id.date",width:"30%"},{text:"Created By",align:"start",value:"_id.user.displayName",width:"30%"},{text:"Deposits",value:"count",width:"30%"},{text:"Total",value:"amount"}],wakels:[]}},computed:Object(s["a"])(Object(s["a"])({},Object(S["d"])({user:function(t){return t.auth.user}})),{},{isAdmin:function(){return!this.user.business&&!this.isAffiliate&&!this.isWakel},isAgent:function(){return!this.isAdmin&&!this.isAffiliate&&!this.isWakel},isAffiliate:function(){return this.user.affiliate},isWakel:function(){var t=this.user.rights.filter((function(t){return"transaction"==t.collection}));return!!t[0]&&"own"==t[0].read.allOwn},today:function(){var t=new Date;return t.setHours(0,0,0,0),t},first_day_of_the_month:function(){var t=new Date;return new Date(t.getFullYear(),t.getMonth(),1)}}),methods:Object(s["a"])(Object(s["a"])({},Object(S["b"])({get:"api/get"})),{},{goTo:function(t){var e={user:t._id.user._id,created_on:D()(t._id.date,"yyyy-mm-dd"),sortBy:["created_on"],sortDesc:[!1]};this.$router.push("/deposit?"+T.a.param(e))},getTotals:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.get({collection:"dashboard/total",query:{created_on:">="+t.today}});case 2:return a=e.sent,e.next=5,t.get({collection:"dashboard/total",query:{created_on:">="+t.first_day_of_the_month}});case 5:n=e.sent,a&&200==a.status&&a.data.length&&(t.totals.today.count=a.data[0].count,t.totals.today.amount=a.data[0].amount),n&&200==n.status&&n.data.length&&(t.totals.month.count=n.data[0].count,t.totals.month.amount=n.data[0].amount);case 8:case"end":return e.stop()}}),e)})))()},getDesksTotals:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.isAdmin){e.next=5;break}return e.next=3,t.get({collection:"business",query:{sortBy:["name"],sortDesc:[!0]}});case 3:a=e.sent,a&&200==a.status&&a.data.docs.length&&(t.businesses=a.data.docs);case 5:case"end":return e.stop()}}),e)})))()},getTodayDeposits:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.get({collection:"deposit",query:{created_on:">="+t.today}});case 2:a=e.sent,t.deposits=a.data.docs;case 4:case"end":return e.stop()}}),e)})))()},getMonthDeposits:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.get({collection:"dashboard/grouped",query:{created_on:">="+t.first_day_of_the_month}});case 2:a=e.sent,t.mdeposits=a.data;case 4:case"end":return e.stop()}}),e)})))()},getFTDs:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.get({collection:"dashboard/ftds",query:{created_on:">="+t.first_day_of_the_month,assign:t.user._id}});case 2:a=e.sent,t.ftds=a.data;case 4:case"end":return e.stop()}}),e)})))()},getWakels:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.isAdmin){e.next=5;break}return e.next=3,t.get({collection:"user",query:{role:"wakel"}});case 3:a=e.sent,t.wakels=a.data.docs;case 5:case"end":return e.stop()}}),e)})))()}}),created:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getTotals(),t.getDesksTotals(),t.getTodayDeposits(),t.getMonthDeposits(),t.getFTDs(),t.getWakels();case 6:case"end":return e.stop()}}),e)})))()}},ht=vt,yt=a("a523"),pt=a("ce7e"),_t=Object(d["a"])(ht,n,r,!1,null,null,null);e["default"]=_t.exports;f()(_t,{VBtn:j["a"],VCol:y["a"],VContainer:yt["a"],VDataTable:O["a"],VDivider:pt["a"],VIcon:U["a"],VRow:p["a"],VSpacer:A["a"],VToolbar:R["a"],VToolbarTitle:F["c"]})},"840e":function(t,e,a){},"9db7":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[a("v-text-field",t._g(t._b({attrs:{prependInnerIcon:"mdi-calendar",rounded:"",outlined:"",dense:"",value:t.dateRangeText,label:"Date",readonly:"","hide-details":"",clearable:""},on:{"click:clear":t.clear}},"v-text-field",r,!1),n))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[a("v-date-picker",{attrs:{range:""},on:{input:t.input},model:{value:t.dates,callback:function(e){t.dates=e},expression:"dates"}})],1)},r=[],o=(a("a15b"),{name:"date-picker",props:{value:Array},data:function(){return{menu:!1,dates:[]}},methods:{input:function(t){t.length>1&&(this.menu=!1,this.$emit("input",t))},clear:function(){this.dates=[],this.$emit("input",[])}},computed:{dateRangeText:function(){return this.dates.join(" ~ ")}},created:function(){this.value&&(this.dates=this.value)}}),s=o,i=a("2877"),c=a("6544"),l=a.n(c),u=a("2e4b"),d=a("e449"),m=a("8654"),f=Object(i["a"])(s,n,r,!1,null,null,null);e["a"]=f.exports;l()(f,{VDatePicker:u["a"],VMenu:d["a"],VTextField:m["a"]})},a14c:function(t,e,a){},b9b9:function(t,e,a){var n;(function(r){"use strict";var o=function(){var t=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|"[^"]*"|'[^']*'/g,e=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,a=/[^-+\dA-Z]/g;return function(n,r,u,d){if(1!==arguments.length||"string"!==l(n)||/\d/.test(n)||(r=n,n=void 0),n=n||new Date,n instanceof Date||(n=new Date(n)),isNaN(n))throw TypeError("Invalid date");r=String(o.masks[r]||r||o.masks["default"]);var m=r.slice(0,4);"UTC:"!==m&&"GMT:"!==m||(r=r.slice(4),u=!0,"GMT:"===m&&(d=!0));var f=u?"getUTC":"get",v=n[f+"Date"](),h=n[f+"Day"](),y=n[f+"Month"](),p=n[f+"FullYear"](),_=n[f+"Hours"](),g=n[f+"Minutes"](),b=n[f+"Seconds"](),w=n[f+"Milliseconds"](),x=u?0:n.getTimezoneOffset(),T=i(n),k=c(n),D={d:v,dd:s(v),ddd:o.i18n.dayNames[h],dddd:o.i18n.dayNames[h+7],m:y+1,mm:s(y+1),mmm:o.i18n.monthNames[y],mmmm:o.i18n.monthNames[y+12],yy:String(p).slice(2),yyyy:p,h:_%12||12,hh:s(_%12||12),H:_,HH:s(_),M:g,MM:s(g),s:b,ss:s(b),l:s(w,3),L:s(Math.round(w/10)),t:_<12?o.i18n.timeNames[0]:o.i18n.timeNames[1],tt:_<12?o.i18n.timeNames[2]:o.i18n.timeNames[3],T:_<12?o.i18n.timeNames[4]:o.i18n.timeNames[5],TT:_<12?o.i18n.timeNames[6]:o.i18n.timeNames[7],Z:d?"GMT":u?"UTC":(String(n).match(e)||[""]).pop().replace(a,""),o:(x>0?"-":"+")+s(100*Math.floor(Math.abs(x)/60)+Math.abs(x)%60,4),S:["th","st","nd","rd"][v%10>3?0:(v%100-v%10!=10)*v%10],W:T,N:k};return r.replace(t,(function(t){return t in D?D[t]:t.slice(1,t.length-1)}))}}();function s(t,e){t=String(t),e=e||2;while(t.length<e)t="0"+t;return t}function i(t){var e=new Date(t.getFullYear(),t.getMonth(),t.getDate());e.setDate(e.getDate()-(e.getDay()+6)%7+3);var a=new Date(e.getFullYear(),0,4);a.setDate(a.getDate()-(a.getDay()+6)%7+3);var n=e.getTimezoneOffset()-a.getTimezoneOffset();e.setHours(e.getHours()-n);var r=(e-a)/6048e5;return 1+Math.floor(r)}function c(t){var e=t.getDay();return 0===e&&(e=7),e}function l(t){return null===t?"null":void 0===t?"undefined":"object"!==typeof t?typeof t:Array.isArray(t)?"array":{}.toString.call(t).slice(8,-1).toLowerCase()}o.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},o.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],timeNames:["a","p","am","pm","A","P","AM","PM"]},n=function(){return o}.call(e,a,e,t),void 0===n||(t.exports=n)})()},bd97:function(t,e,a){},c8be:function(t,e,a){"use strict";var n=a("bd97"),r=a.n(n);r.a}}]);
//# sourceMappingURL=chunk-1dc52829.5b596086.js.map