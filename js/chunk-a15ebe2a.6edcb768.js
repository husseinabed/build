(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a15ebe2a"],{7277:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-content",{staticClass:"pa-0 ma-0"},[a("v-toolbar",{staticClass:"title",attrs:{flat:"",color:"green white--text"}},[t._v(" Total Day : "+t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t.todayAll))+" "),a("v-spacer"),a("app-date-picker",{staticClass:"mt-5",staticStyle:{width:"200px"},attrs:{"prepend-inner-icon":"mdi-calendar",reverse:"",outlined:"","hide-details":"",dense:"",dark:""},on:{input:t.updateTotal},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),a("v-row",{staticClass:"pa-0 ma-0"},[a("v-col",[a("h2",[t._v(" sale")])]),a("v-col",[a("h2",[t._v(" Retention")])]),a("v-col",{attrs:{cols:"3"}},[a("h2",[t._v(" Total")])])],1),a("v-divider"),a("h3",{staticClass:"pt-1 grey--text"},[t._v("English")]),a("v-row",[a("v-col",[a("app-data-table",{staticClass:"elevation-1",attrs:{dense:"",height:"164",headers:t.headers.sale,items:t.items.sale.en,"multi-sort":"","footer-props":t.fprops},on:{"expand-table":function(e){return t.expandTable("sale","en")}}})],1),a("v-col",[a("app-data-table",{staticClass:"elevation-1",attrs:{dense:"","footer-props":t.fprops,headers:t.headers.retention,items:t.items.retention.en,height:"164","multi-sort":""},on:{"expand-table":function(e){return t.expandTable("retention","en")}}})],1),a("v-col",[a("v-data-table",{staticClass:"elevation-1",attrs:{"hide-default-footer":"",headers:t.headers.total,items:t.items.total.en,height:"200","multi-sort":""},scopedSlots:t._u([{key:"body.append",fn:function(){return[a("tr",[a("td",[t._v("Total")]),a("td"),a("td",{staticClass:"green--text font-weight-bold"},[t._v(t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t.totals.en)))])])]},proxy:!0}])})],1)],1),a("v-row",[a("total-sheet",{attrs:{title:"(EN) Total Month",items:[{title:"Sales",ftd:t.totalMonth.sales.en.ftd,total:t.totalMonth.sales.en.total},{title:"Retentions",ftd:t.totalMonth.retention.en.ftd,total:t.totalMonth.retention.en.total},{title:"Total",ftd:t.totalMonth.sales.en.ftd+t.totalMonth.retention.en.ftd,total:t.totalMonth.sales.en.total+t.totalMonth.retention.en.total}]}})],1),a("v-divider"),a("h3",{staticClass:"pt-1 grey--text"},[t._v("Arabic")]),a("v-row",[a("v-col",[a("app-data-table",{staticClass:"elevation-1",attrs:{dense:"","footer-props":t.fprops,headers:t.headers.sale,items:t.items.sale.ar,height:"164","multi-sort":""},on:{"expand-table":function(e){return t.expandTable("sale","ar")}}})],1),a("v-col",[a("app-data-table",{staticClass:"elevation-1",attrs:{dense:"","footer-props":t.fprops,headers:t.headers.retention,items:t.items.retention.ar,height:"164","multi-sort":""},on:{"expand-table":function(e){return t.expandTable("retention","ar")}}})],1),a("v-col",[a("v-data-table",{staticClass:"elevation-1",attrs:{"hide-default-footer":"",headers:t.headers.total,items:t.items.total.ar,height:"200","multi-sort":""},scopedSlots:t._u([{key:"body.append",fn:function(){return[a("tr",[a("td",[t._v("Total")]),a("td"),a("td",{staticClass:"green--text font-weight-bold"},[t._v(t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t.totals.ar)))])])]},proxy:!0}])})],1)],1),a("v-row",[a("total-sheet",{attrs:{title:"(AR) Total Month",items:[{title:"Sales",ftd:t.totalMonth.sales.ar.ftd,total:t.totalMonth.sales.ar.total},{title:"Retentions",ftd:t.totalMonth.retention.ar.ftd,total:t.totalMonth.retention.ar.total},{title:"Total",ftd:t.totalMonth.sales.ar.ftd+t.totalMonth.retention.ar.ftd,total:t.totalMonth.sales.ar.total+t.totalMonth.retention.ar.total}]}})],1),a("v-divider"),a("h3",{staticClass:"pt-1 grey--text"},[t._v("Label 1")]),a("v-row",[a("v-col",[a("app-data-table",{staticClass:"elevation-1",attrs:{dense:"","footer-props":t.fprops,headers:t.headers.sale,items:t.items.sale.label1,height:"164","multi-sort":""},on:{"expand-table":function(e){return t.expandTable("sale","label1")}}})],1),a("v-col",[a("app-data-table",{staticClass:"elevation-1",attrs:{dense:"","footer-props":t.fprops,headers:t.headers.retention,items:t.items.retention.label1,height:"164","multi-sort":""},on:{"expand-table":function(e){return t.expandTable("retention","label1")}}})],1),a("v-col",[a("v-data-table",{staticClass:"elevation-1",attrs:{"hide-default-footer":"",headers:t.headers.total,items:t.items.total.label1,height:"200","multi-sort":""},scopedSlots:t._u([{key:"body.append",fn:function(){return[a("tr",[a("td",[t._v("total")]),a("td"),a("td",{staticClass:"green--text font-weight-bold"},[t._v(t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t.totals.label1)))])])]},proxy:!0}])})],1)],1),a("v-row",[a("total-sheet",{attrs:{title:"(Label1) Total Month",items:[{title:"Sales",ftd:t.totalMonth.sales.lb.ftd,total:t.totalMonth.sales.lb.total},{title:"Retentions",ftd:t.totalMonth.retention.lb.ftd,total:t.totalMonth.retention.lb.total},{title:"Total",ftd:t.totalMonth.sales.lb.ftd+t.totalMonth.retention.lb.ftd,total:t.totalMonth.sales.lb.total+t.totalMonth.retention.lb.total}]}})],1),a("v-dialog",{attrs:{"max-width":"950px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(e){t.dialog=!1}}},[a("v-icon",[t._v(" mdi-close ")])],1)],1),a("v-card-text",[a("v-container",[a("v-row",[t.dialog?a("v-data-table",{staticClass:"elevation-1",attrs:{dense:"",headers:t.headers.tables[t.dialogProps.collection],items:t.items[t.dialogProps.collection][t.dialogProps.bu],"multi-sort":""},scopedSlots:t._u([{key:"item.created_on",fn:function(e){var a=e.item;return[t._v(" "+t._s((new Intl.DateTimeFormat).format(new Date(a.created_on)))+" ")]}},{key:"item.payment_method",fn:function(e){var a=e.item;return[t._v(" "+t._s(a.payment_method.name)+" ("+t._s(a.payment_method.type)+") ")]}}],null,!1,1828216496)}):t._e()],1)],1)],1)],1)],1)],1)},o=[],l=(a("4160"),a("d81d"),a("13d5"),a("159b"),a("96cf"),a("1da1")),r=a("5530"),s=a("2f62"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-data-table",t._b({scopedSlots:t._u([{key:"item.created_on",fn:function(e){var a=e.item;return[t._v(" "+t._s((new Intl.DateTimeFormat).format(new Date(a.created_on)))+" ")]}},{key:"item.payment_method",fn:function(e){var a=e.item;return[t._v(" "+t._s(a.payment_method.name)+" ("+t._s(a.payment_method.type)+") ")]}},{key:"item.amount",fn:function(e){var a=e.item;return[t._v(" "+t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a.amount))+" ")]}},{key:"footer",fn:function(e){return[a("v-btn",{attrs:{icon:"",absolute:"",disabled:!e.props.pagination.itemsLength,small:""},on:{click:function(e){return t.$emit("expand-table")}}},[a("v-icon",[t._v("mdi-window-maximize")])],1)]}}])},"v-data-table",t.$attrs,!1))},c=[],d={name:"data-table"},u=d,f=a("2877"),m=a("6544"),p=a.n(m),h=a("8336"),b=a("8fea"),v=a("132d"),_=Object(f["a"])(u,i,c,!1,null,null,null),g=_.exports;p()(_,{VBtn:h["a"],VDataTable:b["a"],VIcon:v["a"]});var y=a("e94a"),w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-sheet",{attrs:{color:"green px-3 mb-3 mx-3 white--text ",width:"100%"}},[a("small",[t._v(" "+t._s(t.title)+" ")]),a("v-row",t._l(t.items,(function(e,n){return a("v-col",{key:n,staticClass:"mx-2 pa-0 px-2"},[a("fieldset",{staticClass:"px-2 mb-2 fielset"},[a("legend",[t._v(t._s(e.title))]),a("v-row",[a("v-col",{attrs:{cols:"3"}},[a("small",[t._v('FT"D')]),a("h2",{staticClass:"text-center"},[t._v(t._s(e.ftd||0))])]),a("v-col",[a("small",[t._v("Total")]),a("h2",[t._v(t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e.total||0)))])])],1)],1)])})),1)],1)},x=[],T={name:"TotalSheet",props:{title:String,items:Array}},M=T,C=(a("b864"),a("62ad")),S=a("0fd9"),D=a("8dd9"),k=Object(f["a"])(M,w,x,!1,null,"235016fc",null),V=k.exports;p()(k,{VCol:C["a"],VRow:S["a"],VSheet:D["a"]});var I=a("fb57"),A={components:{AppDatePicker:y["a"],AppDataTable:g,TotalSheet:V},data:function(){return{totalMonth:{sales:{en:{ftd:0,total:0},ar:{ftd:0,total:0},lb:{ftd:0,total:0}},retention:{en:{ftd:0,total:0},ar:{ftd:0,total:0},lb:{ftd:0,total:0}}},date:(new Date).toISOString().substr(0,10),dialog:!1,dialogProps:{collection:"sale",bu:"en"},loaded:!1,chartdata:null,fprops:{itemsPerPageOptions:[5],firstIcon:"mdi-arrow-collapse-left",lastIcon:"mdi-arrow-collapse-right",prevIcon:"mdi-arrow-left",nextIcon:"mdi-arrow-right"},todayAll:0,totals:{en:0,ar:0,label1:0},headers:{tables:{sale:I["default"].get("sale").table,retention:I["default"].get("retention").table},total:[{text:"Type",align:"start",sortable:!1,value:"type"},{text:'FT"D',value:"count"},{text:"Total",value:"amount"}],sale:[{text:"TP Account",align:"start",sortable:!1,value:"tpc"},{text:"Amount",value:"amount"},{text:"Affiliate",value:"affiliate"}],retention:[{text:"TP Account",align:"start",sortable:!1,value:"tpc"},{text:"Amount",value:"amount"},{text:"Affiliate",value:"affiliate"}]},items:{sale:{en:[],ar:[],label1:[]},retention:{en:[],ar:[],label1:[]},total:{en:[],ar:[],label1:[]}},options:{}}},computed:{firstDate:function(){var t=new Date;return(new Intl.DateTimeFormat).format(new Date(t.getFullYear(),t.getMonth(),1))},currentDate:function(){return(new Intl.DateTimeFormat).format(new Date)}},methods:Object(r["a"])(Object(r["a"])({},Object(s["b"])({get:"api/get"})),{},{updateTotal:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.items.total={en:[],ar:[],label1:[]},e.next=3,t.get({collection:"dashboard/total",query:{date:t.date}});case 3:return a=e.sent,e.next=6,t.get({collection:"dashboard/month"});case 6:n=e.sent,200==n.status&&(n.data.sales.forEach((function(e){t.totalMonth.sales[e._id].ftd=e.count,t.totalMonth.sales[e._id].total=e.amount})),n.data.rts.forEach((function(e){t.totalMonth.retention[e._id].ftd=e.count,t.totalMonth.retention[e._id].total=e.amount}))),200==a.status&&(t.todayAll=a.data.total,t.totals.en=a.data.en,t.totals.ar=a.data.ar,t.totals.label1=a.data.label1),t.loaded=!1;try{[{collection:"sale",business_unit:"en"},{collection:"retention",business_unit:"en"},{collection:"sale",business_unit:"ar"},{collection:"retention",business_unit:"ar"},{collection:"sale",business_unit:"label1"},{collection:"retention",business_unit:"label1"}].forEach(function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(a){var n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.get({collection:"dashboard/"+a.collection,query:{business_unit:a.business_unit,date:t.date}});case 2:n=e.sent,o=n.data,t.items[a.collection][a.business_unit]=o,t.items.total[a.business_unit].push({type:a.collection,count:o.length,amount:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(o.length?o.map((function(t){return t.amount})).reduce((function(t,e){return t+e})):0)});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.loaded=!0}catch(o){console.error(o)}case 11:case"end":return e.stop()}}),e)})))()},expandTable:function(t,e){this.dialogProps.collection=t,this.dialogProps.bu=e,this.dialog=!0,console.log(t,e)}}),mounted:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.updateTotal();case 1:case"end":return e.stop()}}),e)})))()}},F=A,U=a("b0af"),R=a("99d9"),O=a("a523"),P=a("a75b"),j=a("169a"),E=a("ce7e"),N=a("2fa4"),$=a("71d9"),L=Object(f["a"])(F,n,o,!1,null,null,null);e["default"]=L.exports;p()(L,{VBtn:h["a"],VCard:U["a"],VCardText:R["d"],VCardTitle:R["e"],VCol:C["a"],VContainer:O["a"],VContent:P["a"],VDataTable:b["a"],VDialog:j["a"],VDivider:E["a"],VIcon:v["a"],VRow:S["a"],VSpacer:N["a"],VToolbar:$["a"]})},"7dff":function(t,e,a){},b864:function(t,e,a){"use strict";var n=a("7dff"),o=a.n(n);o.a}}]);
//# sourceMappingURL=chunk-a15ebe2a.6edcb768.js.map