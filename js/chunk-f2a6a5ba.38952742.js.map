{"version":3,"sources":["webpack:///./src/views/Items.vue?5676","webpack:///./src/components/ItemsHeader.vue?d948","webpack:///src/components/ItemsHeader.vue","webpack:///./src/components/ItemsHeader.vue?e0ee","webpack:///./src/components/ItemsHeader.vue","webpack:///src/views/Items.vue","webpack:///./src/views/Items.vue?3464","webpack:///./src/views/Items.vue","webpack:///./src/views/Items.vue?2c6e"],"names":["render","_vm","this","_h","$createElement","_c","_self","readAccess","staticClass","attrs","icon","collection","title","writeAccess","hasFilters","on","$event","options","query","_e","loading","headers","items","limit","sortBy","sortDesc","scopedSlots","_u","key","fn","ref","item","_v","_s","Intl","DateTimeFormat","format","Date","created_on","payment_method","name","type","NumberFormat","style","currency","amount","active","read","data","length","map","a","reduce","b","cloneItem","editItem","deleteItem","totalPages","model","value","callback","$$v","$set","expression","page","staticRenderFns","$router","push","$route","params","class","openPanel","filtersHasValues","_l","field","ind","inputs","input","_g","_b","tag","bind","props","Boolean","Object","String","watch","computed","values","filter","methods","emitPreparedData","keys","forEach","$emit","generateDataInputs","filters","created","component","VBtn","VCol","VIcon","VSpacer","VToolbar","components","ItemsHeader","VBadge","VCard","VCardText","VDataTable","VPagination","VSelect"],"mappings":"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","file":"js/chunk-f2a6a5ba.38952742.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-col',[(!_vm.readAccess)?_c('v-col',[_c('v-card',{attrs:{\"width\":\"100%\"}},[_c('v-card-text',{staticClass:\"text-center pa-12\"},[_c('v-icon',{attrs:{\"size\":\"70\"}},[_vm._v(\"mdi-lock\")]),_c('h2',[_vm._v(\"Access Denied\")]),_c('p',[_vm._v(\" you dont have the right to view this content \")])],1)],1)],1):_c('v-col',{staticClass:\"pa-0 ma-0\"},[(_vm.found)?_c('items-header',{attrs:{\"icon\":this.icon,\"collection\":_vm.collection,\"title\":_vm.title,\"writeAccess\":_vm.writeAccess,\"has-filters\":_vm.hasFilters},on:{\"query\":function($event){_vm.options.query = $event}}}):_vm._e(),(_vm.found)?_c('v-data-table',{staticClass:\"my-5 elevation-1\",attrs:{\"loading\":_vm.loading,\"headers\":_vm.headers,\"items\":_vm.items,\"items-per-page\":_vm.options.limit,\"hide-default-footer\":\"\",\"multi-sort\":\"\"},on:{\"update:sort-by\":_vm.sortBy,\"update:sort-desc\":_vm.sortDesc},scopedSlots:_vm._u([{key:\"item.created_on\",fn:function(ref){\nvar item = ref.item;\nreturn [_vm._v(\" \"+_vm._s(new Intl.DateTimeFormat().format(new Date(item.created_on)))+\" \")]}},(_vm.hasAmount)?{key:\"item.payment_method\",fn:function(ref){\nvar item = ref.item;\nreturn [_vm._v(\" \"+_vm._s(item.payment_method.name)+\" (\"+_vm._s(item.payment_method.type)+\") \")]}}:null,(_vm.hasAmount)?{key:\"item.amount\",fn:function(ref){\nvar item = ref.item;\nreturn [_vm._v(\" \"+_vm._s(new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', }).format(item.amount))+\" \")]}}:null,{key:\"item.active\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-badge',{attrs:{\"color\":item.active ? 'green' : 'grey'}})]}},{key:\"item.read\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-badge',{attrs:{\"color\":item.read ? 'green' : 'grey'}})]}},(_vm.hasAmount)?{key:\"body.append\",fn:function(data){return [_c('tr',[_c('td',{staticClass:\"font-weight-bold\"},[_vm._v(\"Total Amount\")]),_c('td'),_c('td',{staticClass:\"font-weight-bold\"},[_vm._v(\" \"+_vm._s(new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', }) .format(data.items.length ? data.items.map(function (a) { return a.amount; } ) .reduce(function (a,b) { return a + b; }) : 0))+\" \")]),_c('td',{attrs:{\"colspan\":\"5\"}})])]}}:null,{key:\"item.actions\",fn:function(ref){\nvar item = ref.item;\nreturn [(_vm.readAccess)?_c('v-icon',{staticClass:\"mr-2\",attrs:{\"small\":\"\"},on:{\"click\":function($event){return _vm.cloneItem(item)}}},[_vm._v(\" mdi-content-copy \")]):_vm._e(),(_vm.updateAccess)?_c('v-icon',{staticClass:\"mr-2\",attrs:{\"small\":\"\"},on:{\"click\":function($event){return _vm.editItem(item)}}},[_vm._v(\" mdi-pencil \")]):_vm._e(),(_vm.deleteAccess)?_c('v-icon',{attrs:{\"small\":\"\"},on:{\"click\":function($event){return _vm.deleteItem(item)}}},[_vm._v(\" mdi-delete \")]):_vm._e()]}}],null,true)}):_c('v-not-found'),(_vm.found)?_c('v-toolbar',{attrs:{\"short\":\"\",\"elevation\":\"1\"}},[_c('v-pagination',{staticClass:\"my-4\",attrs:{\"length\":_vm.totalPages},model:{value:(_vm.options.page),callback:function ($$v) {_vm.$set(_vm.options, \"page\", $$v)},expression:\"options.page\"}}),_c('v-spacer'),_c('v-select',{attrs:{\"label\":\"Limit\",\"dense\":\"\",\"outlined\":\"\",\"hide-details\":\"\",\"items\":[10, 20, 50]},on:{\"input\":function($event){_vm.options.page = 1}},model:{value:(_vm.options.limit),callback:function ($$v) {_vm.$set(_vm.options, \"limit\", $$v)},expression:\"options.limit\"}})],1):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-toolbar',{attrs:{\"elevation\":\"1\"}},[_c('h2',{staticClass:\"mb-3\"},[_c('v-icon',{attrs:{\"size\":\"30\"}},[_vm._v(\" \"+_vm._s(this.icon)+\" \")]),_vm._v(\" \"+_vm._s(this.title))],1),_c('v-spacer'),(_vm.writeAccess)?_c('v-btn',{attrs:{\"color\":\"success\"},on:{\"click\":function($event){return _vm.$router.push('/'+_vm.$route.params.collection+'/new')}}},[_c('v-icon',[_vm._v(\"mdi-plus\")]),_vm._v(\" New \")],1):_vm._e(),(_vm.hasFilters)?_c('v-btn',{staticClass:\"ml-3\",class:{\n      'grey ': _vm.openPanel,\n      'white--text':_vm.openPanel,\n      'blue--text': _vm.filtersHasValues\n      },attrs:{\"icon\":\"\"},on:{\"click\":function($event){_vm.openPanel = !_vm.openPanel}}},[_c('v-icon',[_vm._v(\"mdi-filter\")])],1):_vm._e()],1),(_vm.openPanel && _vm.hasFilters)?_c('v-toolbar',{staticClass:\"py-4\",attrs:{\"elevation\":\"1\",\"height\":\"70\"}},_vm._l((_vm.collection.filters),function(field,ind){return _c('v-col',{key:ind},[_c(_vm.inputs[field.input],_vm._g(_vm._b({tag:\"component\",attrs:{\"value\":_vm.data[field.name].value},on:{\"input\":function($event){return _vm.input($event, field.name)}}},'component',field.bind,false),field.on))],1)}),1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n  \r\n    <v-toolbar   elevation=\"1\">\r\n  \r\n    <h2 class=\"mb-3\" > <v-icon size=\"30\"  > {{ this.icon }} </v-icon> {{ this.title }}</h2>\r\n      <v-spacer></v-spacer>\r\n    \r\n      <v-btn v-if=\"writeAccess\" color=\"success\" @click=\"$router.push('/'+$route.params.collection+'/new')\">\r\n        <v-icon>mdi-plus</v-icon>\r\n        New\r\n      </v-btn>\r\n      <v-btn v-if=\"hasFilters\" icon class=\"ml-3\" @click=\"openPanel = !openPanel\" :class=\"{\r\n        'grey ': openPanel,\r\n        'white--text':openPanel,\r\n        'blue--text': filtersHasValues\r\n        }\">\r\n        <v-icon>mdi-filter</v-icon>\r\n      </v-btn>  \r\n    </v-toolbar>\r\n     \r\n    <v-toolbar   elevation=\"1\" v-if=\"openPanel && hasFilters\" class=\"py-4\" height=\"70\">\r\n        <v-col v-for=\"(field, ind) in collection.filters\" :key=\"ind\"   >\r\n          <component \r\n            :is=\"inputs[field.input]\" \r\n            v-bind=\"field.bind\"\r\n            v-on=\"field.on\"\r\n            :value=\"data[field.name].value\" \r\n            @input=\"input($event, field.name)\"\r\n        />\r\n        </v-col>\r\n      </v-toolbar>\r\n  </div>\r\n</template>\r\n<script>\r\n// import debounce from 'debounce'\r\n\r\n \r\n import   {\r\n  VTextField,\r\n  VSelect,\r\n  VSwitch,\r\n  \r\n} from 'vuetify/lib'\r\n \r\nimport AppAutoComplete from './../components/Autocomplete'\r\nimport AppDatePicker from './../components/DatePicker'\r\n \r\nexport default {\r\n  name: 'ItemsHeader',\r\n  props: {\r\n    writeAccess: Boolean,\r\n    hasFilters: Boolean,\r\n    collection: Object,\r\n    icon: String,\r\n    title: String\r\n  },\r\n  data() {\r\n    return {\r\n     openPanel:false,\r\n     data: {},\r\n      inputs: {\r\n          text: VTextField,\r\n          select: VSelect,\r\n          switch: VSwitch,\r\n          date: AppDatePicker,\r\n          autocomplete: AppAutoComplete,\r\n        }\r\n    }\r\n  },\r\n  watch: {\r\n    // data:{\r\n    //   handler: 'emitPreparedData',\r\n    //   deep: true\r\n    // } \r\n  },\r\n  computed: {\r\n    filtersHasValues () {\r\n      return Object.values(this.data).filter(e => Boolean(e.value)).length\r\n    }\r\n  },\r\n  methods: {\r\n    input (value, field) {\r\n      this.data[field].value = value\r\n      this.emitPreparedData()\r\n    },\r\n    emitPreparedData () {\r\n      const data = {}\r\n      Object.keys(this.data).forEach(f => {\r\n      if(this.data[f].value)\r\n        data[f] = this.data[f];\r\n      })\r\n      \r\n      this.$emit('query', data);\r\n    },\r\n    generateDataInputs () {\r\n      const data = {}\r\n      if (this.collection.filters)\r\n        this.collection.filters.forEach(field => {\r\n            data[field.name] = { type: field.input, value:''}\r\n        })\r\n      this.data = data\r\n     } \r\n  },\r\n  created () {\r\n    this.generateDataInputs()\r\n  } \r\n}\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ItemsHeader.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ItemsHeader.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ItemsHeader.vue?vue&type=template&id=ba53a02e&\"\nimport script from \"./ItemsHeader.vue?vue&type=script&lang=js&\"\nexport * from \"./ItemsHeader.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VToolbar } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VBtn,VCol,VIcon,VSpacer,VToolbar})\n","\r\n\r\n<template>\r\n  <v-col>\r\n    <v-col v-if=\"!readAccess\">\r\n      <v-card width=\"100%\">\r\n         \r\n        <v-card-text class=\"text-center pa-12\">\r\n            <v-icon size=\"70\">mdi-lock</v-icon>  \r\n          <h2  >Access Denied</h2>\r\n          <p>\r\n            you dont have the right to view this content\r\n          </p>\r\n\r\n        </v-card-text>\r\n      \r\n      </v-card>\r\n    </v-col>\r\n    <v-col class=\"pa-0 ma-0\" v-else>\r\n \r\n      <items-header \r\n      :icon=\"this.icon\" \r\n      :collection=\"collection\"\r\n      :title=\"title\" \r\n      :writeAccess=\"writeAccess\"\r\n      :has-filters=\"hasFilters\"\r\n      @query=\"options.query = $event\"\r\n      v-if=\"found\"\r\n      ></items-header>\r\n\r\n\r\n     \r\n      \r\n    \r\n      <v-data-table v-if=\"found\"\r\n        :loading=\"loading\"\r\n        class=\"my-5 elevation-1\"\r\n        :headers=\"headers\"\r\n        :items=\"items\"\r\n        :items-per-page=\"options.limit\"\r\n        @update:sort-by=\"sortBy\"\r\n        @update:sort-desc=\"sortDesc\"\r\n        hide-default-footer\r\n        multi-sort\r\n     \r\n      >\r\n      \r\n      <template v-slot:item.created_on=\"{ item }\" v-if=\"hasAmount\">\r\n        {{ item.created_on.split('T')[0] }} \r\n      </template>\r\n      <template v-slot:item.payment_method=\"{ item }\" v-if=\"hasAmount\">\r\n          \r\n        {{ item.payment_method.name  }}  ({{ item.payment_method.type }})\r\n      </template>\r\n      <template v-slot:item.amount=\"{ item }\" v-if=\"hasAmount\">\r\n        {{  new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD',  }).format(item.amount) }}\r\n      </template>\r\n      <template v-slot:item.active=\"{ item }\" class=\"center-text text-center\"  >\r\n      <v-badge :color=\"item.active ? 'green' : 'grey'\"></v-badge>  \r\n      </template>\r\n      <template v-slot:item.read=\"{ item }\" class=\"center-text text-center\"  >\r\n      <v-badge :color=\"item.read ? 'green' : 'grey'\"></v-badge>  \r\n      </template>\r\n      <template v-slot:item.created_on=\"{ item }\"  >\r\n        {{ new Intl.DateTimeFormat().format(new Date(item.created_on)) }}\r\n      </template>\r\n      <template v-slot:body.append=\"data\" v-if=\"hasAmount\">\r\n          <tr>\r\n            <td class=\"font-weight-bold\">Total Amount</td>\r\n            <td></td>\r\n            <td class=\"font-weight-bold\" >\r\n              {{ \r\n                new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD',  })\r\n                .format(data.items.length ? data.items.map((a) => a.amount )\r\n                .reduce((a,b) => a + b) : 0)\r\n              }}\r\n            </td>\r\n            <td colspan=\"5\"></td>\r\n          </tr>\r\n      </template>\r\n      <template v-slot:item.actions=\"{ item }\">\r\n        <v-icon\r\n          small\r\n          v-if=\"readAccess\"\r\n          class=\"mr-2\"\r\n          @click=\"cloneItem(item)\"\r\n        >\r\n          mdi-content-copy\r\n        </v-icon>\r\n        <v-icon\r\n          small\r\n          v-if=\"updateAccess\"\r\n          class=\"mr-2\"\r\n          @click=\"editItem(item)\"\r\n        >\r\n          mdi-pencil\r\n        </v-icon>\r\n        <v-icon\r\n          small\r\n          v-if=\"deleteAccess\"\r\n          @click=\"deleteItem(item)\"\r\n        >\r\n          mdi-delete\r\n        </v-icon>\r\n      </template>\r\n      </v-data-table>\r\n      <v-not-found v-else />\r\n      <v-toolbar  short  elevation=\"1\" v-if=\"found\">\r\n        <v-pagination\r\n          class=\"my-4\"\r\n          v-model=\"options.page\"\r\n    \r\n          :length=\"totalPages\"\r\n          \r\n        ></v-pagination>\r\n        <v-spacer></v-spacer>\r\n        <v-select\r\n          label=\"Limit\"\r\n          dense\r\n          outlined\r\n          hide-details\r\n          v-model=\"options.limit\"\r\n          @input=\"options.page = 1\"\r\n          :items=\"[10, 20, 50]\"\r\n        >\r\n        </v-select>\r\n      </v-toolbar>\r\n    </v-col>\r\n    \r\n  </v-col>\r\n</template>\r\n\r\n<script>\r\n\r\nimport {mapActions } from 'vuex'\r\n \r\nimport ItemsHeader from './../components/ItemsHeader'\r\n \r\nimport collections from '../collections'\r\nexport default {\r\n  components: {\r\n    ItemsHeader\r\n  },\r\n    data () {\r\n\r\n      return {\r\n        options: {\r\n          query: {},\r\n          sortBy: [],\r\n          sortDesc:[],\r\n          page: 1,\r\n          limit: 10,\r\n          \r\n        },\r\n        totalPages: 1,\r\n        collection: null,\r\n        filterOn: false,\r\n \r\n        loading: false,\r\n        title: '',\r\n        icon: '',\r\n        found: true,\r\n        headers: [],\r\n        items: [],\r\n     \r\n       \r\n      }\r\n    },\r\n    computed:{\r\n\r\n      hasFilters () {\r\n        if(this.collection)\r\n          return this.collection.filters && this.collection.filters.length > -1\r\n        return false\r\n      },\r\n      filters () {\r\n        return this.hasFilters ? this.collection.filters : []\r\n      },\r\n      access () {\r\n        if (this.$store.state.auth.user.rights) {\r\n          return this.$store.state.auth.user.rights.filter(e => {\r\n              return e.value == this.$route.params.collection  \r\n          })\r\n        } \r\n        return []\r\n      },\r\n      writeAccess () {\r\n      \r\n        if (this.access.length > 0)\r\n          return this.access[0].write\r\n\r\n        return false \r\n      },\r\n      readAccess () {\r\n         if (this.access.length > 0)\r\n          return this.access[0].read\r\n\r\n        return false \r\n      },\r\n      updateAccess () {\r\n      \r\n        if (this.access.length > 0)\r\n          return this.access[0].update\r\n\r\n        return false \r\n      },\r\n      deleteAccess () {\r\n         if (this.access.length > 0)\r\n          return this.access[0].delete\r\n\r\n        return false \r\n      },\r\n      hasAmount () {\r\n        const arr = ['sales', 'retention']\r\n        return arr.indexOf(this.$route.params.collection) !== -1\r\n      } \r\n    },\r\n    watch: {\r\n      $route:{\r\n        handler: 'updateComponent', // update the component and fetch the relavint data\r\n        immediate: true\r\n      },\r\n      options: {\r\n        handler: 'fetch',\r\n        deep: true\r\n      } \r\n    },\r\n    methods: {\r\n      sortBy (f) {\r\n         this.options.sortBy = f\r\n      },\r\n      sortDesc(v) {\r\n        this.options.sortDesc = v.map(e => e ? -1 : 1) \r\n\r\n      },\r\n      ...mapActions({\r\n        get: 'api/get',\r\n        remove: 'api/remove'\r\n      }),\r\n      async fetch () {\r\n        console.log('Fetching');\r\n        this.loading = true\r\n        const res = await this.get({ collection: this.$route.params.collection, query: this.options}) \r\n \r\n        if (res && res.status === 200) {\r\n          this.items = res.data.docs\r\n          this.totalPages = res.data.totalPages\r\n        }\r\n        this.loading = false\r\n      },\r\n      editItem (e) {\r\n        this.$router.push('/'+this.$route.params.collection+'/'+e._id)\r\n      },\r\n      cloneItem (item) {\r\n        this.$router.push('/'+this.$route.params.collection+'/new?clone=' + item._id)\r\n      },\r\n      async deleteItem (e) {\r\n        const res = await this.$confirm('Are you sure do you want to delete this item ?', { title: 'Warning' })\r\n        if (res) {\r\n            this.loading = true\r\n            const rm = await this.remove( { collection: this.$route.params.collection, id: e._id  } ) \r\n            if (rm.status === 200) {\r\n\r\n              this.fetch()\r\n              this.loading = false\r\n              this.$store.commit('success', 'Item deleted successfuly')\r\n            }\r\n\r\n\r\n        }\r\n      },\r\n      async updateComponent () {\r\n        const   collection   = collections.get(this.$route.params.collection)\r\n        this.collection = collection\r\n        if (collection) {\r\n          this.title = collection.title\r\n          this.icon = collection.icon\r\n          this.headers = collection.table\r\n          this.fetch()\r\n        } else {\r\n          this.found = false\r\n        }\r\n      }\r\n    }\r\n\r\n  }\r\n</script>\r\n<style scoped>\r\n.v-pagination {\r\n  justify-content: left;\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Items.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Items.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Items.vue?vue&type=template&id=20d157a9&scoped=true&\"\nimport script from \"./Items.vue?vue&type=script&lang=js&\"\nexport * from \"./Items.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Items.vue?vue&type=style&index=0&id=20d157a9&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"20d157a9\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBadge } from 'vuetify/lib/components/VBadge';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VDataTable } from 'vuetify/lib/components/VDataTable';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VPagination } from 'vuetify/lib/components/VPagination';\nimport { VSelect } from 'vuetify/lib/components/VSelect';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VToolbar } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VBadge,VCard,VCardText,VCol,VDataTable,VIcon,VPagination,VSelect,VSpacer,VToolbar})\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Items.vue?vue&type=style&index=0&id=20d157a9&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Items.vue?vue&type=style&index=0&id=20d157a9&scoped=true&lang=css&\""],"sourceRoot":""}