(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6978b90c"],{1991:function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("4de4"),core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("4160"),core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("c975"),core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_array_join__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("a15b"),core_js_modules_es_array_join__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_array_join__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("d81d"),core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("b0c0"),core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_number_constructor__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("a9e3"),core_js_modules_es_number_constructor__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_number_constructor__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_object_keys__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("b64b"),core_js_modules_es_object_keys__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_object_keys__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("ac1f"),core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("5319"),core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_es_string_search__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("841c"),core_js_modules_es_string_search__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_es_string_search__WEBPACK_IMPORTED_MODULE_10__),core_js_modules_es_string_split__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("1276"),core_js_modules_es_string_split__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_es_string_split__WEBPACK_IMPORTED_MODULE_11__),core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("159b"),core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_12__),regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("96cf"),regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_13__),C_projects_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("1da1"),_collections__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("fb57"),_components_DataTable__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("1fdb"),vuetify_lib__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("8654"),vuetify_lib__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("b974"),vuetify_lib__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("b73d"),_components_Autocomplete__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("bb0b"),_components_DatePicker__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("e94a"),_components_DateRange__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("9db7"),jquery__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("1157"),jquery__WEBPACK_IMPORTED_MODULE_23___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_23__),debounce__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("b012"),debounce__WEBPACK_IMPORTED_MODULE_24___default=__webpack_require__.n(debounce__WEBPACK_IMPORTED_MODULE_24__);__webpack_exports__["a"]={name:"Items",data:function(){return{dialog:{value:!1},loading:!1,serverItemsLength:0,items:[],selected:[],totals:[]}},components:{AppTable:_components_DataTable__WEBPACK_IMPORTED_MODULE_16__["a"]},computed:{inputs:function(){return{text:vuetify_lib__WEBPACK_IMPORTED_MODULE_17__["a"],select:vuetify_lib__WEBPACK_IMPORTED_MODULE_18__["a"],switch:vuetify_lib__WEBPACK_IMPORTED_MODULE_19__["a"],date:_components_DatePicker__WEBPACK_IMPORTED_MODULE_21__["a"],range:_components_DateRange__WEBPACK_IMPORTED_MODULE_22__["a"],autocomplete:_components_Autocomplete__WEBPACK_IMPORTED_MODULE_20__["a"]}},vm:function(){return this},collectionName:function(){return this.$route.params.collection},collection:function(){return _collections__WEBPACK_IMPORTED_MODULE_15__["default"].get(this.collectionName)},collectionTitle:function(){return this.collection.title.plural||this.collection.title},collectionItems:function(){return this.collection.items||{}},collectionButtons:function(){return this.collectionItems.buttons||!1},permissions:function(){var e=this;if(this.user){var _=this.user.rights,t=_.filter((function(_){return _.collection==e.collectionName}));return t[0]}return{}},filters:function(){var e=this;return!!this.collectionItems.filters&&this.collectionItems.filters.filter((function(_){return"function"!=typeof _.if||_.if(e.$store.state)}))},headers:function(){var e=this,_=this.permissions.fields,t=[];if(_){var o=[];Object.keys(_).forEach((function(e){_[e]&&o.push(atob(e))})),t=this.collectionItems.headers.filter((function(_){return-1!==o.indexOf(_.value)||"actions"==_.value&&(e.permissions.write.value||e.permissions.update.value||e.permissions.delete.value)}))}else t=this.collectionItems.headers;return t.filter((function(e){return!e.hide}))},footerProps:function(){var e=[5,10,20,50],_=Number(this.$route.query.limit);return isNaN(_)||-1!=e.indexOf(_)||e.push(_),{"items-per-page-options":e}},sortBy:function(){var e=this.$route.query;return e["sortBy[]"]?Array.isArray(e["sortBy[]"])?e["sortBy[]"]:[e["sortBy[]"]]:void 0},sortDesc:function sortDesc(){var query=this.$route.query;return query["sortDesc[]"]?Array.isArray(query["sortDesc[]"])?query["sortDesc[]"].map((function(e){return eval(e)})):[eval(query["sortDesc[]"])]:void 0}},watch:{"dialog.value":function(e){e||(this.dialog={value:e})},collectionName:function(){this.dialog={value:!1},this.selected=[],this.items=[],this.totals=[]},$route:{handler:"updateComponent",immediate:!0}},methods:{updateTable:function(e){var _=e.page,t=e.itemsPerPage,o=e.sortBy,n=e.sortDesc,r=Object.assign({},this.$route.query);r["sortBy[]"]&&delete r["sortBy[]"],r["sortDesc[]"]&&delete r["sortDesc[]"];var a=r.page<_;r.page=_,r.limit=t,o.length&&(r.sortBy=o),n.length&&(r.sortDesc=n);var s=this.$route.path+"?"+jquery__WEBPACK_IMPORTED_MODULE_23___default.a.param(r);jquery__WEBPACK_IMPORTED_MODULE_23___default.a.param(r)!=jquery__WEBPACK_IMPORTED_MODULE_23___default.a.param(this.$route.query)&&(a?this.$router.push(s):this.$router.replace(s))},updateComponent:function(){this.fetch()},fetch:function(){var e=this;return Object(C_projects_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_14__["a"])(regeneratorRuntime.mark((function _(){var t,o,n,r,a;return regeneratorRuntime.wrap((function(_){while(1)switch(_.prev=_.next){case 0:return e.loading=!0,_.next=3,e.get({collection:e.collectionName+window.location.search});case 3:if(t=_.sent,o=t.data,n=o.totalDocs,r=o.docs,e.items=r,e.serverItemsLength=n,!e.collection.items.total){_.next=13;break}return _.next=10,e.get({collection:e.collectionName+"/total"+window.location.search});case 10:a=_.sent,e.totals=a.data,console.log(e.totals);case 13:e.loading=!1;case 14:case"end":return _.stop()}}),_)})))()},setFilterValue:function(e,_){return"created_on"==_.name&&e&&(e=e.split("|")),"text"==_.input&&e&&(e=e.replace("~","")),e},filter:debounce__WEBPACK_IMPORTED_MODULE_24___default()((function(e,_){"created_on"==e.name&&Array.isArray(_)&&(_=_.join("|")),"text"==e.input&&(_="~"+_);var t=Object.assign({},this.$route.query);!_&&t[e.name]?delete t[e.name]:t[e.name]=_,t.page=1;var o=this.$route.path+"?"+jquery__WEBPACK_IMPORTED_MODULE_23___default.a.param(t);this.$router.replace(o)}),500)},created:function(){}}},"1fdb":function(e,_,t){"use strict";var o=function(){var e=this,_=e.$createElement,t=e._self._c||_;return t("v-data-table",e._g(e._b({scopedSlots:e._u([{key:"top",fn:function(_){return[e._t("top",null,null,_)]}},{key:"item",fn:function(_){var o=_.headers,n=_.item,r=_.isMobile,a=_.isSelected,s=_.select;return[t("tr",{class:{"v-data-table__mobile-table-row":r},on:{click:function(_){return e.$emit("click:row",n)}}},e._l(o,(function(_){var o;return t("td",{key:_.value,class:[{"v-data-table__mobile-row":r},{"v-data-table__divider":!r},(o={},o["text-"+(_.align||"start")]=!r,o)].concat(_.class),attrs:{width:r?null:_.width}},[r?t("div",{class:{"v-data-table__mobile-row__header":r}},[e._v(e._s(_.text))]):e._e(),"data-table-select"==_.value?t("div",{class:{"v-data-table__mobile-row__cell":r}},[t("VSimpleCheckbox",{staticClass:"v-data-table__checkbox",attrs:{ripple:!1,value:a},on:{input:s}})],1):"actions"==_.value?t("div",{class:{"v-data-table__mobile-row__cell":r}},e._l(_.buttons,(function(_,o){return t("v-tooltip",{key:o,attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(o){var r=o.on,a=o.attrs;return[t("v-btn",e._g(e._b({attrs:{icon:""}},"v-btn","function"==typeof _.bind?_.bind(e.vm,n):_.bind,!1),"function"==typeof _.on?_.on(e.vm,n):_.on),[t("v-icon",e._g(e._b({attrs:{small:""}},"v-icon",a,!1),r),[e._v(" "+e._s(_.icon)+" ")])],1)]}}],null,!0)},[t("span",[e._v(e._s(_.title))])])})),1):_.component?t("div",{class:{"v-data-table__mobile-row__cell":r}},[t(_.component.is||_.component,e._g(e._b({tag:"component",attrs:{item:n,header:_}},"component","function"==typeof _.component?{}:"function"==typeof _.component.bind?_.component.bind(e.vm,n):_.component.bind||{},!1),"function"==typeof _.component.on?_.component.on(e.vm,n):_.component.on))],1):t("div",{class:{"v-data-table__mobile-row__cell":r},domProps:{innerHTML:e._s(e.$options.filters.dynamic(e.$getNestedValue(n,_.value),_.format,e.getFormatArgs(_.formatArgs,n)||[]))}})])})),0)]}}],null,!0)},"v-data-table",e.$attrs,!1),e.$listeners))},n=[],r={name:"data-table",computed:{vm:function(){return this}}},a=r,s=t("2877"),i=t("6544"),c=t.n(i),l=t("8336"),u=t("8fea"),d=t("132d"),p=t("9e88"),m=t("3a2f"),E=Object(s["a"])(a,o,n,!1,null,null,null);_["a"]=E.exports;c()(E,{VBtn:l["a"],VDataTable:u["a"],VIcon:d["a"],VSimpleCheckbox:p["a"],VTooltip:m["a"]})},"29ce":function(e,_,t){"use strict";t.r(_);var o=function(){var e=this,_=e.$createElement,t=e._self._c||_;return t("v-container",[t("h1",{staticClass:"headline my-4"},[t("v-icon",{attrs:{size:"30"}},[e._v(e._s(e.collection.icon))]),e._v(" "+e._s(e.collectionTitle)+" ")],1),e.collectionButtons?t("v-toolbar",{class:{"mb-6":!e.filters},attrs:{dense:e.$vuetify.breakpoint.xsOnly,flat:""}},[e._l(e.collectionButtons,(function(_,o){return[_.spacer?t("v-spacer",{key:o}):t("v-btn",e._g(e._b({key:o,staticClass:"mx-1",attrs:{small:e.$vuetify.breakpoint.xsOnly,outlined:""}},"v-btn","function"==typeof _.bind?_.bind(e.vm):_.bind,!1),"function"==typeof _.on?_.on(e.vm):_.on),[_.icon?t("v-icon",[e._v(e._s(_.icon))]):e._e(),e.$vuetify.breakpoint.xsOnly?e._e():t("span",[e._v(" "+e._s(_.title)+" ")])],1)]}))],2):e._e(),e.filters?t("v-row",{staticClass:"white ma-0 mb-6 border-top"},e._l(e.filters,(function(_,o){return t("v-col",{key:o,attrs:{sm:"4"}},[t(e.inputs[_.input],e._g(e._b({ref:_.name,refInFor:!0,tag:"component",staticClass:"mx-1",attrs:{outlined:"",rounded:"",dense:"","hide-details":"",value:e.setFilterValue(e.$route.query[_.name]||null,_)},on:{input:function(t){return e.filter(_,t)}}},"component",_.bind,!1),_.on))],1)})),1):e._e(),e.collection.items.total?t("app-table",{staticClass:"mb-6",attrs:{"hide-default-footer":"","hide-default-header":e.$vuetify.breakpoint.xsOnly,items:e.totals,headers:e.collection.items.total.headers}}):e._e(),t("app-table",{ref:"table",attrs:{"server-items-length":e.serverItemsLength,page:Number(e.$route.query.page)||1,"items-per-page":Number(e.$route.query.limit)||10,"sort-by":e.sortBy,"sort-desc":e.sortDesc,loading:e.loading,headers:e.headers,items:e.items,"footer-props":e.footerProps,"item-key":"_id","multi-sort":"","show-select":""},on:{"update:options":e.updateTable},scopedSlots:e._u([{key:"top",fn:function(_){var o=_.pagination,n=_.options;return[t("v-row",{staticClass:"ma-0   border-top "},[e.selected.length?t("v-col",{staticClass:"pa-0",attrs:{cols:"12",md:"6"}},[t("v-alert",{staticClass:"ma-0"},[t("span",{staticClass:"font-weight-bold"},[e._v("("+e._s(e.selected.length)+") items has been selected")]),t("v-btn",{staticClass:"mx-1",attrs:{text:"",small:"",color:"info",outlined:""},on:{click:function(_){e.selected=[]}}},[e._v(" Unselect All")])],1)],1):e._e(),t("v-col",{staticClass:"pa-0",attrs:{cols:"12",md:e.selected.length?6:12}},[t("v-data-footer",{staticStyle:{"border-top":"0"},attrs:{"items-per-page-options":e.footerProps["items-per-page-options"],pagination:o,options:n},on:{"update:options":e.updateTable}})],1)],1)]}}]),model:{value:e.selected,callback:function(_){e.selected=_},expression:"selected"}}),t("v-dialog",e._g(e._b({model:{value:e.dialog.value,callback:function(_){e.$set(e.dialog,"value",_)},expression:"dialog.value"}},"v-dialog","function"==typeof e.dialog.bind?e.dialog.bind(e.vm):e.dialog.bind,!1),"function"==typeof e.dialog.on?e.dialog.on(e.vm):e.dialog.on),[e.dialog.component?t(e.dialog.component.is||e.dialog.component,e._g(e._b({tag:"component"},"component","function"==typeof e.dialog.component?{}:"function"==typeof e.dialog.component.bind?e.dialog.component.bind(e.vm):e.dialog.component.bind||{},!1),"function"==typeof e.dialog.component.on?e.dialog.component.on(e.vm):e.dialog.component.on)):e._e()],1)],1)},n=[],r=t("1991"),a=r["a"],s=(t("cac3"),t("2877")),i=t("6544"),c=t.n(i),l=t("0798"),u=t("8336"),d=t("62ad"),p=t("a523"),m=t("f41f"),E=t("169a"),f=t("132d"),b=t("0fd9"),D=t("2fa4"),O=t("71d9"),P=Object(s["a"])(a,o,n,!1,null,"c6093bca",null);_["default"]=P.exports;c()(P,{VAlert:l["a"],VBtn:u["a"],VCol:d["a"],VContainer:p["a"],VDataFooter:m["a"],VDialog:E["a"],VIcon:f["a"],VRow:b["a"],VSpacer:D["a"],VToolbar:O["a"]})},7894:function(e,_,t){},"9db7":function(e,_,t){"use strict";var o=function(){var e=this,_=e.$createElement,t=e._self._c||_;return t("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(_){var o=_.on;return[t("v-text-field",e._g(e._b({attrs:{value:e.dateRangeText,readonly:"","hide-details":"",clearable:""},on:{"click:clear":e.clear}},"v-text-field",e.$attrs,!1),o))]}}]),model:{value:e.menu,callback:function(_){e.menu=_},expression:"menu"}},[t("v-date-picker",{attrs:{range:""},on:{input:e.input},model:{value:e.dates,callback:function(_){e.dates=_},expression:"dates"}})],1)},n=[],r=(t("a15b"),{name:"date-picker",props:{value:Array},data:function(){return{menu:!1,dates:[]}},methods:{input:function(e){e.length>1&&(this.menu=!1,this.$emit("input",e))},clear:function(){this.dates=[],this.$emit("input",[])}},computed:{dateRangeText:function(){return this.dates.join(" ~ ")}},created:function(){this.value&&(this.dates=this.value)}}),a=r,s=t("2877"),i=t("6544"),c=t.n(i),l=t("2e4b"),u=t("e449"),d=t("8654"),p=Object(s["a"])(a,o,n,!1,null,null,null);_["a"]=p.exports;c()(p,{VDatePicker:l["a"],VMenu:u["a"],VTextField:d["a"]})},cac3:function(e,_,t){"use strict";var o=t("7894"),n=t.n(o);n.a}}]);
//# sourceMappingURL=chunk-6978b90c.645d006e.js.map