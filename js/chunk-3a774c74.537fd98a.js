(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3a774c74"],{1991:function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("4de4"),core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("4160"),core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("c975"),core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("d81d"),core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_array_splice__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("a434"),core_js_modules_es_array_splice__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_array_splice__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("b0c0"),core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_number_constructor__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("a9e3"),core_js_modules_es_number_constructor__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_number_constructor__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_object_keys__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("b64b"),core_js_modules_es_object_keys__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_object_keys__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("ac1f"),core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("5319"),core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_es_string_search__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("841c"),core_js_modules_es_string_search__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_es_string_search__WEBPACK_IMPORTED_MODULE_10__),core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("159b"),core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_11__),regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("96cf"),regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_12__),C_projects_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("1da1"),C_projects_app_node_modules_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("53ca"),_collections__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("fb57"),_components_DataTable__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("1fdb"),vuetify_lib__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("8654"),vuetify_lib__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("b974"),vuetify_lib__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("b73d"),_components_Autocomplete__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("bb0b"),_components_DatePicker__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("e94a"),_components_DateRange__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("9db7"),jquery__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("1157"),jquery__WEBPACK_IMPORTED_MODULE_23___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_23__),debounce__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("b012"),debounce__WEBPACK_IMPORTED_MODULE_24___default=__webpack_require__.n(debounce__WEBPACK_IMPORTED_MODULE_24__),_utility__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("2e17");__webpack_exports__["a"]={name:"Items",data:function(){return{dialog:{value:!1},loading:!1,serverItemsLength:0,items:[],selected:[],totals:[],props:{},filterExpanded:!1}},components:{AppTable:_components_DataTable__WEBPACK_IMPORTED_MODULE_16__["a"]},computed:{filterHeight:function(){var e=this.$refs.filterWraper?this.$refs.filterWraper.scrollHeight+"px":"auto";return this.filterExpanded?{height:this.$vuetify.breakpoint.xsOnly?e:"auto",overflow:"hidden"}:{height:this.$vuetify.breakpoint.xsOnly?"180px":"auto",overflow:"hidden"}},inputs:function(){return{text:vuetify_lib__WEBPACK_IMPORTED_MODULE_17__["a"],select:vuetify_lib__WEBPACK_IMPORTED_MODULE_18__["a"],switch:vuetify_lib__WEBPACK_IMPORTED_MODULE_19__["a"],date:_components_DatePicker__WEBPACK_IMPORTED_MODULE_21__["a"],range:_components_DateRange__WEBPACK_IMPORTED_MODULE_22__["a"],autocomplete:_components_Autocomplete__WEBPACK_IMPORTED_MODULE_20__["a"]}},vm:function(){return this},collectionName:function(){return this.$route.params.collection},collection:function(){return _collections__WEBPACK_IMPORTED_MODULE_15__["default"].get(this.collectionName)},collectionTitle:function(){return this.collection?this.collection.title.plural||this.collection.title:""},collectionItems:function(){return this.collection.items||{}},collectionButtons:function(){var e=this;return!!this.collectionItems.buttons&&this.collectionItems.buttons.filter((function(_){if(!_.if)return!0;switch(Object(C_projects_app_node_modules_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_14__["a"])(_.if)){case"function":return _.if(e);case"boolean":return _.if;default:return!0}}))},hasButtons:function(){return Boolean(this.collectionButtons&&this.collectionButtons.length)},filters:function(){var e=this;return!!this.collectionItems.filters&&this.collectionItems.filters.filter((function(_){switch(Object(C_projects_app_node_modules_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_14__["a"])(_.if)){case"function":return _.if(e);case"boolean":return _.if;default:return!0}}))},headers:function(){var e=this;if(!this.collection)return[];var _=this.permissions.fields,t=[];if(_){var r=[];Object.keys(_).forEach((function(e){_[e]&&r.push(atob(e))})),t=this.collectionItems.headers.filter((function(_){return-1!==r.indexOf(_.value)||"actions"==_.value&&(e.permissions.write.value||e.permissions.update.value||e.permissions.delete.value)}))}else t=this.collectionItems.headers;return t.filter((function(e){return!e.hide}))},footerProps:function(){var e=[5,10,20,50],_=Number(this.$route.query.limit);return isNaN(_)||-1!=e.indexOf(_)||e.push(_),{"items-per-page-options":e}},sortBy:function(){var e=this.$route.query;return e["sortBy[]"]?Array.isArray(e["sortBy[]"])?e["sortBy[]"]:[e["sortBy[]"]]:void 0},sortDesc:function sortDesc(){var query=this.$route.query;return query["sortDesc[]"]?Array.isArray(query["sortDesc[]"])?query["sortDesc[]"].map((function(e){return eval(e)})):[eval(query["sortDesc[]"])]:void 0}},watch:{"dialog.value":function(e){e||(this.dialog={value:e})},collectionName:function(){this.dialog={value:!1},this.props={},this.selected=[],this.items=[],this.totals=[]},user:{handler:"updateComponent"},$route:{handler:"updateComponent",immediate:!0}},methods:{updateTable:function(e){var _=e.page,t=e.itemsPerPage,r=e.sortBy,o=e.sortDesc,s=Object.assign({},this.$route.query);s["sortBy[]"]&&delete s["sortBy[]"],s["sortDesc[]"]&&delete s["sortDesc[]"];var a=s.page<_;s.page=_,s.limit=t,r.length&&(s.sortBy=r),o.length&&(s.sortDesc=o);var n=this.$route.path+"?"+jquery__WEBPACK_IMPORTED_MODULE_23___default.a.param(s);jquery__WEBPACK_IMPORTED_MODULE_23___default.a.param(s)!=jquery__WEBPACK_IMPORTED_MODULE_23___default.a.param(this.$route.query)&&(a?this.$router.push(n):this.$router.replace(n))},updateComponent:function(){this.collection?this.fetch():this.$router.replace("/404")},fetch:function(){var e=this;return Object(C_projects_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_13__["a"])(regeneratorRuntime.mark((function _(){var t,r,o,s,a;return regeneratorRuntime.wrap((function(_){while(1)switch(_.prev=_.next){case 0:return e.loading=!0,_.next=3,e.get({collection:e.collectionName+window.location.search});case 3:if(t=_.sent,r=t.data,o=r.totalDocs,s=r.docs,e.items=s,e.serverItemsLength=o,!e.collection.items.total){_.next=12;break}return _.next=10,e.get({collection:e.collectionName+"/total"+window.location.search});case 10:a=_.sent,e.totals=a.data;case 12:e.loading=!1;case 13:case"end":return _.stop()}}),_)})))()},setFilterValue:function(e,_){if(_.search&&this.$route.query["orFields[]"]){var t=this.$route.query["orFields[]"],r=this.$route.query["orValues[]"],o=t.indexOf(_.name);e=r[o]}var s=_utility__WEBPACK_IMPORTED_MODULE_25__["a"].filters.getType(_),a=_utility__WEBPACK_IMPORTED_MODULE_25__["a"].filters.setValue(e,s);return a},filter:debounce__WEBPACK_IMPORTED_MODULE_24___default()((function(e,_){var t=Object.assign({},this.$route.query),r=_utility__WEBPACK_IMPORTED_MODULE_25__["a"].filters.getType(e),o=_utility__WEBPACK_IMPORTED_MODULE_25__["a"].filters.getValue(_,r,e.searchOptions);if(t["orFields[]"]&&(t.orFields=Object.assign([],t["orFields[]"]),delete t["orFields[]"]),t["orValues[]"]&&(t.orValues=Object.assign([],t["orValues[]"]),delete t["orValues[]"]),_&&_.length||!t[e.name])if(!e.search||_&&_.length||!t.orFields)e.search&&_?(t.orFields=[e.name],t.orValues=[o],Array.isArray(e.search)?e.search.forEach((function(e){t.orFields.push(e),t.orValues.push(o)})):(t.orFields.push(e.search),t.orValues.push(o))):_&&(t[e.name]=o);else{var s=t.orFields.indexOf(e.name);if(t.orFields.splice(s,1),t.orValues.splice(s,1),Array.isArray(e.search))e.search.forEach((function(e,_){t.orFields.splice(_,1),t.orValues.splice(_,1)}));else{var a=t.orFields.indexOf(e.search);t.orFields.splice(a,1),t.orValues.splice(a,1)}}else delete t[e.name];t.page=1;var n=this.$route.path+"?"+jquery__WEBPACK_IMPORTED_MODULE_23___default.a.param(t);jquery__WEBPACK_IMPORTED_MODULE_23___default.a.param(t)!=jquery__WEBPACK_IMPORTED_MODULE_23___default.a.param(this.$route.query)&&this.$router.replace(n)}),500),getProps:function(e,_){return this.props[_]?Object.assign({},e,this.props[_]):e}}}},"29ce":function(e,_,t){"use strict";t.r(_);var r=function(){var e=this,_=e.$createElement,t=e._self._c||_;return t("v-container",[t("h1",{staticClass:"headline my-4"},[t("v-icon",{attrs:{size:"30"}},[e._v(e._s(e.collection.icon))]),e._v(" "+e._s(e.collectionTitle)+" ")],1),e.hasButtons?t("v-toolbar",{class:{"mb-6":!e.filters},attrs:{dense:e.$vuetify.breakpoint.xsOnly,flat:""}},[e._l(e.collectionButtons,(function(_,r){return[_.spacer?t("v-spacer",{key:r}):t("v-btn",e._g(e._b({key:r,staticClass:"mx-1",attrs:{small:e.$vuetify.breakpoint.xsOnly,outlined:""}},"v-btn","function"==typeof _.bind?_.bind(e.vm):_.bind,!1),"function"==typeof _.on?_.on(e.vm):_.on),[_.icon?t("v-icon",[e._v(e._s(_.icon))]):e._e(),e.$vuetify.breakpoint.xsOnly?e._e():t("span",[e._v(" "+e._s(_.title)+" ")])],1)]}))],2):e._e(),e.filters?t("div",{staticStyle:{position:"relative"}},[t("v-row",{ref:"filterWraper",class:["white","ma-0","mb-6",{"border-top":e.hasButtons},"pb-3","transition"],style:e.filterHeight},[t("v-col",{staticClass:"py-0",attrs:{cols:"12"}},[t("small",{staticClass:"font-weight-bold"},[t("v-icon",{attrs:{size:"20"}},[e._v("mdi-filter")]),e._v(" Filters")],1)]),e._l(e.filters,(function(_,r){return t("v-col",e._b({key:r,attrs:{cols:"12"}},"v-col",_.col,!1),[t(e.inputs[_.input],e._g(e._b({tag:"component",staticClass:"mx-1",attrs:{outlined:"",rounded:"",dense:"","hide-details":"",value:e.setFilterValue(e.$route.query[_.name]||null,_),clearable:"","server-value":""},on:{input:function(t){return e.filter(_,t)}}},"component",e.getProps("function"==typeof _.bind?_.bind(e.vm):_.bind,"filter_"+e.collectionName+"_"+_.name),!1),"function"==typeof _.on?_.on(e.vm):_.on))],1)}))],2),e.$vuetify.breakpoint.xsOnly&&!e.filterExpanded&&e.filters.length>2?t("div",{staticClass:"mask"}):e._e(),e.$vuetify.breakpoint.xsOnly&&e.filters.length>2?t("v-btn",{attrs:{elevation:"2",small:"",fab:"",absolute:"",bottom:"",right:"",color:"primary"},on:{click:function(_){e.filterExpanded=!e.filterExpanded}}},[t("v-icon",[e._v(" "+e._s(e.filterExpanded?"mdi-chevron-up":"mdi-chevron-down"))])],1):e._e()],1):e._e(),e.collection&&e.collection.items.total?t("app-table",{staticClass:"mb-6",attrs:{"hide-default-footer":"","hide-default-header":e.$vuetify.breakpoint.xsOnly,items:e.totals,headers:e.collection.items.total.headers}}):e._e(),t("app-table",{ref:"table",attrs:{"server-items-length":e.serverItemsLength,page:Number(e.$route.query.page)||1,"items-per-page":Number(e.$route.query.limit)||10,"sort-by":e.sortBy,"sort-desc":e.sortDesc,loading:e.loading,headers:e.headers,items:e.items,"footer-props":e.footerProps,"item-key":"_id","multi-sort":"","show-select":e.hasButtons},on:{"update:options":e.updateTable},scopedSlots:e._u([{key:"top",fn:function(_){var r=_.pagination,o=_.options;return[t("v-row",{staticClass:"ma-0   border-top "},[e.selected.length?t("v-col",{staticClass:"pa-0",attrs:{cols:"12",md:"6"}},[t("v-alert",{staticClass:"ma-0"},[t("span",{staticClass:"font-weight-bold"},[e._v("("+e._s(e.selected.length)+") items has been selected")]),t("v-btn",{staticClass:"mx-1",attrs:{text:"",small:"",color:"info",outlined:""},on:{click:function(_){e.selected=[]}}},[e._v(" Unselect All")])],1)],1):e._e(),t("v-col",{staticClass:"pa-0",attrs:{cols:"12",md:e.selected.length?6:12}},[t("v-data-footer",{staticStyle:{"border-top":"0"},attrs:{"items-per-page-options":e.footerProps["items-per-page-options"],pagination:r,options:o},on:{"update:options":e.updateTable}})],1)],1)]}}]),model:{value:e.selected,callback:function(_){e.selected=_},expression:"selected"}}),t("v-dialog",e._g(e._b({model:{value:e.dialog.value,callback:function(_){e.$set(e.dialog,"value",_)},expression:"dialog.value"}},"v-dialog","function"==typeof e.dialog.bind?e.dialog.bind(e.vm):e.dialog.bind,!1),"function"==typeof e.dialog.on?e.dialog.on(e.vm):e.dialog.on),[e.dialog.component?t(e.dialog.component.is||e.dialog.component,e._g(e._b({tag:"component"},"component","function"==typeof e.dialog.component?{}:"function"==typeof e.dialog.component.bind?e.dialog.component.bind(e.vm):e.dialog.component.bind||{},!1),"function"==typeof e.dialog.component.on?e.dialog.component.on(e.vm):e.dialog.component.on)):e._e()],1)],1)},o=[],s=t("1991"),a=s["a"],n=(t("f33e"),t("2877")),i=t("6544"),l=t.n(i),c=t("0798"),u=t("8336"),d=t("62ad"),p=t("a523"),E=t("f41f"),f=t("169a"),m=t("132d"),O=t("0fd9"),b=t("2fa4"),D=t("71d9"),h=Object(n["a"])(a,r,o,!1,null,"b7eb6308",null);_["default"]=h.exports;l()(h,{VAlert:c["a"],VBtn:u["a"],VCol:d["a"],VContainer:p["a"],VDataFooter:E["a"],VDialog:f["a"],VIcon:m["a"],VRow:O["a"],VSpacer:b["a"],VToolbar:D["a"]})},"2b29":function(e,_,t){},"9db7":function(e,_,t){"use strict";var r=function(){var e=this,_=e.$createElement,t=e._self._c||_;return t("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(_){var r=_.on;return[t("v-text-field",e._g(e._b({attrs:{value:e.dateRangeText,readonly:"","hide-details":"",clearable:""},on:{"click:clear":e.clear}},"v-text-field",e.$attrs,!1),r))]}}]),model:{value:e.menu,callback:function(_){e.menu=_},expression:"menu"}},[t("v-date-picker",{attrs:{range:""},on:{input:e.input},model:{value:e.dates,callback:function(_){e.dates=_},expression:"dates"}})],1)},o=[],s=(t("a15b"),{name:"date-picker",props:{value:Array},data:function(){return{menu:!1,dates:[]}},methods:{input:function(e){e.length>1&&(this.menu=!1,this.$emit("input",e))},clear:function(){this.dates=[],this.$emit("input",[])}},computed:{dateRangeText:function(){return this.dates.join(" ~ ")}},created:function(){this.value&&(this.dates=this.value)}}),a=s,n=t("2877"),i=t("6544"),l=t.n(i),c=t("2e4b"),u=t("e449"),d=t("8654"),p=Object(n["a"])(a,r,o,!1,null,null,null);_["a"]=p.exports;l()(p,{VDatePicker:c["a"],VMenu:u["a"],VTextField:d["a"]})},e94a:function(e,_,t){"use strict";var r=function(){var e=this,_=e.$createElement,t=e._self._c||_;return t("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(_){var r=_.on;return[t("v-text-field",e._g(e._b({attrs:{readonly:"",value:e.getValue,clearable:""},on:{"click:clear":function(_){return e.input("")}}},"v-text-field",e.$attrs,!1),r))]}}]),model:{value:e.menu,callback:function(_){e.menu=_},expression:"menu"}},[t("v-date-picker",{attrs:{value:e.getValue},on:{input:e.input}})],1)},o=[],s=(t("ac1f"),t("1276"),{name:"date-picker",props:{value:String},data:function(){return{menu:!1}},computed:{getValue:function(){return this.value?this.value.split("T")[0]:this.value}},methods:{input:function(e){this.menu=!1,this.$emit("input",e)}}}),a=s,n=t("2877"),i=t("6544"),l=t.n(i),c=t("2e4b"),u=t("e449"),d=t("8654"),p=Object(n["a"])(a,r,o,!1,null,null,null);_["a"]=p.exports;l()(p,{VDatePicker:c["a"],VMenu:u["a"],VTextField:d["a"]})},f33e:function(e,_,t){"use strict";var r=t("2b29"),o=t.n(r);o.a}}]);
//# sourceMappingURL=chunk-3a774c74.537fd98a.js.map