(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-066d82d2"],{"90c8":function(e,t,a){},ca47:function(e,t,a){"use strict";var r=a("90c8"),n=a.n(r);n.a},f0df:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-col",[e.found?a("v-card",{attrs:{flat:""}},[a("v-card-title",[e._v(" "+e._s(e.title)+" ")]),a("v-card-text",[e.tabs.length>1?a("v-tabs",{attrs:{"center-active":""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.tabs,(function(t,r){return a("v-tab",{key:r},[e._v(" "+e._s(t)+" ")])})),1):e._e(),a("v-form",{ref:"form"},[e.loading?e._e():a("v-tabs-items",{attrs:{"center-active":""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.tabs,(function(t,r){return a("v-tab-item",{key:r,staticClass:"px-5"},e._l(e.fields,(function(t,r){return a("v-row",{key:r},[a(e.inputs[t.input],e._g(e._b({ref:e.$route.params.collection+"_"+t.name,refInFor:!0,tag:"component",model:{value:e.data[t.name],callback:function(a){e.$set(e.data,t.name,a)},expression:"data[field.name]"}},"component",t.bind,!1),t.on))],1)})),1)})),1)],1)],1)],1):a("v-not-found"),a("br"),a("v-toolbar",{staticClass:"bottom-toolbar",attrs:{width:"100%"}},[!e.isNew&&e.updateAccess?a("v-btn",{staticClass:"mr-4",attrs:{color:"primary"},on:{click:e.validate}},[e._v(" Update ")]):e._e(),e.isNew&&e.writeAccess?a("v-btn",{staticClass:"mr-4",attrs:{color:"primary"},on:{click:e.validate}},[e._v(" Save ")]):e._e(),e.isNew?a("v-btn",{staticClass:"mr-4",attrs:{color:"success"},on:{click:function(t){return e.validate(t,!0)}}},[e._v(" Save and new ")]):e._e(),a("v-spacer"),!e.isNew&&"user"!==e.$route.params.collection&&e.deleteAccess?a("v-btn",{staticClass:"mr-4 white--text",attrs:{color:"red"},on:{click:e.removeItem}},[e._v(" Delete ")]):e._e(),a("v-btn",{staticClass:"mr-4",on:{click:function(t){return e.$router.push("/"+e.$route.params.collection)}}},[e._v(" Cancel ")])],1)],1)},n=[],s=(a("4de4"),a("4160"),a("d81d"),a("b0c0"),a("ac1f"),a("1276"),a("159b"),a("96cf"),a("1da1")),c=a("5530"),o=a("8654"),i=a("b974"),u=a("b73d"),l=a("bb0b"),d=a("1b5f"),m=a("e94a"),f=a("d6a0"),p=a("2f62"),b=a("fb57"),v={name:"Item",data:function(){return{loading:!1,collection:null,tab:0,form:null,found:!0,title:"",data:{},inputs:{text:o["a"],select:i["a"],switch:u["a"],date:m["a"],autocomplete:l["a"],password:d["a"],rights:f["a"]}}},computed:{tabs:function(){return this.form?this.form.map((function(e){return e.label})):[]},fields:function(){return this.form?this.form[this.tab].fields:[]},isNew:function(){return!this.$route.params.id},access:function(){var e=this;return this.$store.state.auth.user.rights?this.$store.state.auth.user.rights.filter((function(t){return t.value==e.$route.params.collection})):[]},updateAccess:function(){return this.access.length>0&&this.access[0].update},writeAccess:function(){return this.access.length>0&&this.access[0].write},deleteAccess:function(){return this.access.length>0&&this.access[0].delete}},methods:Object(c["a"])(Object(c["a"])({},Object(p["b"])({getItem:"api/getById",save:"api/save",remove:"api/remove",update:"api/update",success:"success"})),{},{removeItem:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$confirm("Are you sure do you want to delete this item ?",{title:"Warning"});case 2:if(a=t.sent,!a){t.next=8;break}return t.next=6,e.remove({collection:e.$route.params.collection,id:e.$route.params.id});case 6:e.$router.push("/"+e.$route.params.collection),e.$store.commit("success",e.title+" deleted successfuly");case 8:case"end":return t.stop()}}),t)})))()},generateDataInputs:function(e,t){var a={};e.forEach((function(e){e.fields.forEach((function(e){if("password"==e.name)return a[e.name]="";"date"==e.input&&t[e.name]&&(t[e.name]=t[e.name].split("T")[0]),a[e.name]=t[e.name]?t[e.name]:e.default||""}))})),this.data=a},validate:function(e){var t=arguments,a=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r,n,s,c,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.length>1&&void 0!==t[1]&&t[1],n=a.data,s=a.collection,c=a.title,!a.$refs.form.validate()){e.next=16;break}if(!a.isNew){e.next=9;break}return e.next=6,a.save({collection:s,data:n});case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,a.update({collection:s,data:n,id:a.$route.params.id});case 11:e.t0=e.sent;case 12:o=e.t0,o&&(a.$store.commit("success",c+(a.isNew?" saved":" updated")+" successfuly"),r?a.isNew?(console.log("new"),a.generateDataInputs(a.form,{}),a.$refs.form.resetValidation()):a.$router.push("/"+a.$route.params.collection+"/new"):a.$router.push("/"+a.$route.params.collection)),e.next=17;break;case 16:a.$store.commit("error","form not valid");case 17:case"end":return e.stop()}}),e)})))()}}),mounted:function(){window.$form=this},destroyed:function(){window.$form=null},created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=b["default"].get(e.$route.params.collection),e.collection=e.$route.params.collection,!a){t.next=17;break}if(e.title=a.title,e.form=a.form,r={},!e.$route.params.id&&!e.$route.query.clone){t.next=14;break}return n=e.$route.params.id||e.$route.query.clone,e.loading=!0,t.next=11,e.getItem({collection:e.$route.params.collection,id:n});case 11:s=t.sent,r=s.data,e.loading=!1;case 14:e.generateDataInputs(e.form,r),t.next=18;break;case 17:e.found=!1;case 18:case"end":return t.stop()}}),t)})))()}},h=v,w=(a("ca47"),a("2877")),$=a("6544"),g=a.n($),k=a("8336"),x=a("b0af"),_=a("99d9"),V=a("62ad"),y=a("4bd4"),C=a("0fd9"),I=a("2fa4"),N=a("71a3"),T=a("c671"),j=a("fe57"),A=a("aac8"),O=a("71d9"),R=Object(w["a"])(h,r,n,!1,null,null,null);t["default"]=R.exports;g()(R,{VBtn:k["a"],VCard:x["a"],VCardText:_["d"],VCardTitle:_["e"],VCol:V["a"],VForm:y["a"],VRow:C["a"],VSpacer:I["a"],VTab:N["a"],VTabItem:T["a"],VTabs:j["a"],VTabsItems:A["a"],VToolbar:O["a"]})}}]);
//# sourceMappingURL=chunk-066d82d2.0f6f0d39.js.map