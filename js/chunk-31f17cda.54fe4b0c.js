(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-31f17cda"],{"3f9a":function(t,a,e){"use strict";var o=e("a920"),l=e.n(o);l.a},7277:function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-content",{staticClass:"pa-0 ma-0"},[e("v-row",[e("v-col",[e("app-panel",{attrs:{title:"Today revenue",count:t.total.today.ftd,amount:t.total.today.amount}})],1),e("v-col",[e("app-panel",{attrs:{title:"This month revenue",count:t.total.month.ftd,amount:t.total.month.amount}})],1)],1),e("v-row",[e("app-total-sheet",{attrs:{title:"English",items:[{title:"Sales",ftd:t.totalMonth.sales.en.ftd,total:t.totalMonth.sales.en.total},{title:"Retentions",ftd:t.totalMonth.retention.en.ftd,total:t.totalMonth.retention.en.total},{title:"Total today",ftd:t.totalToday.sales.en.ftd+t.totalToday.retention.en.ftd,total:t.totalToday.sales.en.total+t.totalToday.retention.en.total},{title:"Total this month",ftd:t.totalMonth.sales.en.ftd+t.totalMonth.retention.en.ftd,total:t.totalMonth.sales.en.total+t.totalMonth.retention.en.total}],items2:[{title:"Sales",ftd:t.totalToday.sales.en.ftd,total:t.totalToday.sales.en.total},{title:"Retentions",ftd:t.totalToday.retention.en.ftd,total:t.totalToday.retention.en.total},{title:"Total",ftd:t.totalToday.sales.en.ftd+t.totalToday.retention.en.ftd,total:t.totalToday.sales.en.total+t.totalToday.retention.en.total}]},on:{table:function(a){return t.showTable("en")}}})],1),e("v-row",[e("app-total-sheet",{attrs:{title:"Arabic",items:[{title:"Sales",ftd:t.totalMonth.sales.ar.ftd,total:t.totalMonth.sales.ar.total},{title:"Retentions",ftd:t.totalMonth.retention.ar.ftd,total:t.totalMonth.retention.ar.total},{title:"Total today",ftd:t.totalToday.sales.ar.ftd+t.totalToday.retention.ar.ftd,total:t.totalToday.sales.ar.total+t.totalToday.retention.ar.total},{title:"Total this month",ftd:t.totalMonth.sales.ar.ftd+t.totalMonth.retention.ar.ftd,total:t.totalMonth.sales.ar.total+t.totalMonth.retention.ar.total}],items2:[{title:"Sales",ftd:t.totalToday.sales.ar.ftd,total:t.totalToday.sales.ar.total},{title:"Retentions",ftd:t.totalToday.retention.ar.ftd,total:t.totalToday.retention.ar.total},{title:"Total",ftd:t.totalToday.sales.ar.ftd+t.totalToday.retention.ar.ftd,total:t.totalToday.sales.ar.total+t.totalToday.retention.ar.total}]},on:{table:function(a){return t.showTable("ar")}}})],1),e("v-row",[e("app-total-sheet",{attrs:{title:"Label1",items:[{title:"Sales",ftd:t.totalMonth.sales.lb.ftd,total:t.totalMonth.sales.lb.total},{title:"Retentions",ftd:t.totalMonth.retention.lb.ftd,total:t.totalMonth.retention.lb.total},{title:"Total today",ftd:t.totalToday.sales.lb.ftd+t.totalToday.retention.lb.ftd,total:t.totalToday.sales.lb.total+t.totalToday.retention.lb.total},{title:"Total this month",ftd:t.totalMonth.sales.lb.ftd+t.totalMonth.retention.lb.ftd,total:t.totalMonth.sales.lb.total+t.totalMonth.retention.lb.total}],items2:[{title:"Sales",ftd:t.totalToday.sales.lb.ftd,total:t.totalToday.sales.lb.total},{title:"Retentions",ftd:t.totalToday.retention.lb.ftd,total:t.totalToday.retention.lb.total},{title:"Total",ftd:t.totalToday.sales.lb.ftd+t.totalToday.retention.lb.ftd,total:t.totalToday.sales.lb.total+t.totalToday.retention.lb.total}]},on:{table:function(a){return t.showTable("label1")}}})],1),e("v-dialog",{attrs:{"max-width":"950px"},model:{value:t.dialog,callback:function(a){t.dialog=a},expression:"dialog"}},[e("v-card",[e("v-card-title",[t._v(" "+t._s(t.dialogTitle)+" "),e("v-spacer")],1),e("v-card-text",[e("v-tabs",{attrs:{grow:""},model:{value:t.tab,callback:function(a){t.tab=a},expression:"tab"}},[e("v-tab",[t._v("Sales")]),e("v-tab",[t._v("Retentions")])],1),t.dialog?e("v-data-table",{staticClass:"elevation-1",attrs:{dense:"",headers:t.headers,items:t.tab?t.items.rts:t.items.sales,"multi-sort":""},scopedSlots:t._u([{key:"item._id",fn:function(a){var e=a.item;return[t._v(" "+t._s((new Intl.DateTimeFormat).format(new Date(e._id)))+" ")]}},{key:"item.amount",fn:function(a){var e=a.item;return[t._v(" "+t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e.amount))+" ")]}}],null,!1,665085693)}):t._e()],1)],1)],1)],1)},l=[],n=(e("99af"),e("4160"),e("159b"),e("96cf"),e("1da1")),s=e("5530"),r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-card",{attrs:{flat:"",color:"green white--text lighten-2"}},[e("v-card-title",{staticClass:"pb-0"},[t._v(t._s(t.title))]),e("v-card-text",[e("v-row",[e("v-col",{staticClass:" white--text",attrs:{cols:"3"}},[e("small",[t._v("Deals")]),e("h1",[t._v(t._s(t.count))])]),e("v-col",{staticClass:" white--text"},[e("small",[t._v("Amount")]),e("h1",[t._v(t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t.amount)))])])],1)],1)],1)},i=[],d=(e("a9e3"),{name:"Panel",props:{title:String,count:Number,amount:Number}}),c=d,u=e("2877"),f=e("6544"),m=e.n(f),b=e("b0af"),h=e("99d9"),y=e("62ad"),v=e("0fd9"),T=Object(u["a"])(c,r,i,!1,null,null,null),p=T.exports;m()(T,{VCard:b["a"],VCardText:h["d"],VCardTitle:h["e"],VCol:y["a"],VRow:v["a"]});var _=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-sheet",{staticClass:" mb-3 mx-3 ",attrs:{color:t.color,width:"100%"}},[e("v-toolbar",{attrs:{dense:"",flat:"",color:t.color}},[e("v-toolbar-title",{staticClass:"title"},[t._v(t._s(t.title))]),e("v-spacer"),e("v-btn",{attrs:{icon:""},on:{click:function(a){return t.$emit("table")}}},[e("v-icon",[t._v("mdi-table-multiple")])],1)],1),e("v-row",{staticClass:"mx-1"},t._l("month"==t.selected?t.items:t.items2,(function(a,o){return e("v-col",{key:o,staticClass:"mx-2 pa-0 px-2"},[e("fieldset",{staticClass:"px-2 mb-2 fielset"},[e("legend",[t._v(t._s(a.title))]),e("v-row",[e("v-col",{attrs:{cols:"3"}},[e("small",[t._v("Deals")]),e("h2",[t._v(t._s(a.ftd||0))])]),e("v-col",[e("small",[t._v("Total")]),e("h2",[t._v(t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a.total||0)))])])],1)],1)])})),1)],1)},w=[],g={name:"TotalSheet",props:{title:String,items:Array,items2:Array,color:{type:String,default:"green lighten-3"}},data:function(){return{selected:"month"}}},x=g,M=(e("3f9a"),e("8336")),S=e("132d"),A=e("8dd9"),V=e("2fa4"),k=e("71d9"),C=e("2a7f"),D=Object(u["a"])(x,_,w,!1,null,"0e4e0c2a",null),R=D.exports;m()(D,{VBtn:M["a"],VCol:y["a"],VIcon:S["a"],VRow:v["a"],VSheet:A["a"],VSpacer:V["a"],VToolbar:k["a"],VToolbarTitle:C["c"]});var O=e("2f62"),j=new Date,E={name:"Dashboard",components:{AppPanel:p,AppTotalSheet:R},data:function(){return{range:{start:new Date(j.getFullYear(),j.getMonth(),1),end:new Date},dialog:!1,dialogTitle:"",tab:0,items:{rts:[],sales:[]},headers:[{text:"Created Date",align:"start",value:"_id"},{text:"Deals",value:"count"},{text:"Amount",value:"amount"}],totalMonth:{sales:{en:{ftd:0,total:0},ar:{ftd:0,total:0},lb:{ftd:0,total:0}},retention:{en:{ftd:0,total:0},ar:{ftd:0,total:0},lb:{ftd:0,total:0}}},totalToday:{sales:{en:{ftd:0,total:0},ar:{ftd:0,total:0},lb:{ftd:0,total:0}},retention:{en:{ftd:0,total:0},ar:{ftd:0,total:0},lb:{ftd:0,total:0}}},total:{today:{ftd:0,amount:0},month:{ftd:0,amount:0}}}},computed:Object(s["a"])({},Object(O["d"])({io:function(t){return t.api.io}})),methods:Object(s["a"])(Object(s["a"])({},Object(O["b"])({get:"api/get",snackbarOpen:"snackbar/open"})),{},{showTable:function(t){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var o,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:e.t0=t,e.next="ar"===e.t0?3:"label1"===e.t0?5:7;break;case 3:return a.dialogTitle="Arabic",e.abrupt("break",9);case 5:return a.dialogTitle="Label1",e.abrupt("break",9);case 7:return a.dialogTitle="English",e.abrupt("break",9);case 9:return console.log(t),a.dialog=!0,e.next=13,a.get({collection:"dashboard/table",query:{business_unit:t}});case 13:o=e.sent,l=o.data,console.log(l),a.items=l,console.log();case 18:case"end":return e.stop()}}),e)})))()},update:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var e,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.get({collection:"dashboard/month"});case 2:return e=a.sent,a.next=5,t.get({collection:"dashboard/today"});case 5:o=a.sent,e&&200==e.status&&(t.total.month.ftd=(e.data.rtsAll[0]?e.data.rtsAll[0].count:0)+(e.data.salesAll[0]?e.data.salesAll[0].count:0),t.total.month.amount=(e.data.rtsAll[0]?e.data.rtsAll[0].amount:0)+(e.data.salesAll[0]?e.data.salesAll[0].amount:0),e.data.sales.forEach((function(a){t.totalMonth.sales[a._id].ftd=a.count,t.totalMonth.sales[a._id].total=a.amount})),e.data.rts.forEach((function(a){t.totalMonth.retention[a._id].ftd=a.count,t.totalMonth.retention[a._id].total=a.amount}))),o&&200==o.status&&(t.total.today.ftd=(o.data.rtsAll[0]?o.data.rtsAll[0].count:0)+(o.data.salesAll[0]?o.data.salesAll[0].count:0),t.total.today.amount=(o.data.rtsAll[0]?o.data.rtsAll[0].amount:0)+(o.data.salesAll[0]?o.data.salesAll[0].amount:0),o.data.sales.forEach((function(a){t.totalToday.sales[a._id].ftd=a.count,t.totalToday.sales[a._id].total=a.amount})),o.data.rts.forEach((function(a){t.totalToday.retention[a._id].ftd=a.count,t.totalToday.retention[a._id].total=a.amount})));case 8:case"end":return a.stop()}}),a)})))()},notefy:function(t){switch(t.type){case"new_sale":this.snackbarOpen(["New (".concat(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t.amount),") Sale has been made by ").concat(t.user),"white black--text","right","bottom"]),this.update();break;default:break}console.log(t)}}),created:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.update(),t.io.on("notefy",t.notefy);case 2:case"end":return a.stop()}}),a)})))()},destroyed:function(){this.io.off("notefy",this.notefy)}},U=E,N=e("a75b"),F=e("8fea"),I=e("169a"),$=e("71a3"),J=e("fe57"),L=Object(u["a"])(U,o,l,!1,null,null,null);a["default"]=L.exports;m()(L,{VCard:b["a"],VCardText:h["d"],VCardTitle:h["e"],VCol:y["a"],VContent:N["a"],VDataTable:F["a"],VDialog:I["a"],VRow:v["a"],VSpacer:V["a"],VTab:$["a"],VTabs:J["a"]})},a920:function(t,a,e){}}]);
//# sourceMappingURL=chunk-31f17cda.54fe4b0c.js.map