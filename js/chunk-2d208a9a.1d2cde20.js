(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d208a9a"],{a66e:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-content",{staticClass:"ma-0 pa-0"},[a("v-sheet",{attrs:{color:"blue lighten-5 px-4 py-9"}},[a("h2",[t._v(' Welcome back "'+t._s(t.$store.state.auth.user.displayName)+'"')])]),a("v-row",[a("v-col",[a("app-panel",{attrs:{title:"Today",count:t.total.daily.count,amount:t.total.daily.amount}})],1),a("v-col",[a("app-panel",{attrs:{title:"This month",count:t.total.monthly.count,amount:t.total.monthly.amount}})],1)],1),a("v-row",[a("v-col",[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[t._v(" Today deposits ")]),a("v-spacer"),t.saleWrite?a("v-btn",{attrs:{color:"green white--text mx-2"},on:{click:function(e){return t.$router.push("/sale/new")}}},[a("v-icon",[t._v("mdi-plus")]),t._v(" New sale deposit")],1):t._e(),t.retentionWrite?a("v-btn",{attrs:{color:"green white--text mx-2"},on:{click:function(e){return t.$router.push("/retention/new")}}},[a("v-icon",[t._v("mdi-plus")]),t._v("New retention deposit")],1):t._e()],1),a("v-data-table",{attrs:{headers:t.headers,items:t.items},on:{"click:row":function(e){return t.goTo("today",e)}},scopedSlots:t._u([{key:"item.created_on",fn:function(e){var a=e.item;return[t._v(" "+t._s(a.created_on.split("T")[0])+" ")]}},{key:"item.amount",fn:function(e){var a=e.item;return[t._v(" "+t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a.amount))+" ")]}}])})],1)],1),a("v-row",[a("v-col",[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[t._v(" This month deposits ")])],1),a("v-data-table",{attrs:{headers:t.mheaders,items:t.mitems},on:{"click:row":function(e){return t.goTo("month",e)}},scopedSlots:t._u([{key:"item._id",fn:function(e){var a=e.item;return[t._v(" "+t._s(a._id.split("T")[0])+" ")]}},{key:"item.amount",fn:function(e){var a=e.item;return[t._v(" "+t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a.amount))+" ")]}}])})],1)],1)],1)},r=[],o=(a("4de4"),a("c975"),a("96cf"),a("1da1")),s=a("5530"),i=a("2f62"),u=a("1dde3"),l=a("fb57"),c=a("1157"),d=a.n(c),m={name:"UserDashboard",components:{AppPanel:u["a"]},data:function(){return{headers:[],items:[],mheaders:[{text:"Date",align:"start",value:"_id",width:"30%"},{text:"Users",value:"count",width:"30%"},{text:"Total",value:"amount"}],mitems:[],total:{daily:{amount:0,count:0},monthly:{amount:0,count:0}},dialog:{value:!1,title:"",collection:"sale"}}},computed:{retentionRead:function(){var t=this.access("retention");return!!t[0]&&t[0].read},saleRead:function(){var t=this.access("sale");return!!t[0]&&t[0].read},retentionWrite:function(){var t=this.access("retention");return!!t[0]&&t[0].write},saleWrite:function(){var t=this.access("sale");return!!t[0]&&t[0].write}},methods:Object(s["a"])(Object(s["a"])({},Object(i["b"])({get:"api/get"})),{},{goTo:function(t,e){if("today"==t&&this.$router.push("/"+e.type+"/"+e._id),"month"==t){var a={filterBy:["user","created_on"],filterValue:[this.$store.state.auth.user._id,e._id],filterType:["normal","normal"],filterCast:["id","date"],sortBy:["created_on"],sortDesc:[!1]},n=this.retentionRead?"retention":!!this.saleRead&&"sale";n&&this.$router.push("/"+n+"?"+d.a.param(a))}},writeAccess:function(t){var e=this.access(t);return e.length>0&&e[0].write},access:function(t){return this.$store.state.auth.user.rights?this.$store.state.auth.user.rights.filter((function(e){return e.value==t})):[]},openDialog:function(t){this.dialog.title=t,this.dialog.collection=t,this.dialog.value=!0},newSave:function(){this.dialog.value=!1}}),created:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,n,r,o,s,i,u,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=new Date,a.setHours(0,0,0,0),n=new Date(a.getFullYear(),a.getMonth(),1),e.next=5,t.get({collection:"dashboard/total",query:{query:{user:{type:"normal",value:t.$store.state.auth.user._id,cast:"id"},created_on:{type:"gte",value:a.getTime(),cast:"date"}}}});case 5:return r=e.sent,e.next=8,t.get({collection:"dashboard/total",query:{query:{user:{type:"normal",value:t.$store.state.auth.user._id,cast:"id"},created_on:{type:"gte",value:n.getTime(),cast:"date"}}}});case 8:return o=e.sent,r&&r.data&&(t.total.daily.amount=r.data.length?r.data[0].amount:0,t.total.daily.count=r.data.length?r.data[0].count:0),o&&o.data&&(t.total.monthly.amount=o.data.length?o.data[0].amount:0,t.total.monthly.count=o.data.length?o.data[0].count:0),s=l["default"].get("sale"),t.headers=Object.assign([],s.table),t.headers=t.headers.filter((function(t){return-1===["actions","business_unit","user.displayName"].indexOf(t.value)})),i=new Date,i.setHours(0,0,0,0),e.next=18,t.get({collection:"deposit",query:{query:{user:{type:"normal",value:t.$store.state.auth.user._id},created_on:{type:"gte",value:i}},limit:10}});case 18:return u=e.sent,u&&u.data&&(t.items=u.data.docs),e.next=22,t.get({collection:"dashboard/user_monthly_deals"});case 22:c=e.sent,c&&c.data&&(t.mitems=c.data);case 24:case"end":return e.stop()}}),e)})))()}},h=m,v=a("2877"),p=a("6544"),f=a.n(p),y=a("8336"),_=a("62ad"),g=a("a75b"),w=a("8fea"),b=a("132d"),T=a("0fd9"),x=a("8dd9"),k=a("2fa4"),$=a("71d9"),V=a("2a7f"),D=Object(v["a"])(h,n,r,!1,null,null,null);e["default"]=D.exports;f()(D,{VBtn:y["a"],VCol:_["a"],VContent:g["a"],VDataTable:w["a"],VIcon:b["a"],VRow:T["a"],VSheet:x["a"],VSpacer:k["a"],VToolbar:$["a"],VToolbarTitle:V["c"]})}}]);
//# sourceMappingURL=chunk-2d208a9a.1d2cde20.js.map