(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-69886368"],{"1f50":function(t,e,a){"use strict";var n=a("840e"),r=a.n(n);r.a},7277:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-row",{staticClass:"mb-6"},[a("v-col",{attrs:{cols:"xs"==t.$vuetify.breakpoint.name?12:6}},[a("total-panel",{attrs:{title:"Today",count:t.totals.today.count,amount:t.totals.today.amount}})],1),a("v-col",{attrs:{cols:"xs"==t.$vuetify.breakpoint.name?12:6}},[a("total-panel",{attrs:{title:"This month",count:t.totals.month.count,amount:t.totals.month.amount}})],1)],1),t.isAdmin?a("v-row",t._l(t.businesses,(function(t){return a("total-sheet",{key:t._id,attrs:{title:t.name,id:t._id}})})),1):t._e(),t.isAdmin?t._e():a("v-row",[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[t._v(" FTDs ")]),a("v-spacer")],1),a("v-data-table",{attrs:{headers:t.headers,items:t.ftds},on:{"click:row":function(e){return t.$router.push("/deposit/new?clone="+e._id+"&fields=customer&fields=payment_method")}},scopedSlots:t._u([{key:"item.created_on",fn:function(e){var a=e.item;return[t._v(" "+t._s(a.created_on.split("T")[0])+" ")]}},{key:"item.amount",fn:function(e){var a=e.item;return[t._v(" "+t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a.amount))+" ")]}}],null,!1,1898337705)})],1),a("v-divider",{staticClass:"my-6"}),t.isAdmin?t._e():a("v-row",[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[t._v(" Today deposits ")]),a("v-spacer"),a("v-btn",{attrs:{color:"green white--text mx-2"},on:{click:function(e){return t.$router.push("/deposit/new")}}},[a("v-icon",[t._v("mdi-plus")]),t._v(" New deposit")],1)],1),a("v-data-table",{attrs:{headers:t.headers,items:t.deposits},on:{"click:row":function(e){return t.$router.push("/deposit/"+e._id)}},scopedSlots:t._u([{key:"item.created_on",fn:function(e){var a=e.item;return[t._v(" "+t._s(a.created_on.split("T")[0])+" ")]}},{key:"item.amount",fn:function(e){var a=e.item;return[t._v(" "+t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a.amount))+" ")]}}],null,!1,1898337705)})],1),a("v-divider",{staticClass:"my-6"}),t.isAdmin?t._e():a("v-row",[a("v-data-table",{staticStyle:{width:"100%"},attrs:{headers:t.mheaders,items:t.mdeposits},on:{"click:row":t.goTo},scopedSlots:t._u([{key:"item._id.date",fn:function(e){var a=e.item;return[t._v(" "+t._s(a._id.date.split("T")[0])+" ")]}},{key:"item.amount",fn:function(e){var a=e.item;return[t._v(" "+t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a.amount))+" ")]}}],null,!1,1672155689)})],1)],1)},r=[],o=(a("4de4"),a("96cf"),a("1da1")),s=a("5530"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{flat:"",color:"green white--text lighten-2",elevation:"1"}},[a("v-card-title",{staticClass:"pb-0"},[t._v(t._s(t.title))]),a("v-card-text",[a("v-row",[a("v-col",{staticClass:" white--text"},[a("small",[t._v("Deposits")]),a("h1",[t._v(t._s(t.count))])]),a("v-col",{staticClass:" white--text"},[a("small",[t._v("Total")]),a("h1",[t._v(t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t.amount)))])])],1)],1)],1)},l=[],u=(a("a9e3"),{name:"Panel",props:{title:String,count:Number,amount:Number}}),c=u,d=a("2877"),m=a("6544"),y=a.n(m),v=a("b0af"),h=a("99d9"),f=a("62ad"),_=a("0fd9"),p=Object(d["a"])(c,i,l,!1,null,null,null),g=p.exports;y()(p,{VCard:v["a"],VCardText:h["d"],VCardTitle:h["e"],VCol:f["a"],VRow:_["a"]});var b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-sheet",{staticClass:" mb-3 mx-3 ",attrs:{color:t.color,width:"100%",elevation:"2"}},[a("v-toolbar",{staticClass:"mb-3",attrs:{dense:"",flat:"",color:t.color}},[a("v-toolbar-title",{staticClass:"title "},[t._v(t._s(t.title))]),a("v-spacer")],1),a("v-row",{staticClass:"mx-1"},[t._l(t.departments,(function(e,n){return a("v-col",{key:n,staticClass:"mx-2 pa-0 px-2",attrs:{cols:"xs"==t.$vuetify.breakpoint.name?12:null}},[a("fieldset",{staticClass:"px-2 mb-2 fielset"},[a("legend",[t._v(t._s(e._id.name))]),a("v-row",[a("v-col",[a("small",[t._v("Deposits")]),a("h2",[t._v(t._s(e.count||0))])]),a("v-col",[a("small",[t._v("Total")]),a("h2",[t._v(t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e.amount||0)))])])],1)],1)])})),a("v-col",{staticClass:"mx-2 pa-0 px-2",attrs:{cols:"xs"==t.$vuetify.breakpoint.name?12:null}},[a("fieldset",{staticClass:"px-2 mb-2 fielset"},[a("legend",[t._v("Total today")]),a("v-row",[a("v-col",[a("small",[t._v("Deposits")]),a("h2",[t._v(t._s(t.todayTotal.count||0))])]),a("v-col",[a("small",[t._v("Total")]),a("h2",[t._v(t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t.todayTotal.amount||0)))])])],1)],1)]),a("v-col",{staticClass:"mx-2 pa-0 px-2",attrs:{cols:"xs"==t.$vuetify.breakpoint.name?12:null}},[a("fieldset",{staticClass:"px-2 mb-2 fielset"},[a("legend",[t._v("Total this month")]),a("v-row",[a("v-col",[a("small",[t._v("Deposits")]),a("h2",[t._v(t._s(t.monthTotal.count||0))])]),a("v-col",[a("small",[t._v("Total")]),a("h2",[t._v(t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t.monthTotal.amount||0)))])])],1)],1)])],2),a("v-row",[a("v-col",t._l(t.departmentsNames,(function(e,n){return a("v-btn",{key:n,staticClass:"mx-2",attrs:{outlined:""},on:{click:function(a){return t.table(e._id)}}},[t._v(t._s(e.name))])})),1)],1),a("v-dialog",{attrs:{"max-width":"950px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[t._v(" "+t._s(t.dialogTitle)+" "),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(e){t.dialog=!1}}},[a("v-icon",[t._v("mdi-close")])],1)],1),a("v-card-text",[t.dialog?a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.items,"multi-sort":""},on:{"click:row":t.goTo},scopedSlots:t._u([{key:"item.amount",fn:function(e){var a=e.item;return[t._v(" "+t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a.amount))+" ")]}}],null,!1,2157523568)}):t._e()],1)],1)],1)],1)},T=[],w=a("1157"),D=a.n(w),x=a("b9b9"),M=a.n(x),S=a("2f62"),k={name:"TotalSheet",props:{title:String,id:String,color:{type:String,default:"blue lighten-4"}},data:function(){return{dialog:!1,dialogTitle:"",items:[],headers:[{text:"Created By",align:"start",value:"_id.displayName"},{text:"Deals",value:"count"},{text:"Amount",value:"amount"}],selected:"month",departments:[],departmentsNames:[],todayTotal:{count:0,amount:0},monthTotal:{count:0,amount:0}}},methods:Object(s["a"])(Object(s["a"])({},Object(S["b"])({get:"api/get"})),{},{table:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log(e.id,t),a.next=3,e.get({collection:"dashboard/tables",query:{created_on:">="+M()(e.first_day_of_the_month,"yyyy-mm-dd"),business:e.id,department:t}});case 3:n=a.sent,e.items=n.data,console.log(n),e.dialog=!0;case 7:case"end":return a.stop()}}),a)})))()},goTo:function(t){var e={user:t._id._id,business:this.id,created_on:">="+M()(this.first_day_of_the_month,"yyyy-mm-dd"),sortBy:["created_on"],sortDesc:[!1]};this.$router.push("/deposit?"+D.a.param(e))}}),computed:{today:function(){var t=new Date;return t.setHours(0,0,0,0),t},first_day_of_the_month:function(){return new Date(this.today.getFullYear(),this.today.getMonth(),1)}},created:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.get({collection:"department"});case 2:return a=e.sent,a&&200==a.status&&(t.departmentsNames=a.data.docs),e.next=6,t.get({collection:"dashboard/business",query:{created_on:">="+M()(t.today,"yyyy-mm-dd"),business:t.id}});case 6:return n=e.sent,console.log(n),n&&200==n.status&&(t.departments=n.data.departmentsTotal,n.data.total[0]&&(t.todayTotal.count=n.data.total[0].count,t.todayTotal.amount=n.data.total[0].amount)),e.next=11,t.get({collection:"dashboard/total",query:{created_on:">="+M()(t.first_day_of_the_month,"yyyy-mm-dd"),business:t.id}});case 11:r=e.sent,r&&200==r.status&&r.data[0]&&(t.monthTotal.count=r.data[0].count,t.monthTotal.amount=r.data[0].amount);case 13:case"end":return e.stop()}}),e)})))()}},C=k,N=(a("1f50"),a("8336")),V=a("8fea"),O=a("169a"),U=a("132d"),F=a("8dd9"),j=a("2fa4"),H=a("71d9"),A=a("2a7f"),R=Object(d["a"])(C,b,T,!1,null,"bb3f286c",null),$=R.exports;y()(R,{VBtn:N["a"],VCard:v["a"],VCardText:h["d"],VCardTitle:h["e"],VCol:f["a"],VDataTable:V["a"],VDialog:O["a"],VIcon:U["a"],VRow:_["a"],VSheet:F["a"],VSpacer:j["a"],VToolbar:H["a"],VToolbarTitle:A["c"]});var I=a("fb57"),q=I["default"].get("deposit").table.filter((function(t){return"actions"!==t.value})),J={name:"Dashboard",components:{TotalPanel:g,TotalSheet:$},data:function(){return{totals:{today:{count:0,amount:0},month:{count:0,amount:0}},businesses:[],deposits:[],mdeposits:[],ftds:[],headers:q,mheaders:[{text:"Date",align:"start",value:"_id.date",width:"30%"},{text:"Created By",align:"start",value:"_id.user.displayName",width:"30%"},{text:"Deposits",value:"count",width:"30%"},{text:"Total",value:"amount"}]}},computed:Object(s["a"])(Object(s["a"])({},Object(S["d"])({user:function(t){return t.auth.user}})),{},{isAdmin:function(){return!this.user.business},isManager:function(){var t=this.user.rights.filter((function(t){return"deposit"==t.collection}));return this.user.business&&"all"==t[0].read.allOwn},today:function(){var t=new Date;return t.setHours(0,0,0,0),t},first_day_of_the_month:function(){var t=new Date;return new Date(t.getFullYear(),t.getMonth(),1)}}),methods:Object(s["a"])(Object(s["a"])({},Object(S["b"])({get:"api/get"})),{},{goTo:function(t){var e={user:t._id.user._id,created_on:M()(t._id.date,"yyyy-mm-dd"),sortBy:["created_on"],sortDesc:[!1]};this.$router.push("/deposit?"+D.a.param(e))},getTotals:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.get({collection:"dashboard/total",query:{created_on:">="+t.today}});case 2:return a=e.sent,e.next=5,t.get({collection:"dashboard/total",query:{created_on:">="+t.first_day_of_the_month}});case 5:n=e.sent,a&&200==a.status&&a.data.length&&(t.totals.today.count=a.data[0].count,t.totals.today.amount=a.data[0].amount),n&&200==n.status&&n.data.length&&(t.totals.month.count=n.data[0].count,t.totals.month.amount=n.data[0].amount);case 8:case"end":return e.stop()}}),e)})))()},getDesksTotals:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.isAdmin){e.next=5;break}return e.next=3,t.get({collection:"business",query:{sortBy:["name"],sortDesc:[!0]}});case 3:a=e.sent,a&&200==a.status&&a.data.docs.length&&(t.businesses=a.data.docs);case 5:case"end":return e.stop()}}),e)})))()},getTodayDeposits:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.get({collection:"deposit",query:{created_on:">="+t.today}});case 2:a=e.sent,t.deposits=a.data.docs;case 4:case"end":return e.stop()}}),e)})))()},getMonthDeposits:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.get({collection:"dashboard/grouped",query:{created_on:">="+t.first_day_of_the_month}});case 2:a=e.sent,t.mdeposits=a.data;case 4:case"end":return e.stop()}}),e)})))()},getFTDs:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.get({collection:"dashboard/ftds",query:{created_on:">="+t.first_day_of_the_month,assign:t.user._id}});case 2:a=e.sent,t.ftds=a.data;case 4:case"end":return e.stop()}}),e)})))()}}),created:function(){this.getTotals(),this.getDesksTotals(),this.getTodayDeposits(),this.getMonthDeposits(),this.getFTDs()}},P=J,B=a("a523"),E=a("ce7e"),Z=Object(d["a"])(P,n,r,!1,null,null,null);e["default"]=Z.exports;y()(Z,{VBtn:N["a"],VCol:f["a"],VContainer:B["a"],VDataTable:V["a"],VDivider:E["a"],VIcon:U["a"],VRow:_["a"],VSpacer:j["a"],VToolbar:H["a"],VToolbarTitle:A["c"]})},"840e":function(t,e,a){},b9b9:function(t,e,a){var n;(function(r){"use strict";var o=function(){var t=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|"[^"]*"|'[^']*'/g,e=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,a=/[^-+\dA-Z]/g;return function(n,r,c,d){if(1!==arguments.length||"string"!==u(n)||/\d/.test(n)||(r=n,n=void 0),n=n||new Date,n instanceof Date||(n=new Date(n)),isNaN(n))throw TypeError("Invalid date");r=String(o.masks[r]||r||o.masks["default"]);var m=r.slice(0,4);"UTC:"!==m&&"GMT:"!==m||(r=r.slice(4),c=!0,"GMT:"===m&&(d=!0));var y=c?"getUTC":"get",v=n[y+"Date"](),h=n[y+"Day"](),f=n[y+"Month"](),_=n[y+"FullYear"](),p=n[y+"Hours"](),g=n[y+"Minutes"](),b=n[y+"Seconds"](),T=n[y+"Milliseconds"](),w=c?0:n.getTimezoneOffset(),D=i(n),x=l(n),M={d:v,dd:s(v),ddd:o.i18n.dayNames[h],dddd:o.i18n.dayNames[h+7],m:f+1,mm:s(f+1),mmm:o.i18n.monthNames[f],mmmm:o.i18n.monthNames[f+12],yy:String(_).slice(2),yyyy:_,h:p%12||12,hh:s(p%12||12),H:p,HH:s(p),M:g,MM:s(g),s:b,ss:s(b),l:s(T,3),L:s(Math.round(T/10)),t:p<12?o.i18n.timeNames[0]:o.i18n.timeNames[1],tt:p<12?o.i18n.timeNames[2]:o.i18n.timeNames[3],T:p<12?o.i18n.timeNames[4]:o.i18n.timeNames[5],TT:p<12?o.i18n.timeNames[6]:o.i18n.timeNames[7],Z:d?"GMT":c?"UTC":(String(n).match(e)||[""]).pop().replace(a,""),o:(w>0?"-":"+")+s(100*Math.floor(Math.abs(w)/60)+Math.abs(w)%60,4),S:["th","st","nd","rd"][v%10>3?0:(v%100-v%10!=10)*v%10],W:D,N:x};return r.replace(t,(function(t){return t in M?M[t]:t.slice(1,t.length-1)}))}}();function s(t,e){t=String(t),e=e||2;while(t.length<e)t="0"+t;return t}function i(t){var e=new Date(t.getFullYear(),t.getMonth(),t.getDate());e.setDate(e.getDate()-(e.getDay()+6)%7+3);var a=new Date(e.getFullYear(),0,4);a.setDate(a.getDate()-(a.getDay()+6)%7+3);var n=e.getTimezoneOffset()-a.getTimezoneOffset();e.setHours(e.getHours()-n);var r=(e-a)/6048e5;return 1+Math.floor(r)}function l(t){var e=t.getDay();return 0===e&&(e=7),e}function u(t){return null===t?"null":void 0===t?"undefined":"object"!==typeof t?typeof t:Array.isArray(t)?"array":{}.toString.call(t).slice(8,-1).toLowerCase()}o.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},o.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],timeNames:["a","p","am","pm","A","P","AM","PM"]},n=function(){return o}.call(e,a,e,t),void 0===n||(t.exports=n)})()}}]);
//# sourceMappingURL=chunk-69886368.5eaca6cd.js.map