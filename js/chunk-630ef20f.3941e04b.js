(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-630ef20f"],{"1fdb":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-data-table",t._g(t._b({scopedSlots:t._u([{key:"top",fn:function(e){return[t._t("top",null,null,e)]}},{key:"expanded-item",fn:function(e){return[t._t("expanded-item",null,null,e)]}},{key:"item",fn:function(e){var n=e.headers,o=e.item,i=e.isMobile,s=e.isSelected,l=e.select,r=e.isExpanded,c=e.expand;return[a("tr",{class:{"v-data-table__mobile-table-row":i},on:{click:function(e){return t.$emit("click:row",o)}}},t._l(n,(function(e){var n;return a("td",{key:e.value,class:[{"v-data-table__mobile-row":i},{"v-data-table__divider":!i},(n={},n["text-"+(e.align||"start")]=!i,n)].concat(e.class),attrs:{width:i?null:e.width}},[i?a("div",{class:{"v-data-table__mobile-row__header":i}},[t._v(t._s(e.text))]):t._e(),"data-table-expand"==e.value?a("div",{class:{"v-data-table__mobile-row__cell":i}},[a("v-btn",{attrs:{text:""},on:{click:function(t){return t.preventDefault(),c(!r)}}},[a("v-icon",[t._v("mdi-chevron-"+t._s(r?"up":"down"))])],1)],1):"data-table-select"==e.value?a("div",{class:{"v-data-table__mobile-row__cell":i}},[a("VSimpleCheckbox",{staticClass:"v-data-table__checkbox",attrs:{ripple:!1,value:s},on:{input:l}})],1):"actions"==e.value?a("div",{class:{"v-data-table__mobile-row__cell":i}},t._l(t.getHeaderButtons(e,o),(function(e,n){return a("v-tooltip",{key:n,attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(n){var i=n.on,s=n.attrs;return[a("v-btn",t._g(t._b({attrs:{icon:""}},"v-btn","function"==typeof e.bind?e.bind(t.vm,o):e.bind,!1),"function"==typeof e.on?e.on(t.vm,o):e.on),[a("v-icon",t._g(t._b({attrs:{small:""}},"v-icon",s,!1),i),[t._v(" "+t._s(e.icon)+" ")])],1)]}}],null,!0)},[a("span",[t._v(t._s(e.title))])])})),1):e.component?a("div",{class:{"v-data-table__mobile-row__cell":i}},[a(e.component.is||e.component,t._g(t._b({tag:"component",attrs:{item:o,header:e,parent:t.vm}},"component","function"==typeof e.component?{}:"function"==typeof e.component.bind?e.component.bind(t.vm,o):e.component.bind||{},!1),"function"==typeof e.component.on?e.component.on(t.vm,o):e.component.on))],1):a("div",{class:{"v-data-table__mobile-row__cell":i},domProps:{innerHTML:t._s(t.$options.filters.dynamic([o,e.value],e.format,t.getFormatArgs(e.formatArgs,o)||[]))}})])})),0)]}}],null,!0)},"v-data-table",t.$attrs,!1),t.$listeners))},o=[],i=(a("4de4"),a("53ca")),s={name:"data-table",props:{parent:Object},computed:{vm:function(){return this.parent?this.parent:this.$parent}},methods:{fn:function(t){console.log(t)},getHeaderButtons:function(t,e){var a=this;return t.buttons?t.buttons.filter((function(t){if(!t.if)return!0;switch(Object(i["a"])(t.if)){case"function":return t.if(a.vm,e);case"boolean":return t.if;default:return!0}})):[]}}},l=s,r=a("2877"),c=a("6544"),d=a.n(c),u=a("8336"),m=a("8fea"),f=a("132d"),b=a("9e88"),p=a("3a2f"),v=Object(r["a"])(l,n,o,!1,null,null,null);e["a"]=v.exports;d()(v,{VBtn:u["a"],VDataTable:m["a"],VIcon:f["a"],VSimpleCheckbox:b["a"],VTooltip:p["a"]})},"3b51":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"ma-0 pa-0",attrs:{flat:"",color:"transparent"}},[a("v-card-title",{staticClass:"d-flex flex-column align-start ma-0 pa-0 py-1"},[t.$vuetify.breakpoint.mdAndUp?t._e():a("small",[t._v(t._s(t.tabNames[t.tab]))]),a("div",[t._v(t._s(t.dateString))]),a("v-spacer")],1),a("v-card-text",{staticClass:"ma-0 pa-0"},[a("v-btn-toggle",[a("v-btn",{on:{click:t.today}},[a("v-icon",[t._v("mdi-calendar-today")]),t.$vuetify.breakpoint.mdAndUp?a("span",[t._v("Today")]):t._e()],1),a("v-btn",{on:{click:t.week}},[a("v-icon",[t._v("mdi-calendar-week")]),t.$vuetify.breakpoint.mdAndUp?a("span",[t._v("Last 7 days")]):t._e()],1),a("v-btn",{on:{click:t.month}},[a("v-icon",[t._v("mdi-calendar-month")]),t.$vuetify.breakpoint.mdAndUp?a("span",[t._v("This month")]):t._e()],1),a("v-btn",{on:{click:function(e){t.dialog=!0}}},[a("v-icon",[t._v("mdi-calendar-range")]),t.$vuetify.breakpoint.mdAndUp?a("span",[t._v("Select a date range")]):t._e()],1)],1)],1),a("v-dialog",{attrs:{"max-width":"650"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-date-picker",{attrs:{range:"","full-width":""},on:{input:t.range},model:{value:t.dates,callback:function(e){t.dates=e},expression:"dates"}})],1)],1)],1)},o=[],i=(a("a15b"),a("d81d"),a("2e17")),s={name:"DatePicker",props:{value:{type:Array,default:function(){return i["a"].currentDateRange}}},data:function(){return{dates:i["a"].currentDateRange,dialog:!1,tab:1,tabNames:["Today","Last 7 days","This month","Selected date range"]}},computed:{dateString:function(){var t=this,e=Object.assign([],this.value).map((function(e){return t.$options.filters.date(e)}));return e[0]==e[1]?e[0]:e.join(" ~ ")}},methods:{today:function(){this.tab=0,this.$emit("input",i["a"].todayString),this.$emit("today",!0)},week:function(){this.tab=1,this.$emit("input",i["a"].last7daysString),this.$emit("today",!1)},month:function(){this.tab=2,this.$emit("input",i["a"].currentDateRange),this.$emit("today",!1)},range:function(){this.tab=3,this.dates.length>1&&(this.dialog=!1,this.$emit("input",this.dates),this.$emit("today",!1))}}},l=s,r=a("2877"),c=a("6544"),d=a.n(c),u=a("8336"),m=a("a609"),f=a("b0af"),b=a("99d9"),p=a("2e4b"),v=a("169a"),h=a("132d"),_=a("2fa4"),g=Object(r["a"])(l,n,o,!1,null,null,null);e["a"]=g.exports;d()(g,{VBtn:u["a"],VBtnToggle:m["a"],VCard:f["a"],VCardText:b["d"],VCardTitle:b["e"],VDatePicker:p["a"],VDialog:v["a"],VIcon:h["a"],VSpacer:_["a"]})},af7c:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("date-picker",{model:{value:t.dates,callback:function(e){t.dates=e},expression:"dates"}}),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"8"}},[a("v-text-field",{attrs:{outlined:"","prepend-inner-icon":"mdi-magnify","hide-details":"",placeholder:"Search Owner...",dense:"",clearable:""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("v-col",{attrs:{cols:"12",sm:"3"}},[a("v-select",{attrs:{outlined:"",items:t.towns,"prepend-inner-icon":"mdi-map-marker","hide-details":"",placeholder:"Town",dense:"",clearable:""},model:{value:t.town,callback:function(e){t.town=e},expression:"town"}})],1)],1),a("v-divider",{staticClass:"my-6"}),t.loading?a("v-progress-linear",{attrs:{indeterminate:""}}):t._e(),a("v-tabs",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},t._l(t.tabs,(function(e,n){return a("v-tab",{key:n},[a("v-icon",{staticClass:"mx-1"},[t._v(t._s(e.icon))]),t._v(t._s(e.title)+" ")],1)})),1),a("v-layout",{attrs:{"d-flex":"",column:""}},[a("v-flex",{staticClass:"my-4",attrs:{cols:"12"}},[a("data-table",{attrs:{items:t.total.items,headers:t.total.headers,"hide-default-footer":""}})],1),a("v-flex",{attrs:{cols:"12"}},[a("data-table",{attrs:{items:t.table.items,headers:t.table.headers}})],1)],1)],1)},o=[],i=(a("a15b"),a("d3b7"),a("ac1f"),a("841c"),a("498a"),a("96cf"),a("1da1")),s=a("2e17"),l=a("3b51"),r=a("b012"),c=a.n(r),d=a("1fdb"),u={components:{DatePicker:l["a"],DataTable:d["a"]},computed:{active:function(){return this.tabs[this.tab]}},data:function(){return{town:null,towns:[{text:"All",value:null},{text:"Haifa",value:"Haifa"},{text:"Nabless",value:"Nabless"}],tab:0,tabs:[{title:"FTD's",icon:"mdi-account-cash",api:{items:"deposit/sales?type=ftd",total:"deposit/sales?type=ftd&total=1"}},{title:"Retention's",icon:"mdi-cash-multiple",api:{items:"deposit/sales?type=rtn",total:"deposit/sales?type=rtn&total=1"}}],search:"",loading:!1,groupBy:"user",dates:s["a"].currentDateRange,total:{items:[],headers:[{text:"Deposits",value:"count",class:["font-weight-bold","subtitle-1"],width:"120",component:{is:function(){return a.e("chunk-2d21e1aa").then(a.bind(null,"d3af"))},bind:{path:"/deposit",query:{type:"ftd","sortBy[]":["created_on"],created_on:function(t){return t.dates.join("|")},limit:function(t,e){return e.count}}}}},{text:"Total",class:["font-weight-bold","subtitle-1"],value:"amount",format:"money"},{text:"Performance",class:["font-weight-bold","subtitle-1"],value:"deposits",width:200,component:{is:function(){return a.e("chunk-2d222778").then(a.bind(null,"cf76"))},bind:{field:"amount"}}}]},table:{items:[],headers:[{text:"Owner",sortable:!1,value:"user.displayName",component:function(){return a.e("chunk-2d21a061").then(a.bind(null,"ba6b"))}},{text:"Role",sortable:!1,value:"user.role"},{text:"Town",sortable:!1,value:"user.town"},{text:"Deposits",value:"count",class:["font-weight-bold text-center"],width:"120",component:{is:function(){return a.e("chunk-2d21e1aa").then(a.bind(null,"d3af"))},bind:{path:"/deposit",query:{user:function(t,e){return e._id},"sortBy[]":["created_on"],created_on:function(t){return t.dates.join("|")},limit:function(t,e){return e.count}}}}},{text:"Total",value:"amount",format:"money"},{text:"T.A",sortable:!1,value:"user.target",width:150,component:{is:function(){return a.e("chunk-2d207b64").then(a.bind(null,"a263"))},bind:{field:"amount"}}},{text:"Performance",value:"deposits",width:150,component:{is:function(){return a.e("chunk-2d222778").then(a.bind(null,"cf76"))},bind:{field:"amount"}}}]}}},watch:{search:c()((function(){this.fetch()}),500),dates:{immediate:!0,handler:"fetch"},tab:function(){this.search="",this.town=null,this.fetch()},town:function(){this.fetch()}},methods:{fetch:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,a={created_on:t.dates.join("|")},t.search&&(a["user.displayName"]="~"+t.search.trim()),t.town&&(a["user.town"]="~"+t.town.trim()),e.next=6,t.get({collection:t.active.api.items,query:a});case 6:return n=e.sent,e.next=9,t.get({collection:t.active.api.total,query:a});case 9:o=e.sent,t.total.items=o.data,t.table.items=n.data,t.loading=!1,console.log(n);case 14:case"end":return e.stop()}}),e)})))()}}},m=u,f=a("2877"),b=a("6544"),p=a.n(b),v=a("62ad"),h=a("a523"),_=a("ce7e"),g=a("0e8f"),w=a("132d"),y=a("a722"),x=a("8e36"),k=a("0fd9"),V=a("b974"),$=a("71a3"),T=a("fe57"),D=a("8654"),C=Object(f["a"])(m,n,o,!1,null,null,null);e["default"]=C.exports;p()(C,{VCol:v["a"],VContainer:h["a"],VDivider:_["a"],VFlex:g["a"],VIcon:w["a"],VLayout:y["a"],VProgressLinear:x["a"],VRow:k["a"],VSelect:V["a"],VTab:$["a"],VTabs:T["a"],VTextField:D["a"]})}}]);
//# sourceMappingURL=chunk-630ef20f.3941e04b.js.map