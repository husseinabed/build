(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-aa288dc4"],{"5b8f":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-col",[t.readAccess?n("v-col",{staticClass:"pa-0 ma-0"},[t.found?n("v-toolbar",{attrs:{elevation:"1"}},[n("h2",{staticClass:"mb-3"},[n("v-icon",{attrs:{size:"30"}},[t._v(" "+t._s(this.icon)+" ")]),t._v(" "+t._s(t.title))],1),n("v-spacer"),t.writeAccess?n("v-btn",{attrs:{color:"success"},on:{click:function(e){return t.$router.push("/"+t.$route.params.collection+"/new")}}},[n("v-icon",[t._v("mdi-plus")]),t._v(" New ")],1):t._e()],1):t._e(),t.found?n("v-data-table",{staticClass:"my-5 elevation-1",attrs:{loading:t.loading,headers:t.headers,items:t.items,"items-per-page":t.pagination.limit,"hide-default-footer":""},scopedSlots:t._u([{key:"item.created_on",fn:function(e){var n=e.item;return[t._v(" "+t._s((new Intl.DateTimeFormat).format(new Date(n.created_on)))+" ")]}},t.hasAmount?{key:"item.payment_method",fn:function(e){var n=e.item;return[t._v(" "+t._s(n.payment_method.name)+" ("+t._s(n.payment_method.type)+") ")]}}:null,t.hasAmount?{key:"item.amount",fn:function(e){var n=e.item;return[t._v(" "+t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(n.amount))+" ")]}}:null,{key:"item.active",fn:function(t){var e=t.item;return[n("v-badge",{attrs:{color:e.active?"green":"grey"}})]}},{key:"item.read",fn:function(t){var e=t.item;return[n("v-badge",{attrs:{color:e.read?"green":"grey"}})]}},t.hasAmount?{key:"body.append",fn:function(e){return[n("tr",[n("td",{staticClass:"font-weight-bold"},[t._v("Total Amount")]),n("td"),n("td",{staticClass:"font-weight-bold"},[t._v(" "+t._s(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e.items.length?e.items.map((function(t){return t.amount})).reduce((function(t,e){return t+e})):0))+" ")]),n("td",{attrs:{colspan:"5"}})])]}}:null,{key:"item.actions",fn:function(e){var a=e.item;return[t.readAccess?n("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.showItem(a)}}},[t._v(" mdi-eye ")]):t._e(),t.updateAccess?n("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editItem(a)}}},[t._v(" mdi-pencil ")]):t._e(),t.deleteAccess?n("v-icon",{attrs:{small:""},on:{click:function(e){return t.deleteItem(a)}}},[t._v(" mdi-delete ")]):t._e()]}}],null,!0)}):n("v-not-found"),t.found?n("v-toolbar",{attrs:{short:"",elevation:"1"}},[n("v-pagination",{staticClass:"my-4",attrs:{length:t.pagination.totalPages},on:{input:t.changePage},model:{value:t.pagination.page,callback:function(e){t.$set(t.pagination,"page",e)},expression:"pagination.page"}}),n("v-spacer"),n("v-select",{attrs:{label:"Limit",dense:"",outlined:"","hide-details":"",items:[5,10,15]},on:{input:t.changeLimit},model:{value:t.pagination.limit,callback:function(e){t.$set(t.pagination,"limit",e)},expression:"pagination.limit"}})],1):t._e()],1):n("v-col",[n("v-card",{attrs:{width:"100%"}},[n("v-card-text",{staticClass:"text-center pa-12"},[n("v-icon",{attrs:{size:"70"}},[t._v("mdi-lock")]),n("h2",[t._v("Access Denied")]),n("p",[t._v(" you dont have the right to view this content ")])],1)],1)],1),n("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[n("v-card",[n("v-card-title",[n("v-spacer"),n("v-btn",{attrs:{icon:""},on:{click:function(e){t.dialog=!1}}},[n("v-icon",[t._v("mdi-close")])],1)],1),n("v-card-text",[t._v(" asdsaddd ")])],1)],1)],1)},i=[],r=(n("4de4"),n("4160"),n("c975"),n("b0c0"),n("159b"),n("96cf"),n("1da1")),c=n("5530"),o=n("2f62"),s=n("8654"),u=n("b974"),l=n("b73d"),d=n("bb0b"),m=n("e94a"),f=n("fb57"),h={data:function(){return{collection:f["default"].get(this.$route.params.collection),filterOn:!1,dialog:!1,loading:!1,title:"",icon:"",found:!0,headers:[],items:[],pagination:{page:1,limit:5,totalPages:1},inputs:{text:s["a"],select:u["a"],switch:l["a"],date:m["a"],autocomplete:d["a"]}}},computed:{access:function(){var t=this;return this.$store.state.auth.user.rights?this.$store.state.auth.user.rights.filter((function(e){return e.value==t.$route.params.collection})):[]},writeAccess:function(){return this.access.length>0&&this.access[0].write},readAccess:function(){return this.access.length>0&&this.access[0].read},updateAccess:function(){return this.access.length>0&&this.access[0].update},deleteAccess:function(){return this.access.length>0&&this.access[0].delete},hasAmount:function(){var t=["sales","retention"];return-1!==t.indexOf(this.$route.params.collection)},filterFields:function(){var t=this.collection,e=[];return t.table.forEach((function(n){t.form.forEach((function(t){t.fields.forEach((function(t){n.value==t.name&&e.push(t)}))}))})),e}},watch:{$route:function(){this.updateComponent()}},methods:Object(c["a"])(Object(c["a"])({},Object(o["b"])({get:"api/get",remove:"api/remove"})),{},{fetch:function(){var t=arguments,e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var a,i,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=t.length>0&&void 0!==t[0]?t[0]:{},i={page:e.pagination.page,limit:e.pagination.limit},a=Object.assign(i,a),e.loading=!0,n.next=6,e.get({collection:e.$route.params.collection,query:a});case 6:r=n.sent,console.log(r),r&&200===r.status&&(e.items=r.data.docs,e.pagination.totalPages=r.data.totalPages),e.loading=!1;case 10:case"end":return n.stop()}}),n)})))()},changePage:function(t){this.fetch({page:t})},changeLimit:function(t){this.fetch({page:1,limit:t})},editItem:function(t){this.$router.push("/"+this.$route.params.collection+"/"+t._id)},showItem:function(){this.dialog=!0},deleteItem:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var a,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$confirm("Are you sure do you want to delete this item ?",{title:"Warning"});case 2:if(a=n.sent,!a){n.next=9;break}return e.loading=!0,n.next=7,e.remove({collection:e.$route.params.collection,id:t._id});case 7:i=n.sent,200===i.status&&(e.fetch(),e.loading=!1,e.$store.commit("success","Item deleted successfuly"));case 9:case"end":return n.stop()}}),n)})))()},updateComponent:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.collection,!n){e.next=9;break}return t.title=n.title,t.icon=n.icon,t.headers=n.table,e.next=7,t.fetch();case 7:e.next=10;break;case 9:t.found=!1;case 10:case"end":return e.stop()}}),e)})))()}}),created:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.updateComponent();case 1:case"end":return e.stop()}}),e)})))()}},p=h,v=(n("6fdf"),n("2877")),g=n("6544"),b=n.n(g),_=n("4ca6"),w=n("8336"),y=n("b0af"),k=n("99d9"),x=n("62ad"),$=n("8fea"),A=n("169a"),C=n("132d"),V=n("891e"),I=n("2fa4"),O=n("71d9"),j=Object(v["a"])(p,a,i,!1,null,"3c621986",null);e["default"]=j.exports;b()(j,{VBadge:_["a"],VBtn:w["a"],VCard:y["a"],VCardText:k["d"],VCardTitle:k["e"],VCol:x["a"],VDataTable:$["a"],VDialog:A["a"],VIcon:C["a"],VPagination:V["a"],VSelect:u["a"],VSpacer:I["a"],VToolbar:O["a"]})},"6fdf":function(t,e,n){"use strict";var a=n("bc45"),i=n.n(a);i.a},bc45:function(t,e,n){}}]);
//# sourceMappingURL=chunk-aa288dc4.329d10f3.js.map